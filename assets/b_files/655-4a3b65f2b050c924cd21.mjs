(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[655,748],{"+o5r":function(e,t,n){n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return s}));const i=320,s=e=>e<=i},CwtX:function(e,t,n){n.r(t),n.d(t,"NUMBER_OF_INTERESTS",(function(){return M})),n.d(t,"MIN_NUM_OF_INTERESTS_FOR_BOARD",(function(){return E})),n.d(t,"BoardRelatedInterestUpsellContainer",(function(){return D}));var i=n("q1tI"),s=n("/MKj"),o=n("NwG/"),r=n("yweb"),l=n("S1na"),a=n("qpbZ"),c=n("wMN6"),d=n("2COb"),b=n("0G5S"),u=n("vtuW"),j=n("ulr2"),m=n("EC67"),p=n("snfI"),O=n("0HhX"),h=n("n6mq"),g=n("nwTc"),f=n("AGnR"),_=n("nKUr");var w=({onComplete:e,pinId:t})=>{const n=Object(r.c)(),w=Object(l.a)(),x=Object(s.useSelector)(e=>e.session.locale),[y,I]=Object(i.useState)(!1),[S,C]=Object(i.useState)(!1),{isNavFooterHiddenAfterScroll:v,setHomeFlyoutText:T,setShowHomeBadge:R,setShowHomeFlyoutWithButton:M}=Object(p.b)();Object(O.a)({name:"PinInterestsResource",options:{hideFollowed:!0,limit:1,pinId:t}});const E=Object(s.useSelector)(({session:e})=>e.isTablet),D=Object(s.useSelector)(({pins:e,topics:n})=>{var i;const s=null===(i=e[t].related_interest_ids)||void 0===i?void 0:i[0];return s&&n[s]||null}),{background_color:N,follower_count:k,id:A,images:z,is_followed:F,name:B}=D||{},H=(z||{})["400x"],L=Object(i.useRef)(),P=Object(i.useRef)(),U=Object(i.useRef)(),W=Object(s.useDispatch)(),q=Object(m.h)();Object(i.useEffect)(()=>(D&&(Object(b.c)("lastViewedMiniRenux",Date.now()),Object(f.e)({event_type:9025,view_type:3,component:39,element:216,aux_data:{interest:B,interest_id:A,pin_id:t}}),C(!0),U.current=setTimeout(()=>{L.current||C(!1)},1e4)),()=>{S&&e(),clearTimeout(L.current),clearTimeout(P.current),clearTimeout(U.current)}),[A]);return D?Object(_.jsx)(h.f,{color:"white",padding:4,marginStart:4,marginEnd:4,onTransitionEnd:()=>{S||e(P.current?B:void 0)},rounding:6,width:E?425:"auto",dangerouslySetInlineStyle:{__style:{opacity:S?1:0,transform:S?"translate(0, -12px)":"",transition:"\n            translate 300ms ease-in-out, opacity 300ms ease-in-out\n          "}},children:Object(_.jsxs)(h.t,{alignItems:"center",justifyContent:"between",children:[Object(_.jsx)(h.bb,{onTap:()=>{Object(f.h)({view_type:3,component:39,element:216,aux_data:{interest:B,interest_id:A,pin_id:t}})},children:Object(_.jsxs)(h.t,{alignItems:"center",justifyContent:"start",children:[H?Object(_.jsx)(h.f,{flex:"none",children:Object(_.jsx)(h.C,{rounding:4,width:60,height:60,children:Object(_.jsx)(h.x,{alt:B,color:N,naturalWidth:H.width,naturalHeight:H.height,src:H.url})})}):null,y?Object(_.jsx)(h.f,{marginStart:4,marginEnd:4,children:Object(_.jsx)(h.cb,{size:"lg",children:Object(a.b)(n._("We've updated your home feed with fresh ideas for {{ interestName }}","relatedInterests.upsell.image","Prompt users to go to home page after follow an interest"),{interestName:Object(_.jsx)(h.cb,{size:"lg",weight:"bold",inline:!0,children:Object(c.l)(B,x)},B)})})}):Object(_.jsxs)(h.f,{marginStart:4,marginEnd:4,children:[Object(_.jsx)(h.f,{marginBottom:1,children:Object(_.jsx)(h.cb,{size:"lg",weight:"bold",children:B})}),k?Object(_.jsx)(h.cb,{size:"lg",children:Object(a.b)(n.ngettext("{{followers}} follower","{{followers}} followers",k,"interest.attribution.followerCount","Count of an interest's followers"),{followers:w(x,k,{shortform:!0,shortform_maximum_fraction_digits:1})})}):null]})]})}),y?Object(_.jsx)(h.w,{accessibilityLabel:n._("Go to home page","relatedInterests.upsell.arrowIcon","Icon button on related interests banner that prompt users to go to home page"),bgColor:"red",icon:"arrow-forward",iconColor:"white",onClick:()=>{Object(d.a)(!1),T(),R(!1),M(!1),Object(f.h)({view_type:3,component:39,element:76,aux_data:{interest:B,interest_id:A,pin_id:t}}),q.push("/")},padding:3,size:"sm"}):Object(_.jsx)(o.a,{auxData:{interest:B,interest_id:A,pin_id:t},id:A,inline:!0,size:"md",isFollowed:F,onFollow:e=>{Object(u.c)("completedMiniRenux",!0),W(Object(j.R)(!0)),W(Object(g.b)(e,"mini_renux")),v?(L.current=setTimeout(()=>{I(!0)},800),P.current=setTimeout(()=>{C(!1)},5e3)):P.current=setTimeout(()=>{C(!1)},800)},onUnfollow:e=>{Object(u.c)("completedMiniRenux",!1),W(Object(j.R)(!1)),W(Object(g.d)(e,"mini_renux")),L.current&&clearTimeout(L.current)},followEventType:601,unfollowEventType:602,viewParameter:155,viewType:3})]})}):null},x=n("CYge"),y=n("QtD7"),I=n("QAzJ"),S=n("xQAO");const C={3:"pin_id",5:"board_id"},v=({image:e,objectId:t,onComplete:n,showRelatedInterestModal:o,viewType:l})=>{const a=Object(r.c)(),[c,d]=Object(i.useState)(!1),u=Object(s.useSelector)(({session:e})=>e.isTablet),j=Object(i.useRef)(),m=Object(i.useMemo)(()=>C[l]?{[C[l]]:t}:{},[t,l]);Object(i.useEffect)(()=>(Object(b.c)("lastViewedMiniRenux",Date.now()),Object(f.e)({event_type:9025,view_type:l,component:13822,aux_data:{...m}}),d(!0),j.current||(j.current=setTimeout(()=>{d(!1)},1e4)),()=>{clearTimeout(j.current)}),[m,o,l]);return Object(_.jsx)(h.f,{color:"white",padding:4,marginStart:4,marginEnd:4,onTransitionEnd:()=>{c||n()},rounding:6,width:u?425:"auto",dangerouslySetInlineStyle:{__style:{opacity:c?1:0,transform:c?"translate(0, -12px)":"",transition:"\n            translate 300ms ease-in-out, opacity 300ms ease-in-out\n          "}},children:Object(_.jsxs)(h.t,{alignItems:"center",justifyContent:"between",children:[Object(_.jsx)(h.bb,{onTap:()=>{Object(f.h)({view_type:l,component:13822,aux_data:{...m}})},children:Object(_.jsxs)(h.t,{alignItems:"center",justifyContent:"start",children:[e?Object(_.jsx)(h.f,{flex:"none",children:Object(_.jsx)(h.C,{rounding:4,width:60,height:60,children:Object(_.jsx)(h.x,{alt:a._("Image thumbnail on related interest upsell","relatedInterests.upsell.image","Alt info on thumbnail image on related interest upsell"),color:"white",naturalWidth:e.width,naturalHeight:e.height,src:e.url})})}):null,Object(_.jsxs)(h.f,{marginStart:4,marginEnd:4,children:[Object(_.jsx)(h.f,{marginBottom:1,children:Object(_.jsx)(h.cb,{size:"sm",children:a._("Welcome back!","relatedInterests.upsell.header","Welcome header on related interests banner")})}),Object(_.jsx)(h.cb,{size:"lg",weight:"bold",children:a._("Tell us what you're into","relatedInterests.upsell.subheader","Subheader on related interests banner instructing users to select interests")})]})]})}),Object(_.jsx)(h.w,{accessibilityLabel:a._("See related interests","relatedInterests.upsell.arrowIcon","Icon button on related interests banner that opens related interests modal"),bgColor:"red",icon:"arrow-forward",iconColor:"white",onClick:()=>{d(!1),o(!1),Object(f.h)({view_type:l,component:13822,element:96,aux_data:{...m}})},padding:3,size:"sm"})]})})},T=({numOfInterests:e,onComplete:t,pinId:n,showRelatedInterestModal:i})=>{var o;const r=Object(S.a)(n),l=null==r||null===(o=r.images)||void 0===o?void 0:o["60x60"];Object(O.a)({name:"PinInterestsResource",options:{hideFollowed:!0,limit:e,pinId:n}});const a=Object(s.useSelector)(({pins:e,topics:t})=>{const i=e[n].related_interest_ids;return null==i?void 0:i.map(e=>t[e])});return(null==a?void 0:a.length)===e&&Object(_.jsx)(v,{image:l,objectId:n,onComplete:t,showRelatedInterestModal:i,viewType:3})},R=({numOfInterests:e,onComplete:t,boardId:n,showRelatedInterestModal:i})=>{const o=Object(s.useSelector)(({boards:e})=>e[n]),r=null==o?void 0:o.images["170x"][0];Object(O.a)({name:"ApiResource",options:{url:`/v3/boards/${n}/interests/`,data:{deduping_enabled:!0,hide_followed:!0,limit:e},field_sets:["interest.background_color","interest.follower_count","interest.id","interest.images[400x]","interest.is_followed","interest.name","interest.type","interest.url_name"]}});const l=Object(s.useSelector)(({boards:e,topics:t})=>{const i=e[n].related_interest_ids;return null==i?void 0:i.map(e=>t[e])});return l&&l.length>=E?Object(_.jsx)(v,{image:r,objectId:n,onComplete:t,showRelatedInterestModal:i,viewType:5}):null};const M=6,E=3,D=({onComplete:e,boardId:t,showRelatedInterestModal:n})=>{const{anyEnabled:i}=Object(I.a)("mweb_board_mini_renux"),{isNavFooterHiddenAfterScroll:s}=Object(p.b)();Object(y.b)();const o=x.b+16,r={marginBottom:s?16:o,transition:"margin-bottom 300ms ease-in-out"};return Object(_.jsx)(h.f,{display:"flex",justifyContent:"center",position:"fixed",left:!0,right:!0,bottom:!0,dangerouslySetInlineStyle:{__style:r},children:i&&Object(_.jsx)(R,{numOfInterests:M,onComplete:e,boardId:t,showRelatedInterestModal:n})})};t.default=({onComplete:e,pinId:t,showRelatedInterestModal:n})=>{const{anyEnabled:i,group:s}=Object(I.a)("mweb_mini_renux"),{isNavFooterHiddenAfterScroll:o}=Object(p.b)();Object(y.b)();const r={marginBottom:o?16:x.b+16,transition:"margin-bottom 300ms ease-in-out"},l=i?Number(s.slice(-1)):NaN;return Object(_.jsxs)(h.f,{display:"flex",justifyContent:"center",position:"fixed",left:!0,right:!0,bottom:!0,dangerouslySetInlineStyle:{__style:r},children:[1===l&&Object(_.jsx)(w,{onComplete:e,pinId:t}),l>1&&Object(_.jsx)(T,{numOfInterests:l,onComplete:e,pinId:t,showRelatedInterestModal:n})]})}},Hmcd:function(e,t,n){var i=n("q1tI"),s=n("/MKj"),o=n("mp1x"),r=n("h8Qw"),l=n("yweb"),a=n("+o5r"),c=n("vtuW"),d=n("ulr2"),b=n("EC67"),u=n("CwtX"),j=n("n6mq"),m=n("nwTc"),p=n("AGnR"),O=n("nKUr");const h={pin:3,board:5},g=(e,t,n)=>({view_type:h[e],component:39,aux_data:{interests:null==t?void 0:t.map(e=>e.id),[e+"_id"]:n}});t.a=function({isMaskTransparent:e,objectId:t,onDismiss:n,type:h}){const f=Object(l.c)(),_=Object(s.useSelector)(({session:e})=>e.isTablet),w=Object(a.b)(window.innerWidth),x=Object(s.useDispatch)(),y=Object(b.h)(),I="pin"===h?u.NUMBER_OF_INTERESTS:u.MIN_NUM_OF_INTERESTS_FOR_BOARD,S=Object(s.useSelector)(({boards:e,pins:n,topics:i})=>{const s="pin"===h?n[t].related_interest_ids:e[t].related_interest_ids;return null==s?void 0:s.map(e=>i[e])}),C=(null==S?void 0:S.length)||0;Object(i.useEffect)(()=>{C>=I&&Object(p.e)({...g(h,S,t),event_type:9025})},[I,t,C,h,S]);const v=Object(i.useCallback)((e,t)=>{t?x(Object(m.d)(e,"mini_renux")):(Object(c.c)("completedMiniRenux",!0),x(Object(m.b)(e,"mini_renux")))},[]),T=Object(i.useCallback)(()=>{n(),Object(p.h)({...g(h,S,t),element:12284})},[n,h,S,t]),R=Object(i.useCallback)(()=>{n(),Object(p.h)({...g(h,S,t),element:11925})},[n,h,S,t]),M=Object(i.useCallback)(()=>{x(Object(d.R)(!0)),y.push("/"),Object(p.h)({...g(h,S,t),element:76})},[y,t,S]);return C>=I?Object(O.jsxs)(o.a,{hideCloseIcon:!0,isLegoModal:!0,isOpen:!0,isSlideUp:!0,isMaskTransparent:e,isTablet:_,onDismiss:T,type:"related_interests_modal",children:[Object(O.jsxs)(j.f,{flex:"grow",display:"flex",alignItems:"baseline",margin:-1,children:[Object(O.jsx)(j.f,{display:"flex",alignItems:"center",children:Object(O.jsx)(j.w,{accessibilityLabel:f._("Close modal","relatedInterests.modal.close","Close related interests modal icon button"),iconColor:"darkGray",icon:"cancel",onClick:R,padding:4,size:"sm"})}),Object(O.jsx)(j.f,{display:"flex",flex:"grow",alignItems:"center",justifyContent:"center",marginStart:0,marginEnd:12,children:Object(O.jsx)(j.cb,{align:"center",size:"sm",children:f._("Welcome back!","relatedInterests.modal.header","Welcome header on related interests banner")})})]}),Object(O.jsx)(j.f,{children:Object(O.jsx)(j.cb,{size:"lg",weight:"bold",align:"center",children:f._("Tell us what else you're interested in","relatedInterests.modal.subheader","Subheader on realted interests banner instructing users to select interests")})}),Object(O.jsx)(j.f,{display:"flex",alignItems:"center",justifyContent:"center",paddingY:3,wrap:!0,children:null==S?void 0:S.map(e=>Object(O.jsx)(j.f,{padding:1,children:Object(O.jsx)(j.bb,{tapStyle:"compress",rounding:"pill",onTap:()=>{v(e.id,e.is_followed)},children:Object(O.jsx)(r.a,{decreaseNamePadding:w,id:e.id,isLego:!0,isSelected:e.is_followed,nameTextSize:"sm",renderAsPill:!0,topicBlob:e,viewParameter:155,viewType:3})})},e.id))}),Object(O.jsx)(j.f,{display:"flex",justifyContent:"center",paddingX:2,children:Object(O.jsx)(j.g,{accessibilityLabel:f._("See your new home feed","relatedInterests.modal.seeHomefeed","Submit selected topics and go to updated homefeed button"),color:"red",disabled:!(null==S?void 0:S.some(e=>e.is_followed)),onClick:M,text:f._("See your new home feed","relatedInterests.modal.seeHomefeed","Submit selected topics and go to updated homefeed button"),size:"lg"})})]}):null}},Lgwu:function(e,t,n){n.r(t),n.d(t,"default",(function(){return m}));var i=n("q1tI"),s=n("/MKj"),o=n("mp1x"),r=n("5mqq"),l=n("Hmcd"),a=n("rYoy"),c=n("yweb"),d=n("ulr2"),b=n("nKUr");const u=Object(i.lazy)(()=>n.e(646).then(n.bind(null,"v/Qq"))),j=Object(i.lazy)(()=>n.e(613).then(n.bind(null,"DlC4")));function m({experience:e,isAuthenticated:t,isMaskTransparent:n,modal:m,onDismiss:p,onSendButtonClick:O,pin:h,postDownloadModalEligibilityType:g,viewParameter:f,clientTrackingParams:_}){const w=Object(c.c)(),x=Object(s.useDispatch)();return h?Object(b.jsxs)(i.Fragment,{children:[Object(b.jsx)(o.a,{isOpen:"reportPinModal"===m,accessibilityCloseIconLabel:w._("close report modal"),onDismiss:p,type:"closeup_page",children:Object(b.jsx)(r.a,{textSize:"lg"})}),t&&!!g&&Object(b.jsx)(a.a,{children:Object(b.jsx)(u,{isOpen:"postDownloadModal"===m,onDismiss:p,onSend:O,pinId:h.id,postDownloadModalEligibilityType:g,viewParameter:f,viewType:3,clientTrackingParams:_})}),Object(b.jsx)(a.a,{children:Object(b.jsx)(j,{objectType:1,isOpen:"sendPinModal"===m,onDismiss:()=>{t||x(Object(d.o)()),p()},objectId:h.id,hideContactsSuggestions:!t,experience:e})}),Object(b.jsx)(a.a,{children:"relatedInterestsModal"===m&&Object(b.jsx)(l.a,{isMaskTransparent:n,objectId:h.id,onDismiss:p,type:"pin"})})]}):null}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/655-4a3b65f2b050c924cd21.mjs.map