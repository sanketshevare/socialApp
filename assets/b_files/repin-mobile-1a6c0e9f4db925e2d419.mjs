(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["www/pin/[id]/repin-mobile"],{"/brd":function(e,t,i){i.d(t,"a",(function(){return n})),i.d(t,"i",(function(){return r})),i.d(t,"e",(function(){return o})),i.d(t,"f",(function(){return s})),i.d(t,"g",(function(){return a})),i.d(t,"d",(function(){return c})),i.d(t,"j",(function(){return d})),i.d(t,"h",(function(){return l})),i.d(t,"b",(function(){return p})),i.d(t,"c",(function(){return b}));const n=3,r=[500742,501040],o="Gender",s="InterestPicker",a="LoadingStep",c="AppInstall",d={NUX_GENDER_STEP_NAME:o,NUX_INTEREST_PICKER_STEP_NAME:s,NUX_LOADING_STEP_NAME:a,NUX_APP_INSTALL_STEP_NAME:c},l="mweb_nux_move_app_upsell_step",p="before_gender",b="before_interest_picker"},"1xPy":function(e,t,i){i.d(t,"b",(function(){return o}));var n=i("q1tI");const r=Object(n.createContext)(!0);function o(){return Object(n.useContext)(r)}t.a=r},"CRO+":function(e,t,i){i.r(t),i.d(t,"RepinPage",(function(){return Se})),i.d(t,"RepinPageContainer",(function(){return ve}));var n=i("q1tI"),r=i("/MKj"),o=i("PaNI"),s=i("yweb"),a=i("dKiF"),c=i("n6mq"),d=i("nKUr");const l="cubic-bezier(0.66, 0.025, 0.33, 0.975)",p=Object(a.d)((e,t,i,n,r)=>{let o=e,s=t,a=0,c=0,d="";const p=Math.floor(t/3);if("shrinkToPin"===i&&(a="24px",c=1,o=Math.floor(3*p/2),s=p),"pinToGrid"===i&&n&&r){const e=n.getBoundingClientRect(),t=r.getBoundingClientRect();d=`translate(${t.x+t.width/2-(e.x+e.width/2)}px, ${t.y+t.height/2-(e.y+e.height/2)}px)`,a="24px 0px 0px 24px",c=1,o=p,s=p}return{borderRadius:a,height:o,opacity:c,overflow:"hidden",width:s,WebkitTransformOrigin:"center center",transformOrigin:"center center",WebkitTransform:d,transform:d,WebkitTransition:"all .42s "+l,transition:"all .42s "+l}}),b=Object(a.d)(e=>({opacity:e?1:0,WebkitTransition:"opacity .42s "+l,transition:"opacity .42s "+l})),h=Object(a.d)(e=>({opacity:e?0:1,WebkitTransition:"all .25s "+l,transition:"all .25s "+l,zIndex:3}));function u({completeExperience:e,pinDominantColor:t,pinImageHeight:i,pinImageWidth:r,pinImageUrl:o}){const a=Object(s.c)(),[l,u]=Object(n.useState)("visible"),[j,g]=Object(n.useState)("none");let m,f,x,O;const y=window.innerWidth,_=y*(i/r),S=Math.floor(y/3),v=Math.floor(y/6);Object(n.useEffect)(()=>{o&&"none"===j&&(m=setTimeout(()=>{g("shrinkToPin")},85)),o&&"shrinkToPin"===j&&(f=setTimeout(()=>{g("pinToGrid")},2e3)),"pinToGrid"===j&&"visible"===l&&(x=setTimeout(()=>{u("hidden")},2e3)),"hidden"===l&&(O=setTimeout(()=>{u("none"),e()},300))}),Object(n.useEffect)(()=>()=>{clearTimeout(m),clearTimeout(f),clearTimeout(x),clearTimeout(O)},[]);const w=Object(n.useRef)(null),I=Object(n.useRef)(null);return Object(d.jsxs)(c.f,{color:"white",position:"fixed",top:!0,bottom:!0,right:!0,left:!0,display:"none"===l?"none":"flex",direction:"column",alignItems:"center",justifyContent:"center",dangerouslySetInlineStyle:{__style:h("hidden"===l)},children:[Object(d.jsxs)(c.f,{height:y/2,width:"100%",marginBottom:8,display:"flex",justifyContent:"center",alignItems:"center",position:"relative",children:[Object(d.jsx)(c.f,{position:"absolute",dangerouslySetInlineStyle:{__style:b("pinToGrid"===j)},children:Object(d.jsx)(c.C,{rounding:6,width:S+v+1,height:S,children:Object(d.jsxs)(c.f,{display:"flex",justifyContent:"between",children:[Object(d.jsx)(c.f,{width:S,height:S,color:"transparent",ref:I}),Object(d.jsxs)(c.f,{display:"flex",direction:"column",justifyContent:"between",children:[Object(d.jsx)(c.f,{width:v,height:v,color:"lightGray"}),Object(d.jsx)(c.f,{width:v,height:v,color:"lightGray"})]})]})})}),Object(d.jsx)(c.f,{ref:w,position:"absolute",dangerouslySetInlineStyle:{__style:p(_,y,j,w.current,I.current)},children:Object(d.jsx)(c.x,{alt:a._("Pin image","Pin image on repin page","Pin image on repin page"),src:o,fit:"cover",naturalHeight:i,naturalWidth:r,color:t})})]}),Object(d.jsx)(c.f,{marginTop:8,marginBottom:8,paddingX:12,children:Object(d.jsx)(c.u,{align:"center",size:"md",children:a._("Keep your ideas organized by creating a board","boardPicker.edu.heading","board create education shown before user create their first board")})})]})}var j=i("7MwI"),g=i("mp1x"),m=i("Bb4+"),f=i("cr+I"),x=i.n(f),O=i("yv4w"),y=i("6adH"),_=i("ANjH"),S=i("DhV1"),v=i("QrFh"),w=i("58KG");function I(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class B extends n.PureComponent{constructor(...e){super(...e),I(this,"state",{name:""}),I(this,"onNextButtonTouch",()=>{const{name:e}=this.state,{createSectionAndRepin:t,i18n:i}=this.props;t(e,i)}),I(this,"onNameChange",e=>{this.setState({name:e.target.value})})}render(){const{pin:e,useRoundedCorners:t}=this.props,{name:i}=this.state;return Object(d.jsx)(O.a,{backButtonIcon:"arrow-back",name:i,onNameChange:this.onNameChange,onNextButtonTouch:this.onNextButtonTouch,selectedPinIds:[e.id],useRoundedCorners:t})}}var P=Object(_.compose)(y.b,Object(r.connect)(null,(e,{boardId:t,history:i,isEditingPin:n,onSuccess:r,pin:o,pinBoardId:s,pinSectionId:a,showToast:c,trackingParams:d})=>({createSectionAndRepin:(l,p)=>{const b=e=>c({text:e.message||p._("Sorry! Something went wrong on our end.","error creating board section","error creating board section"),isError:!0});e(Object(S.b)(t,[],l)).then(l=>{c({text:p._("Section added!")});const h=l.resource_response.data;e(Object(w.g)({i18n:p,pinId:o.id,boardId:t,onSuccess:n?void 0:r,onUndo:(t,i,n,r)=>Object(v.a)({dispatch:e,i18n:p,showToast:c,newPinId:i,sourcePinId:t,boardId:n,boardSectionId:r}),showToast:c,section:h,trackingParams:{clientTrackingParams:d,pinnedToBoardId:o.pinned_to_board?o.pinned_to_board.id:""}})).then(()=>{o&&s&&e(Object(w.c)(o.id,s,a)).then(()=>{var e;return o.pinned_to_board?i.replace(null!==(e=o.pinned_to_board.url)&&void 0!==e?e:""):void 0})}).catch(b)}).catch(b)}})))((function(e){const t=Object(s.c)();return Object(d.jsx)(B,{...e,i18n:t})})),T=i("yaGx");function C({handleSelected:e}){const t=Object(s.c)();return Object(d.jsx)(c.bb,{rounding:2,onTap:()=>{e(!1,null)},children:Object(d.jsxs)(c.f,{"data-test-id":"board-picker-row",display:"flex",alignItems:"center",rounding:2,column:12,marginBottom:4,children:[Object(d.jsx)(c.f,{color:"lightGray",display:"flex",flex:"none",justifyContent:"center",alignItems:"center",height:48,rounding:2,width:48,children:Object(d.jsx)(c.v,{accessibilityLabel:t._("Profile","save.ProfilePickerRow.IconAccessibilityLabel","Accessibility label for icon on option to save Pin to profile"),color:"darkGray",icon:"history",size:22})}),Object(d.jsx)(c.f,{display:"flex",direction:"column",justifyContent:"center",marginStart:2,width:"100%",overflow:"hidden",children:Object(d.jsx)(c.u,{size:"sm",truncate:!0,children:t._("Profile","save.ProfilePickerRow","Option to save Pin to profile")})})]})})}var k=i("HP5p"),E=i("9+B8");var A=Object(_.compose)(k.a,Object(r.connect)(null,(e,{history:t,pinDescription:i,pinBoardId:n,pin:r,pinSectionId:o,showRepinConfirmation:s,showToast:a,trackingParams:c,dismissFlyout:d})=>({repin:(i,n)=>(d(),e(Object(w.g)({i18n:n,pinId:r.id,boardId:i,onSuccess:t.goBack,onUndo:(t,i,o,s)=>Object(v.a)({dispatch:e,i18n:n,showToast:a,newPinId:i,sourcePinId:r.id,boardId:o,boardSectionId:s}),showRepinConfirmation:s,trackingParams:c}))),dispatchOneTapSave:t=>e(Object(E.b)({...t})),dispatchUnsavePin:()=>e(Object(w.c)(r.id,n||"",o))})))((function({boards:e,boardsShortlist:t,dispatchOneTapSave:i,dispatchUnsavePin:r,history:o,isEditingPin:a,isFromToast:l,onSelect:p,pin:b,repin:h,saveToProfileEnabled:u,showToast:j}){const g=Object(s.c)(),m=o.location.state&&o.location.state.isOneTapSave,f=async(e,t)=>{if(e&&t)p(t);else try{const e=await h(null==t?void 0:t.id,g);if(m&&e&&i({boardId:null==t?void 0:t.id,localPinId:e.id,pinId:b.id}),a)if(await r(),l)o.goBack();else if(b.pinned_to_board){var n;o.replace(null!==(n=b.pinned_to_board.url)&&void 0!==n?n:"")}}catch(s){j({isError:!0,text:s.message||g._("Sorry! Something went wrong on our end.","error during repin","error during repin")})}};let x=[];return x=t?e.filter(e=>t.some(t=>e.id===t.id)):e.slice(0,3),Object(d.jsxs)(n.Fragment,{children:[Object(d.jsxs)(c.f,{paddingY:4,children:[u&&Object(d.jsx)(C,{handleSelected:f}),x.map(e=>Object(d.jsx)(T.a,{boardId:e.id,onBoardSelected:t=>f(t,e),showSingleBoardRep:!0},e.id))]}),Object(d.jsxs)(c.f,{children:[Object(d.jsx)(c.f,{marginBottom:4,children:Object(d.jsx)(c.cb,{children:g._("All boards","RepinFlow.BoardPickerList.AllBoards","Board picker list all boards title")})}),e.map(e=>Object(d.jsx)(T.a,{boardId:e.id,onBoardSelected:t=>f(t,e),showSingleBoardRep:!0},e.id))]})]})})),R=i("kerF");var F=()=>Object(d.jsx)(R.a,{name:"mweb_repin_board_rep",children:({anyEnabled:e})=>Object(d.jsx)(c.f,{color:"lightGray",display:"inlineBlock",height:e?60:42,minWidth:e?60:42,overflow:"hidden",position:"relative",rounding:e?4:2,children:e?Object(d.jsxs)(n.Fragment,{children:[Object(d.jsx)(c.f,{color:"white",dangerouslySetInlineStyle:{__style:{left:"50%"}},height:"100%",position:"absolute",width:1}),Object(d.jsx)(c.f,{color:"white",dangerouslySetInlineStyle:{__style:{top:"50%"}},height:1,width:"50%",position:"absolute",right:!0})]}):null})}),N=i("bcHz"),D=i("go3G"),L=i("Gvmi"),U=i("fotn"),G=i("AGnR");var z=Object(_.compose)(k.a,Object(r.connect)(({pins:e,session:t,users:i},{pinId:n})=>({pin:e[n]}),(e,{pinId:t,trackingParams:{clientTrackingParams:i}})=>({createBoard:n=>e(Object(D.e)(n,"public",t,i))})))(({createBoard:e,isFirstBoard:t,history:i,onFirstBoardCreate:n,pin:r,pinId:o,pinViewParameter:a,showRepinConfirmation:l,titleSuggestions:p,trackingParams:{clientTrackingParams:b}})=>{const h=Object(s.c)(),u=(s,c,d)=>(({allSuggestions:e,handleCreateBoard:t,index:i,isFBC:n,pinViewParameter:r})=>{t(),Object(G.h)({aux_data:{board_title_list:JSON.stringify(e),is_fbc:n.toString(),selected_board_title_index:i},component:7,element:23,view_parameter:r,view_type:3})})({allSuggestions:d,handleCreateBoard:()=>{return t?n(c):void e(s=c).then(e=>(i.goBack(),e)).then(e=>{const{data:t}=e.resource_response,{url:i,id:n}=t,c=Object(L.getConfirmationToasts)(i,s,h);l(Object(U.a)({boardId:n,originalToasts:c})),Object(G.e)({event_type:5,view_type:3,component:7,view_parameter:a,object_id_str:o,clientTrackingParams:Object(j.a)(b,r),aux_data:{board_id:n,destination_board_id:n}})});var s},index:s,isFBC:t,pinViewParameter:a});return p?p.map((e,i,n)=>Object(d.jsx)(c.f,{children:Object(d.jsx)(R.a,{name:"mweb_repin_board_suggestions_with_buttons",children:({anyEnabled:r})=>r?Object(d.jsxs)(c.f,{alignItems:"center",display:"flex",paddingY:2,children:[!t&&Object(d.jsx)(F,{}),Object(d.jsx)(c.f,{flex:"grow",marginEnd:4,marginStart:t?0:4,children:Object(d.jsx)(c.u,{size:"sm",children:e})}),Object(d.jsx)(c.f,{display:"inlineBlock",flex:"none",children:Object(d.jsx)(c.g,{onClick:()=>u(i,e,n),size:"lg",text:h._("Create","repin.boardSuggestions.createButton","Button to create the suggested board")})})]}):Object(d.jsx)(N.a,{onTouch:()=>u(i,e,n),pressState:"none",rounding:2,children:Object(d.jsxs)(c.f,{display:"flex",alignItems:"center",paddingY:2,rounding:2,children:[Object(d.jsx)(F,{}),Object(d.jsx)(c.f,{column:10,marginStart:3,children:Object(d.jsx)(c.u,{size:"sm",children:e})})]})},i)})},i)):null}),W=i("SBn3"),H=i("uevr"),M=i("0HhX");function Y({allBoards:e,saveToProfileEnabled:t,boardsShortlist:i,dismissFlyout:r,history:o,isEditingPin:a,isFromToast:l,onSelect:p,pin:b,pinBoardId:h,pinDescription:u,pinSectionId:j,trackingParams:g}){const m=Object(s.c)();return Object(d.jsxs)(n.Fragment,{children:[Object(d.jsx)(c.f,{marginTop:2,children:Object(d.jsx)(c.cb,{children:m._("Top choices","boardPicker.header.topChoices","Header of a list of user's boards")})}),Object(d.jsx)(A,{boards:e,boardsShortlist:i,dismissFlyout:r,history:o,isEditingPin:a,isFromToast:l,onSelect:p,pin:b,pinBoardId:h,pinDescription:u,pinSectionId:j,saveToProfileEnabled:t,trackingParams:g})]})}function $({allBoards:e,boardsShortlist:t,saveToProfileEnabled:i,dismissFlyout:n,history:r,isEditingPin:o,isFirstRepinExperience:a,isFromToast:l,onFirstBoardCreate:p,onSelect:b,pin:h,pinBoardId:u,pinDescription:j,pinSectionId:g,trackingParams:m,titleSuggestions:f}){const x=Object(s.c)(),O=a||0===e.length&&!i,y=()=>Object(d.jsx)(z,{history:r,isFirstBoard:O,onFirstBoardCreate:p,pinId:h.id,pinViewParameter:Object(H.a)(h),titleSuggestions:f,trackingParams:m});return O?Object(d.jsxs)(c.f,{paddingX:1,children:[Object(d.jsx)(c.f,{marginBottom:4,children:Object(d.jsx)(c.cb,{children:x._("Tap to create your first board","CTA for board title suggestions","Explain to user that tapping on suggestion creates a board")})}),y()]}):Object(d.jsxs)(c.f,{marginBottom:4,children:[Object(d.jsx)(c.f,{marginBottom:4,children:Object(d.jsx)(c.cb,{children:x._("Top choices","boardPicker.header.topChoices","Header of a list of user's boards")})}),Object(d.jsx)(A,{boards:e,boardsShortlist:t,saveToProfileEnabled:i,dismissFlyout:n,history:r,onSelect:b,pinDescription:j,pin:h,trackingParams:m,isEditingPin:o,isFromToast:l,pinBoardId:u,pinSectionId:g}),f?Object(d.jsxs)(c.f,{children:[Object(d.jsx)(c.f,{paddingY:1,children:Object(d.jsx)(W.a,{children:Object(d.jsx)(c.p,{})})}),Object(d.jsx)(c.f,{paddingY:4,children:Object(d.jsx)(c.cb,{children:x._("Or tap to create a new board","boardPicker.suggestedBoardName.title","Title for repin page suggested board name section")})}),y()]}):Object(d.jsx)(c.f,{paddingY:6,children:Object(d.jsx)(c.U,{accessibilityLabel:x._("Loading repin page content"),show:!0})})]})}function q(e){const t=Object(s.c)(),{allBoards:i,boardsShortlist:n,saveToProfileEnabled:o,dismissFlyout:a,history:l,isEditingPin:p,isFetchingBoards:b,isFirstRepinExperience:h,isFromToast:u,onFirstBoardCreate:j,onSelect:g,location:m,pin:f,pinBoardId:x,pinDescription:O,pinSectionId:y}=e,_={clientTrackingParams:m.state?m.state.trackingParams:"",pinnedToBoardId:f.pinned_to_board?f.pinned_to_board.id:""},S=(v=f.id,Object(M.b)({name:"BoardTitleSuggestionsResource",options:{pin_id:v}}),Object(r.useSelector)(({pins:e})=>e[v]?e[v].boardTitleSuggestions:[]));var v;return i.length>0||!b?i.length>=10?Object(d.jsx)(Y,{allBoards:i,boardsShortlist:n,dismissFlyout:a,history:l,isEditingPin:p,isFromToast:u,onSelect:g,pin:f,pinBoardId:x,pinDescription:O,pinSectionId:y,saveToProfileEnabled:o,trackingParams:_}):Object(d.jsx)($,{allBoards:i,boardsShortlist:n,dismissFlyout:a,history:l,isEditingPin:p,isFirstRepinExperience:h,isFromToast:u,onFirstBoardCreate:j,onSelect:g,pin:f,pinBoardId:x,pinDescription:O,pinSectionId:y,saveToProfileEnabled:o,titleSuggestions:S,trackingParams:_}):Object(d.jsx)(c.f,{paddingY:2,children:Object(d.jsx)(c.U,{accessibilityLabel:t._("Loading repin page content"),show:!0})})}var K=i("Lr1Z"),X=i("r8+8");function Q({isEditingPin:e,isFirstBoardCreateActive:t,pin:i,pinBoardId:n,pinDescription:r,pinSectionId:o,trackingParams:a,onTouch:l,useIconWithBackground:p}){const b=Object(s.c)();return Object(d.jsx)(X.b,{height:p?void 0:70,hasTopShadow:p,children:Object(d.jsx)(K.a,{to:{pathname:`/board/create/${i.id}/`,state:{isFirstBoardCreateActive:t,pinnedToBoardId:i.pinned_to_board?i.pinned_to_board.id:"",pinDescription:r,trackingParams:a,isEditingPin:e,pinBoardId:n,pinSectionId:o}},onTouch:l,pressState:"background",children:Object(d.jsxs)(c.f,{display:"flex",alignItems:"center",paddingY:p?0:1,paddingX:p?1:0,children:[p?Object(d.jsx)(c.f,{color:"lightGray",rounding:2,dangerouslySetInlineStyle:{__style:{padding:"14px"}},children:Object(d.jsx)(c.v,{icon:"add",color:"darkGray",size:20,accessibilityLabel:b._("Create board button")})}):Object(d.jsx)(c.v,{icon:"add-circle",color:"red",size:38,accessibilityLabel:b._("Create board button")}),Object(d.jsx)(c.f,{marginStart:p?2:3,children:Object(d.jsx)(c.cb,{weight:"bold",children:b._("Create board","Create new board to Pin to","Create new board to Pin to")})})]})})})}var V=i("DLcE");var Z=Object(_.compose)(y.b,Object(r.connect)(null,(e,{boardId:t,onSuccess:i,pin:n,location:{search:r},showToast:o,trackingParams:s,dismissFlyout:a})=>({repin:(c,d)=>{a();const l=Object(j.a)(s,n),{isEditingPin:p}=x.a.parse(r);e(Object(w.g)({i18n:d,pinId:n.id,boardId:t,onSuccess:p?void 0:i,onUndo:(t,i,n,r)=>Object(v.a)({dispatch:e,i18n:d,showToast:o,newPinId:i,sourcePinId:t,boardId:n,boardSectionId:r}),showToast:o,section:c,trackingParams:{clientTrackingParams:l,pinnedToBoardId:n.pinned_to_board?n.pinned_to_board.id:""}})).then(()=>{var t;c&&e(Object(S.g)(null!==(t=c.id)&&void 0!==t?t:""))})},unsaveFromSection:()=>{const{pinBoardId:t,pinSectionId:i}=x.a.parse(r);return e(Object(w.c)(n.id,t,i))}})))((function({boardId:e,history:t,location:{search:i},repin:n,showSectionRep:r,unsaveFromSection:o,pin:a}){const c=Object(s.c)(),{isEditingPin:l}=x.a.parse(i);return Object(d.jsx)(V.a,{boardId:e,repin:async(e,i)=>{var r;(await n(i,c),l)&&(await o(),null!==(r=a.pinned_to_board)&&void 0!==r&&r.url&&t.replace(a.pinned_to_board.url))},showSectionRep:r})})),J=i("HMf0"),ee=i("EQY6"),te=i("OadL"),ie=i("qpbZ");const ne=(e,t)=>!(!e||!e.placement_id||e.experience_id!==t);var re=i("44UH"),oe=i("QAzJ");function se(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const ae=["#0074e8","#0FA573","#B469EB","#F13535","#E2780D"],ce=(e,t)=>Math.random()*((e||1)-(t||0))+(t||0),de=e=>e*(Math.PI/180);class le extends n.PureComponent{constructor(...e){super(...e),se(this,"animationTimer",null),se(this,"canvasRemovalTimer",null),se(this,"childrenContainerRef",Object(n.createRef)()),se(this,"containerRef",Object(n.createRef)()),se(this,"buildCanvas",()=>{if(!this.containerRef.current)return null;const e=window.innerWidth,{height:t,top:i}=this.containerRef.current.getBoundingClientRect(),n=document.createElement("canvas");return n.style.position="absolute",n.style.left="0px",n.style.top=i-(e-t)/2+"px",n.style.pointerEvents="none",n.style.width=e+"px",n.style.height=e+"px",n.width=e,n.height=e,n}),se(this,"explode",()=>{const e=this.buildCanvas();if(!e)return;const t=this.containerRef.current,i=this.childrenContainerRef.current,n=e.getContext("2d");null==t||t.insertBefore(e,i);const r=Array.from(Array(120)).map(()=>({x:e.width/2,y:e.height/2,radius:Math.round(ce(10,30)),color:ae[Math.floor(Math.random()*ae.length)],degree:Number(ce(0,360).toFixed(1)),speed:Math.round(ce(0,25)),friction:.9,opacity:Number(ce(0,.5).toFixed(1)),yVel:0,gravity:.04})),o=(e,t,i,n)=>{window.requestAnimationFrame(()=>o(e,t,i,n)),t.clearRect(0,0,i,n),e.forEach((e,i)=>{e.x+=e.speed*Math.cos(de(e.degree)),e.y+=e.speed*Math.sin(de(e.degree)),e.opacity-=.01,e.speed*=e.friction,e.radius*=e.friction,e.yVel+=e.gravity,e.y+=e.yVel,e.opacity<0||e.radius<0||(t.beginPath(),t.globalAlpha=e.opacity,t.fillStyle=e.color,t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.fill())})};o(r,n,e.width,e.height),this.canvasRemovalTimer=setTimeout(()=>{null==t||t.removeChild(e)},(this.props.delay||0)+1e3)})}componentDidUpdate(e){const{delay:t,startAnimation:i}=this.props,{startAnimation:n}=e;i&&n!==i&&(this.animationTimer=setTimeout(this.explode,t))}componentWillUnmount(){this.animationTimer&&clearTimeout(this.animationTimer),this.canvasRemovalTimer&&clearTimeout(this.canvasRemovalTimer)}render(){return Object(d.jsx)(c.f,{ref:this.containerRef,children:Object(d.jsx)(c.f,{ref:this.childrenContainerRef,children:this.props.children})})}}se(le,"defaultProps",{delay:0});var pe=le;function be(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const he=(e,t,i)=>{var n,r;const o=[],s=null===(n=t.current)||void 0===n?void 0:n.getBoundingClientRect(),a=null===(r=i.current)||void 0===r?void 0:r.getBoundingClientRect();if(s&&a){const e={x:a.left-s.left,y:a.top-s.top},t={x:a.width/s.width,y:a.height/s.height};o.push(`translate(${e.x}px, ${e.y}px)`),o.push(`scale(${t.x}, ${t.y})`)}return{WebkitTransformOrigin:"left top",transformOrigin:"left top",WebkitTransform:e?o.join(" "):"none",transform:e?o.join(" "):"none",WebkitTransition:"all .5s ease-in-out",transition:"all .5s ease-in-out",borderRadius:e?"8px 0px 0px 0px":"8px",overflow:"hidden",marginBottom:24}},ue=e=>({pointerEvents:"none",opacity:e?1:0,WebkitTransition:"opacity .4s ease-in-out",transition:"opacity .4s ease-in-out",zIndex:2}),je=e=>({opacity:e?1:0,WebkitTransform:e?"translateY(0)":"translateY(20%)",transform:e?"translateY(0)":"translateY(20%)",WebkitTransition:"all .25s ease-in-out .5s",transition:"all .25s ease-in-out .5s",textAlign:"center",marginTop:"50px"});class ge extends n.PureComponent{constructor(...e){super(...e),be(this,"state",{startAnimation:!1}),be(this,"dismissTimer",null),be(this,"pinRef",Object(n.createRef)()),be(this,"pinDestinationRef",Object(n.createRef)()),be(this,"handleAnimationAndCompletion",()=>{const{onComplete:e,savePin:t,selectedBoardName:i}=this.props;if(!i)return;const n=this.startAnimation(),r=t(i);Promise.all([n,r]).then(t=>{const[,n]=t;e(n,i)}).catch(e=>{n.then(()=>{e&&e.onError&&e.onError()})})}),be(this,"startAnimation",()=>new Promise(e=>{this.setState({startAnimation:!0},()=>{this.dismissTimer=setTimeout(()=>{e()},2600)})}))}componentWillUnmount(){this.dismissTimer&&clearTimeout(this.dismissTimer)}componentDidUpdate(){const{selectedBoardName:e}=this.props,{startAnimation:t}=this.state;e&&!t&&this.handleAnimationAndCompletion()}render(){const{pinDominantColor:e,pinImageUrl:t,selectedBoardName:i}=this.props,{startAnimation:r}=this.state;return Object(d.jsxs)(n.Fragment,{children:[Object(d.jsx)(c.W,{top:X.a,zIndex:new c.s(3),children:Object(d.jsx)(c.f,{display:"flex",color:r?"transparent":"white",justifyContent:"center",alignItems:"center",children:Object(d.jsx)(c.f,{ref:this.pinRef,height:84,width:84,position:"relative",dangerouslySetInlineStyle:{__style:he(r,this.pinRef,this.pinDestinationRef)},children:Object(d.jsx)(c.x,{alt:this.props.i18n._("Pin image","Pin image on repin page","Pin image on repin page"),src:t,fit:"cover",naturalHeight:84,naturalWidth:84,color:e})})})}),Object(d.jsx)(c.f,{color:"white",position:"fixed",top:!0,bottom:!0,right:!0,left:!0,dangerouslySetInlineStyle:{__style:ue(r)},children:Object(d.jsxs)(c.f,{display:"flex",justifyContent:"center",alignItems:"center",direction:"column",height:"100%",children:[Object(d.jsx)(pe,{delay:1200,startAnimation:r,children:Object(d.jsx)(c.C,{rounding:2,width:148,children:Object(d.jsx)(c.f,{display:"flex",wrap:!0,children:Array.from(Array(4)).map((e,t)=>{const i=t<=1,n=t%2,r=0===t?this.pinDestinationRef:null;return Object(d.jsx)(c.f,{ref:r,color:0===t?"transparent":"lightGray",marginBottom:i?1:0,marginEnd:n?0:1,width:72,height:72},t)})})})}),Object(d.jsx)(c.f,{paddingX:4,dangerouslySetInlineStyle:{__style:je(r)},children:Object(d.jsx)(c.u,{children:Object(ie.b)(this.props.i18n._("You saved your first Pin to {{ selectedBoardName }}!","First repin confirmation message","First repin confirmation message"),{selectedBoardName:i})})})]})})]})}}var me=function(e){const t=Object(s.c)();return Object(d.jsx)(ge,{...e,i18n:t})},fe=i("4kAQ"),xe=i("BGsa"),Oe=i("EC67");function ye(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const _e=Object(r.connect)(({session:e})=>({paddingBottom:72+(Object(xe.d)(e.userAgentPlatform)?xe.a:0)}))(({children:e,paddingBottom:t})=>Object(d.jsx)(c.f,{dangerouslySetInlineStyle:{__style:{paddingBottom:t}},children:e}));class Se extends n.PureComponent{constructor(...e){super(...e),ye(this,"state",{dupeWarningDismissed:!1,pinDescription:(this.props.pin.description||"").trim(),saved:!1,suggestedBoardName:void 0,trackingParams:(this.props.location.state||{}).trackingParams||"",warningAnchor:void 0}),ye(this,"saved",()=>this.setState({saved:!0})),ye(this,"handleBackButtonTouch",()=>{const{match:{params:{boardId:e}}}=this.props,t=e?34:75;Object(G.h)({view_type:21,view_parameter:87,component:7,element:t})}),ye(this,"handleDismissWarningFlyout",()=>this.setState({dupeWarningDismissed:!0})),ye(this,"handleFirstBoardCreateOnSuccess",(e,t)=>{const{closeupExperience:i,completeExperience:n,history:r,i18n:o,repinExperience:s,showRepinConfirmation:a}=this.props,{boardId:c,boardUrl:d}=e,l=Object(L.getConfirmationToasts)(d,t,o);r.goBack(),a(Object(U.a)({boardId:c,isFBC:!0,originalToasts:l})),i&&i.placement_id&&500742===i.experience_id&&n(i.placement_id,i.experience_id),s&&ne(s,501032)&&n(s.placement_id,s.experience_id)}),ye(this,"handleSetSelectedBoard",e=>{const{history:t,pin:i}=this.props,{trackingParams:n}=this.state;this.isFirstBoardCreateActive()||t.push(`/board/create/${i.id}/${e}/`,{trackingParams:n}),this.setState({suggestedBoardName:e})}),ye(this,"handleFirstBoardCreate",e=>{const{createBoard:t,history:i,pin:n,showToast:r}=this.props,{trackingParams:o}=this.state;return t(e).then(e=>{const t=e.resource_response.data.id;Object(G.e)({event_type:5,view_type:3,component:7,view_parameter:Object(H.a)(n),object_id_str:n.id,clientTrackingParams:Object(j.a)(o,n),aux_data:{board_id:t,destination_board_id:t}});const{data:i}=e.resource_response,{url:r}=i;return{boardId:t,boardUrl:r}},e=>{throw{onError:()=>{i.goBack(),r({text:e.message||this.props.i18n._("Sorry! Something went wrong on our end.","error creating board","error creating board"),isError:!0})}}})}),ye(this,"handleSelectBoard",e=>{const{history:t,pin:i,location:{search:n}}=this.props,{isEditingPin:r,pinBoardId:o,pinSectionId:s}=x.a.parse(n);r?t.push(`/pin/${i.id}/repin/${e.id}/?isEditingPin=true&pinBoardId=${o}&pinSectionId=${s}`):t.push({pathname:`/pin/${i.id}/repin/${e.id}/`})}),ye(this,"handleClickAddSectionButton",()=>{const{pin:e,history:t,match:{params:{boardId:i}},location:{search:n}}=this.props;if(!i)return;const{isEditingPin:r,pinBoardId:o,pinSectionId:s}=x.a.parse(n);r?t.push(`/pin/${e.id}/repin/${i}/add/?isEditingPin=true&pinBoardId=${o}&pinSectionId=${s}`):t.push({pathname:`/pin/${e.id}/repin/${i}/add/`})}),ye(this,"handleRepinToExistingSectionSuccess",()=>this.props.history.go(-2)),ye(this,"handleRepinToNewSectionSuccess",()=>this.props.history.go(-3)),ye(this,"handleRepinCreateBoardButtonTouch",()=>{Object(G.h)({view_type:21,view_parameter:87,component:7,element:249})}),ye(this,"renderCreateScreen",()=>{const{pin:e,history:t,location:{search:i},match:{params:{boardId:n}}}=this.props,{pinDescription:r,trackingParams:o}=this.state,{isEditingPin:s,pinBoardId:a,pinSectionId:c}=x.a.parse(i);return!!n&&Object(d.jsx)(P,{boardId:n,history:t,isEditingPin:s,pinBoardId:a,pinSectionId:c,onSuccess:this.handleRepinToNewSectionSuccess,pin:e,pinDescription:r.trim(),trackingParams:o,useRoundedCorners:!0})}),ye(this,"isFirstBoardCreateActive",()=>{const{allBoards:e,isFetchingBoards:t,saveToProfileEnabled:i,repinExperience:n}=this.props;return!!ne(n,501032)||!t&&0===e.length&&!i}),ye(this,"isBoardCreateEduActive",()=>{const{repinExperience:e}=this.props;return ne(e,501021)}),ye(this,"completeBoardCreateEduExperience",()=>{const{completeExperience:e,repinExperience:t}=this.props;t&&this.isBoardCreateEduActive()&&e(t.placement_id,t.experience_id)}),ye(this,"renderPicker",()=>{const{allBoards:e,saveToProfileEnabled:t,boardsShortlist:i,history:n,isFetchingBoards:r,location:s,pin:a,match:{params:{boardId:l}},location:{search:p}}=this.props,{pinDescription:b,dupeWarningDismissed:h,saved:j,suggestedBoardName:g,trackingParams:f,warningAnchor:O}=this.state,y=b.trim(),_=a.pinned_to_board,S=_?Object(ie.b)(this.props.i18n._("Psst! You already saved this Pin to {{ board_name }}","Toast for already having repinned pin","Toast for already having repinned pin"),{board_name:_.name}).join(" "):null,{dominant_color:v}=a,w=a.images?a.images["236x"]:null,I=w?w.url:"",{isEditingPin:B,isFromToast:P,pinBoardId:T,pinSectionId:C}=x.a.parse(p),k=this.props.i18n._("Save Pin to","RepinPage.Section.Header.Title","title for section selection in repin flow"),E=new c.s(2),A=this.props.i18n._("Create board","Title for first board create",'Title for first board create. NOTE: we are testing using "collections" in place of "boards" for new users'),R=this.props.i18n._("Save to board","boardPicker.header","Title for repin page"),F=l?k:0!==e.length||r||t?R:A;return Object(d.jsxs)(m.b,{hasFixedHeader:!0,children:[Object(d.jsx)(X.c,{useRoundedCorners:!0,zIndex:E,children:Object(d.jsxs)(c.f,{display:"flex",alignItems:"center",height:40,children:[Object(d.jsx)(c.f,{column:2,children:Object(d.jsx)(o.a,{color:"darkGray",icon:l?"arrow-back":"cancel",onTouch:this.handleBackButtonTouch,alignIconLeft:!0,size:"sm"})}),Object(d.jsx)(c.f,{column:8,children:Object(d.jsx)(c.cb,{align:"center",weight:"bold",children:F})}),Object(d.jsx)(c.f,{column:2})]})}),a.images&&(this.isFirstBoardCreateActive()?Object(d.jsx)(me,{onComplete:this.handleFirstBoardCreateOnSuccess,pinDominantColor:null!=v?v:"",pinImageUrl:I,savePin:this.handleFirstBoardCreate,selectedBoardName:g}):null),Object(d.jsx)(_e,{children:l?Object(d.jsx)(Z,{boardId:l,onSuccess:this.handleRepinToExistingSectionSuccess,pin:a,pinDescription:y,trackingParams:f,dismissFlyout:this.saved,showSectionRep:!0,history:n,location:s}):Object(d.jsx)(q,{allBoards:e,boardsShortlist:i,saveToProfileEnabled:t,history:n,isFetchingBoards:r,isFirstRepinExperience:this.isFirstBoardCreateActive(),isFromToast:P,location:s,onFirstBoardCreate:this.handleSetSelectedBoard,onSelect:this.handleSelectBoard,pin:a,pinDescription:y,dismissFlyout:this.saved,isEditingPin:B,pinBoardId:T,pinSectionId:C})}),l?Object(d.jsx)(ee.a,{onAddNewSection:this.handleClickAddSectionButton,useIconWithBackground:!0}):Object(d.jsx)(Q,{history:n,isFirstBoardCreateActive:this.isFirstBoardCreateActive(),pin:a,pinDescription:y,trackingParams:f,onTouch:this.handleRepinCreateBoardButtonTouch,useIconWithBackground:!0,isEditingPin:B,pinBoardId:T,pinSectionId:C}),w&&this.isBoardCreateEduActive()&&Object(d.jsx)(u,{completeExperience:this.completeBoardCreateEduExperience,pinDominantColor:null!=v?v:"",pinImageHeight:w.height,pinImageWidth:w.width,pinImageUrl:I}),O&&!j&&a.pinned_to_board&&!h&&S&&Object(d.jsx)(c.L,{anchor:O,color:"red",idealDirection:"down",onDismiss:this.handleDismissWarningFlyout,shouldFocus:!1,children:Object(d.jsx)(c.f,{padding:3,children:Object(d.jsx)(c.cb,{color:"white",weight:"bold",children:Object(d.jsx)("span",{children:S})})})})]})})}componentDidMount(){const{repinExperience:e,triggerExperimentsForPlacement:t,viewExperience:i}=this.props;t(1000153),e&&i(1000153,e.experience_id)}render(){return Object(d.jsx)(g.a,{isOpen:!0,type:"repinPage",hasCustomHeight:!0,isLegoModal:!0,childPaddingX:2,childPaddingY:0,children:Object(d.jsxs)(Oe.e,{children:[Object(d.jsx)(Oe.c,{exact:!0,path:"/pin/:id/repin/",render:this.renderPicker}),Object(d.jsx)(Oe.c,{exact:!0,path:"/pin/:id/repin/:boardId/",render:this.renderPicker}),Object(d.jsx)(Oe.c,{exact:!0,path:"/pin/:id/repin/:boardId/add/",render:this.renderCreateScreen})]})})}}function ve(e){const{match:{params:{id:t}}}=e,i=Object(s.c)(),n=Object(r.useSelector)(e=>e.session.userId),o=Object(r.useSelector)(e=>e.users[n]),a=Object(oe.b)("mweb_boardless_pins"),c=o.has_quicksave_board&&a().anyEnabled,l=Object(oe.b)(re.a),p=o.has_quicksave_board&&l().anyEnabled,b=Object(J.a)(`/pin/${t}/`),h=(u=t,Object(M.b)({name:"PinResource",options:{id:u,field_set_key:"repin"}}),Object(r.useSelector)(({pins:e})=>e[u]));var u;const{fetching:j,allBoards:g,boardsShortlist:m}=(e=>{const t=Object(r.useSelector)(e=>e.session.userId),{fetching:i}=Object(M.b)({name:"BoardPickerBoardsResource",options:{pin_id:e,field_set_key:"profile_grid_item",shortlist_suggestions:3,user_id:t}});return{fetching:i,allBoards:Object(r.useSelector)(e=>Object(te.q)(e)||[]),boardsShortlist:Object(r.useSelector)(({pins:t})=>t[e]&&t[e].boards_shortlist||[])}})(t);return Object(M.a)({name:"UserResource",options:{user_id:n,field_set_key:"quicksave"}}),b||!!h&&Object(d.jsx)(Se,{...e,i18n:i,pin:h,allBoards:g,saveToProfileEnabled:c||p,boardsShortlist:m,isFetchingBoards:j})}t.default=Object(_.compose)(Oe.l,k.a,Object(r.connect)(({experiences:e,pins:t,session:i,users:n},{match:r})=>({closeupExperience:e[1000112],repinExperience:e[1000153]}),(e,{location:t,match:i})=>{const n=i.params.id,r=Object(j.a)((t.state||{}).trackingParams);return{completeExperience:(t,i)=>e(Object(fe.a)(t,i)),triggerExperimentsForPlacement:t=>e(Object(fe.l)(t)),viewExperience:(t,i)=>e(Object(fe.n)(t,i)),createBoard:t=>e(Object(D.e)(t,"public",n,r))}}))(ve)},DLcE:function(e,t,i){i.d(t,"a",(function(){return b}));var n=i("/MKj"),r=i("yaGx"),o=i("bcHz"),s=i("n6mq"),a=i("nKUr");function c({onSectionSelected:e,sectionId:t,showSectionRep:i}){var r;const c=Object(n.useSelector)(({boardsections:e})=>e[t]),d=Object(n.useSelector)(({pins:e})=>{var t;return c&&c.preview_pins&&(null===(t=e[c.preview_pins[0]])||void 0===t?void 0:t.image_medium_url)});return Object(a.jsx)(o.a,{rounding:2,onTouch:e,pressState:"none",children:Object(a.jsxs)(s.f,{"data-test-id":"sectionPickerRow",display:"flex",alignItems:"center",rounding:2,column:12,marginBottom:i?4:0,children:[i&&Object(a.jsx)(s.f,{height:48,width:51,children:Object(a.jsx)(s.C,{height:"100%",rounding:2,width:"100%",children:Object(a.jsx)(s.x,{alt:null!==(r=c.title)&&void 0!==r?r:"",color:"lightGray",fit:"cover",naturalHeight:1,naturalWidth:1,src:d||""})})}),!i&&Object(a.jsx)(s.f,{column:1,paddingY:2}),Object(a.jsx)(s.f,{column:11,display:"flex",flex:"grow",justifyContent:"between",paddingY:2,children:i?Object(a.jsx)(s.f,{overflow:"hidden",width:"100%",marginStart:2,children:Object(a.jsx)(s.u,{size:"sm",truncate:!0,children:c.title})}):Object(a.jsx)(s.f,{marginStart:2,children:Object(a.jsx)(s.cb,{weight:"bold",children:c.title})})})]})})}var d=i("yweb"),l=i("OadL"),p=i("0HhX");function b({boardId:e,sectionId:t,repin:i,hideBoardPickerRow:o,showSectionRep:b}){const h=Object(d.c)(),{fetching:u,boardSections:j,filteredBoardSections:g}=((e,t)=>{const{fetching:i}=Object(p.b)({name:"BoardSectionsRepinResource",options:{board_id:e}}),r=Object(n.useSelector)(t=>(Object(l.g)(t,{boardId:e})||[]).reduce((e,t)=>{if("boardsection"===t.type){const i={type:"boardsection",id:t.id};e.push(i)}return e},[])),o=Object(n.useSelector)(i=>r.map(e=>e.id).reduce((n,r)=>{const o=i.boardsections[null!=r?r:""];return r!==t&&o&&n.push({board:{id:e},id:o.id,title:o.title,type:"boardsection",slug:o.slug}),n},[]));return{fetching:i,boardSections:r,filteredBoardSections:o}})(e,t);return Object(a.jsxs)(s.f,{children:[j.length>0&&Object(a.jsxs)(s.f,{paddingY:b?0:3,children:[b&&Object(a.jsx)(s.f,{paddingY:2,children:Object(a.jsx)(s.f,{marginBottom:2,children:Object(a.jsx)(s.cb,{children:h._("Board","RepinFlow.SectionPickerList.Board","Section picker board title")})})}),!o&&Object(a.jsx)(r.a,{boardId:e,noArrowIcon:!0,onBoardSelected:()=>i(e,void 0,h),showSingleBoardRep:b},e),b&&Object(a.jsx)(s.f,{paddingY:4,children:Object(a.jsx)(s.cb,{children:h._("Section","RepinFlow.SectionPickerList.Section","Section picker all sections title")})}),g.map(t=>{var n;return Object(a.jsx)(c,{onSectionSelected:()=>{i(e,t,h)},sectionId:null!==(n=t.id)&&void 0!==n?n:"",showSectionRep:b},t.id)})]}),Object(a.jsx)(s.U,{accessibilityLabel:h._("Loading board section for repin flow"),show:u})]})}},EQY6:function(e,t,i){i.d(t,"a",(function(){return f}));var n=i("q1tI"),r=i("/MKj"),o=i("PaNI"),s=i("bcHz"),a=i("Bb4+"),c=i("JMvz"),d=i("DLcE"),l=i("6AqG"),p=i("6adH"),b=i("yweb"),h=i("n6mq"),u=i("ANjH"),j=i("r8+8"),g=i("DhV1"),m=i("nKUr");function f({onAddNewSection:e,useIconWithBackground:t}){const i=Object(b.c)();return Object(m.jsx)(j.b,{height:t?80:70,alignCenter:t,children:Object(m.jsx)(s.a,{onTouch:e,pressState:"none",children:Object(m.jsxs)(h.f,{display:"flex",alignItems:"center",padding:t?0:1,"data-test-id":"addSectionButton",children:[t?Object(m.jsx)(h.f,{color:"lightGray",rounding:2,dangerouslySetInlineStyle:{__style:{padding:"14px"}},children:Object(m.jsx)(h.v,{icon:"add",color:"darkGray",size:20,accessibilityLabel:i._("Create board button","RepinSection.CreateBoard.Button","accessibility label for create board button")})}):Object(m.jsx)(h.v,{icon:"add-circle",color:"red",size:38,accessibilityLabel:i._("Add section button")}),t?Object(m.jsx)(h.f,{marginStart:2,children:Object(m.jsx)(h.u,{size:"sm",children:i._("Add section","Add new section to Pin to","Add new section to Pin to")})}):Object(m.jsx)(h.f,{marginStart:3,children:Object(m.jsx)(h.cb,{weight:"bold",children:i._("Add section","Add new section to Pin to","Add new section to Pin to")})})]})})})}class x extends n.PureComponent{constructor(...e){var t,i,n;super(...e),n=e=>{e.section_count?this.props.onRepinToBoardWithSections(e):this.props.repinToOtherBoard(e.id,this.props.i18n)},(i="onRepinToBoard")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n}render(){const{boardId:e,boardSectionId:t,orginalBoardId:i,onAddNewSection:n,repin:r,hideBoardPickerRow:s,selectedPinIds:p,isCollaborative:b}=this.props,u=i===e;return Object(m.jsxs)(a.b,{hasFixedHeader:!0,children:[Object(m.jsxs)(j.c,{hasBorder:!0,height:130,children:[Object(m.jsxs)(h.f,{display:"flex",alignItems:"center",children:[Object(m.jsx)(h.f,{column:2,children:Object(m.jsx)(o.a,{})}),Object(m.jsx)(h.f,{column:8,children:Object(m.jsx)(h.cb,{align:"center",weight:"bold",children:this.props.i18n._("Choose section","title for section selection in repin flow","title for section selection in repin flow")})}),Object(m.jsx)(h.f,{column:2})]}),Object(m.jsx)(l.a,{selectedPinIds:p})]}),e&&Object(m.jsx)(d.a,{boardId:e,repin:r,hideBoardPickerRow:u&&s,sectionId:t}),u&&Object(m.jsxs)(h.f,{children:[!b&&Object(m.jsx)(c.a,{excludeBoardId:e,onRepinToBoard:this.onRepinToBoard}),Object(m.jsx)(f,{onAddNewSection:n})]})]})}}function O(e,t,i){return e?i._("Got it! Hang tight while we move all those Pins...","Toast message for bulk pins move.","Toast message for bulk pins move."):t?i._("Saved to section!"):i._("Saved to board!")}t.b=Object(u.compose)(p.b,Object(r.connect)(null,(e,{orginalBoardId:t,boardSectionId:i,onRefreshBoardSection:n,pinIds:r,inSelectAll:o,showToast:s,history:a})=>({repin:async(c,d,l)=>{const p=d&&d.id,b={boardId:t,sectionId:i},h={boardId:c,sectionId:p},u=o?Object(g.e)({source:b,target:h,excludePinIds:r}):Object(g.f)({source:b,target:h,pinIds:r});t!==c?(await e(u),a.go(-3)):(await e(u),n&&await n(),a.go(-2)),s({text:O(o,p,l)})},repinToOtherBoard:async(n,c)=>{const d={boardId:t,sectionId:i},l={boardId:n,sectionId:void 0};s({text:O(o,void 0,c)}),await e(o?Object(g.e)({source:d,target:l,excludePinIds:r}):Object(g.f)({source:d,target:l,pinIds:r})),a.go(-2)}})))((function(e){const t=Object(b.c)();return Object(m.jsx)(x,{...e,i18n:t})}))},Gvmi:function(e,t,i){i.r(t),i.d(t,"getConfirmationToasts",(function(){return P})),i.d(t,"CreateBoardPage",(function(){return C}));var n=i("q1tI"),r=i("/MKj"),o=i("PaNI"),s=i("8ifP"),a=i("7MwI"),c=i("Bb4+"),d=i("HMf0"),l=i("HP5p"),p=i("ANjH"),b=i("go3G"),h=i("r8+8"),u=i("qpbZ"),j=i("eyT9"),g=i("/brd"),m=i("AGnR"),f=i("QrFh"),x=i("fotn"),O=i("1xPy"),y=i("yweb"),_=i("58KG"),S=i("n6mq"),v=i("4kAQ"),w=i("EC67"),I=i("nKUr");function B(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const P=(e,t,i)=>{const n=i._("Saved to new board","Board saved message if the new board's name is not found","Board saved message if the new board's name is not found");return[{text:t?Object(u.b)(i._("Saved to {{ board }}","Board saved message","Board saved message"),{board:t}).join(" "):n,href:e}]},T=e=>({color:e?"#fff":"#333",fontSize:21,fontWeight:"bold",background:"none",outline:"none",border:"none",marginTop:"4px",width:"100%"});class C extends n.PureComponent{constructor(...e){var t;super(...e),t=this,B(this,"state",{boardName:this.props.match.params.boardName||"",canSubmit:!!this.props.match.params.boardName,errorBoardNames:[],secret:!1,submitting:!1}),B(this,"handleRepinSuccess",()=>this.props.history.go(-2)),B(this,"onSwitchToggle",()=>{this.setState({secret:!this.state.secret})}),B(this,"onInputChange",e=>{const t=e.target.value,i=t.trim().length,n=i>0&&i<=100&&!this.state.errorBoardNames.includes(t);this.setState({boardName:t,canSubmit:n})}),B(this,"onCreateClick",()=>{const{boardName:e,secret:i,submitting:r}=this.state,{createPin:o,createBoard:c,dispatchUnsavePin:d,history:l,i18n:p,location:b,match:h,pin:u,repinToBoard:j,showRepinConfirmation:g,showToast:f,undoSaveAction:O}=this.props;if(r)return;const y=i?"secret":"public",_=h.params.pinId,v=b.state?b.state.pinnedToBoardId:"",w=this.props.i18n._("Created Board!","Text in toast after creating a new board","Text in toast after creating a new board");if(_){const i=Object(a.a)((b.state||{}).trackingParams,u);this.setState({submitting:!0}),c({name:e,pin:u,privacy:y}).then((async function(n){const r=n.resource_response.data.url;t.setState({submitting:!1}),Object(m.e)({event_type:20,view_type:3,object_id_str:_});const o=n.resource_response.data.id,s=b.state&&b.state.pinDescription?b.state.pinDescription:"",a=P(r,e,p),{isFirstBoardCreateActive:c,isEditingPin:h,pinBoardId:y,pinSectionId:S}=b.state||{},w=()=>g(Object(x.a)({boardId:o,isFBC:c,originalToasts:a}));var I;(s?j({i18n:t.props.i18n,pinId:_,boardId:o,onSuccess:()=>{t.completeFirstExperiences()},onUndo:O,showRepinConfirmation:e=>f(e[0]),trackingParams:{clientTrackingParams:i,pinnedToBoardId:v}}).catch(e=>{f({isError:!0,text:e.message||t.props.i18n._("Sorry! Something went wrong on our end.","error completing repin","error completing repin")})}):(t.completeFirstExperiences(w),Object(m.e)({event_type:5,view_type:3,component:7,object_id_str:_,clientTrackingParams:i,aux_data:{board_id:v,destination_board_id:o}})),h&&u)&&(await d(u.id,y,S),null!==(I=u.pinned_to_board)&&void 0!==I&&I.url&&l.replace(u.pinned_to_board.url))}),t=>{f({text:t.message||this.props.i18n._("Sorry! Something went wrong on our end.","error creating board","error creating board"),isError:!0}),this.setState({errorBoardNames:this.state.errorBoardNames.concat(e),canSubmit:!1,submitting:!1})})}else this.setState({submitting:!0}),c({name:e,pin:u,privacy:y}).then(e=>{const t=e.resource_response.data,i=this.props.location.state;if(!i){this.setState({submitting:!1});const e={text:w};return f(Object(x.a)({boardId:t.id,originalToasts:[e]})[0]),void l.replace(t.url)}const{description:r,guid:a,method:c,url:d}=i,p=[];if("scraped"===i.method)i.imgData.forEach(e=>p.push(o({link:d,image_url:e,description:r,board_id:t.id,method:c,guid:a})));else{const{base64Image:e,imageUrl:n}=i;p.push(o({link:d,image_url:n,image_base64:e,description:r,board_id:t.id,method:c,guid:a}))}Promise.all(p).then(e=>{f({text:w}),f({text:Object(I.jsxs)(n.Fragment,{children:[Object(I.jsx)(S.cb,{children:this.props.i18n._("Saved to","Saved to {{ boardName }}","Saved to {{ boardName }}")}),Object(I.jsx)(S.cb,{weight:"bold",children:t.name})]}),thumbnail:Object(I.jsx)(S.f,{width:54,height:54,children:Object(I.jsx)(s.a,{boardId:t.id,type:"thumbnail"})})}),Object(m.e)({event_type:1,view_type:92,component:7,object_id_str:e[0].resource_response.data.id}),this.setState({submitting:!1}),l.replace(t.url)},()=>{f({text:this.props.i18n._("Sorry! Something went wrong on our end.","error during pin creation","error during pin creation")}),this.setState({submitting:!1})})},e=>{this.setState({submitting:!1}),f({text:e.message_detail||e.message||this.props.i18n._("Sorry! Something went wrong on our end.","error creating board","error creating board"),isError:!0})})}),B(this,"completeFirstExperiences",e=>{const{closeupExperience:t,repinExperience:i,completeExperience:n}=this.props;if(t||i){const r=[];t&&t.placement_id&&g.i.includes(t.experience_id)&&r.push(n(t.placement_id,t.experience_id)),i&&i.placement_id&&501032===i.experience_id&&r.push(n(i.placement_id,i.experience_id)),r.length>0&&Promise.all(r).then(()=>{this.handleRepinSuccess(),e&&e()})}else this.handleRepinSuccess(),e&&e()})}componentDidMount(){const{repinExperience:e,viewExperience:t}=this.props;e&&t(e.placement_id,e.experience_id)}render(){const{i18n:e}=this.props;return Object(I.jsxs)(c.b,{hasFixedHeader:!0,children:[Object(I.jsx)(h.c,{children:Object(I.jsxs)(S.f,{display:"flex",alignItems:"center",children:[Object(I.jsx)(S.f,{flex:"none",marginStart:-2,children:Object(I.jsx)(o.a,{})}),Object(I.jsx)(S.f,{display:"flex",flex:"grow",justifyContent:"center",children:Object(I.jsx)(S.cb,{align:"center",weight:"bold",children:this.props.i18n._("Create board","Label during board creation","Label during board creation")})}),Object(I.jsx)(S.f,{display:"flex",flex:"none",justifyContent:"end",children:Object(I.jsx)(S.f,{children:Object(I.jsx)(S.g,{onClick:this.onCreateClick,color:"red",size:"sm",text:this.props.i18n._("Create","Create board button","Create board button"),disabled:!this.state.canSubmit||this.state.submitting})})})]})}),Object(I.jsx)(S.p,{}),Object(I.jsxs)(S.f,{paddingY:3,paddingX:4,children:[Object(I.jsx)(S.y,{htmlFor:"boardNameInput",children:Object(I.jsx)(S.cb,{size:"md",children:this.props.i18n._("Board name","Label during board creation","Label during board creation")})}),Object(I.jsx)("input",{id:"boardNameInput",placeholder:e._("Add"),value:this.state.boardName,style:T(Object(j.e)()),onChange:this.onInputChange})]}),Object(I.jsx)(S.p,{}),Object(I.jsxs)(S.f,{display:"flex",justifyContent:"between",paddingY:3,paddingX:4,children:[Object(I.jsx)(S.cb,{children:this.props.i18n._("Keep board secret","Toggle during board creation","Toggle during board creation")}),Object(I.jsx)(S.X,{id:"secretToggle",switched:this.state.secret,onChange:this.onSwitchToggle})]})]})}}t.default=Object(p.compose)(l.a,w.l,Object(r.connect)(({experiences:e,pins:t,session:i,users:n},{match:r})=>({closeupExperience:e[1000112],pin:r.params.pinId?t[r.params.pinId]:void 0,repinExperience:e[1000153]}),(e,{location:t,match:i,showToast:n})=>({completeExperience:(t,i)=>e(Object(v.a)(t,i)),viewExperience:(t,i)=>e(Object(v.n)(t,i)),createPin:t=>e(Object(_.b)(t)),createBoard:({name:n,pin:r,privacy:o})=>{const s=i.params.pinId,c=t.state&&t.state.pinDescription?t.state.pinDescription:"";if(s&&!c){const i=Object(a.a)((t.state||{}).trackingParams,r);return e(Object(b.e)(n,o,s,i))}return e(Object(b.e)(n,o))},undoSaveAction:(t,i,r,o,s)=>Object(f.a)({dispatch:e,i18n:s,showToast:n,newPinId:i,sourcePinId:t,boardId:r,boardSectionId:o}),repinToBoard:({i18n:t,pinId:i,boardId:n,onSuccess:r,onUndo:o,showRepinConfirmation:s,showToast:a,section:c,trackingParams:d})=>e(Object(_.g)({i18n:t,pinId:i,boardId:n,onSuccess:r,onUndo:o,showRepinConfirmation:s,showToast:a,section:c,trackingParams:d})),dispatchUnsavePin:(t,i,n)=>e(Object(_.c)(t,i||"",n))})))((function(e){const t=Object(O.b)(),i=Object(y.c)(),n=Object(d.a)("/");return e.match.params.pinId&&t?Object(I.jsx)(w.b,{to:"/"}):n||Object(I.jsx)(C,{...e,i18n:i})}))},JMvz:function(e,t,i){i.d(t,"a",(function(){return l}));var n=i("/MKj"),r=i("yaGx"),o=i("yweb"),s=i("OadL"),a=i("0HhX"),c=i("n6mq"),d=i("nKUr");function l({excludeBoardId:e,onRepinToBoard:t}){const i=Object(o.c)(),l=(()=>{const{userId:e}=Object(n.useSelector)(e=>e.session);return Object(a.b)({name:"BoardPickerBoardsResource",options:{field_set_key:"board_picker",user_id:e}}),Object(n.useSelector)(e=>Object(s.q)(e)||[])})();return Object(d.jsxs)(c.f,{children:[Object(d.jsx)(c.f,{marginTop:3,children:Object(d.jsx)(c.cb,{children:i._("All boards","title for board picker all boards section","title for board picker all boards section")})}),Object(d.jsx)(c.f,{paddingY:3,children:l.filter(t=>t.id!==e).map(e=>Object(d.jsx)(r.a,{boardId:e.id,onBoardSelected:()=>t(e)},e.id))})]})}},QrFh:function(e,t,i){i.d(t,"a",(function(){return r}));var n=i("58KG");const r=({dispatch:e,i18n:t,showToast:i,newPinId:r,sourcePinId:o,boardId:s,boardSectionId:a,onSuccess:c})=>e(Object(n.c)(r,s,a)).then(()=>{e(Object(n.j)(o,s,a)),i({text:t._("Pin deleted!","Utils.Unsave.Success","User deleted their pin")}),c&&c()}).catch(()=>{i({isError:!0,text:t._("Sorry! There was an error deleting your Pin.","Utils.Unsave.Error","Error when user tried to delete pin")})})},ZFOp:function(e,t,i){e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}},"cr+I":function(e,t,i){var n=i("ZFOp"),r=i("MgzW");function o(e,t){return t.encode?t.strict?n(e):encodeURIComponent(e):e}function s(e){return Array.isArray(e)?e.sort():"object"==typeof e?s(Object.keys(e)).sort((function(e,t){return Number(e)-Number(t)})).map((function(t){return e[t]})):e}t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e,t){var i=function(e){var t;switch(e.arrayFormat){case"index":return function(e,i,n){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===n[e]&&(n[e]={}),n[e][t[1]]=i):n[e]=i};case"bracket":return function(e,i,n){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==n[e]?n[e]=[].concat(n[e],i):n[e]=[i]:n[e]=i};default:return function(e,t,i){void 0!==i[e]?i[e]=[].concat(i[e],t):i[e]=t}}}(t=r({arrayFormat:"none"},t)),n=Object.create(null);return"string"!=typeof e?n:(e=e.trim().replace(/^(\?|#|&)/,""))?(e.split("&").forEach((function(e){var t=e.replace(/\+/g," ").split("="),r=t.shift(),o=t.length>0?t.join("="):void 0;o=void 0===o?null:decodeURIComponent(o),i(decodeURIComponent(r),o,n)})),Object.keys(n).sort().reduce((function(e,t){var i=n[t];return Boolean(i)&&"object"==typeof i&&!Array.isArray(i)?e[t]=s(i):e[t]=i,e}),Object.create(null))):n},t.stringify=function(e,t){var i=function(e){switch(e.arrayFormat){case"index":return function(t,i,n){return null===i?[o(t,e),"[",n,"]"].join(""):[o(t,e),"[",o(n,e),"]=",o(i,e)].join("")};case"bracket":return function(t,i){return null===i?o(t,e):[o(t,e),"[]=",o(i,e)].join("")};default:return function(t,i){return null===i?o(t,e):[o(t,e),"=",o(i,e)].join("")}}}(t=r({encode:!0,strict:!0,arrayFormat:"none"},t));return e?Object.keys(e).sort().map((function(n){var r=e[n];if(void 0===r)return"";if(null===r)return o(n,t);if(Array.isArray(r)){var s=[];return r.slice().forEach((function(e){void 0!==e&&s.push(i(n,e,s.length))})),s.join("&")}return o(n,t)+"="+o(r,t)})).filter((function(e){return e.length>0})).join("&"):""}},dKiF:function(e,t,i){i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return o})),i.d(t,"d",(function(){return s})),i.d(t,"c",(function(){return a}));const n=(e,t)=>e.length===t.length&&e.every((e,i)=>function(e,t){if("object"==typeof e&&"object"==typeof t){const i=Object.keys(e),n=Object.keys(t);return i.length===n.length&&i.every(i=>e[i]===t[i])}return e===t}(e,t[i])),r=(e,t)=>e.length===t.length&&e.every((e,i)=>e===t[i]),o=(e,t=r)=>i=>{const n=[];return function(...r){const o=this,s=n.find(e=>e.context===o&&t(e.args,r));if(s)return s.result;const a={context:o,args:r,result:i.apply(this,r)};return n.push(a),e&&n.length>e&&n.shift(),a.result}},s=o(1),a=o()},yaGx:function(e,t,i){var n=i("q1tI"),r=i("/MKj"),o=i("8ifP"),s=i("bcHz"),a=i("yweb"),c=i("5xeR"),d=i("qpbZ"),l=i("n6mq"),p=i("nKUr");t.a=Object(r.connect)((e,t)=>({board:e.boards[t.boardId]}))((function({board:e,onBoardSelected:t,noArrowIcon:i,showSingleBoardRep:b}){const h=Object(a.c)(),u=Object(r.useSelector)(({users:e})=>e),j=(e.collaborating_users||[]).map(e=>{var t,i;return{name:null!==(t=u[e].username)&&void 0!==t?t:"",src:"https://s.pinimg.com/images/user/default_75.png"===u[e].image_medium_url?"":null!==(i=u[e].image_medium_url)&&void 0!==i?i:""}});let g="";const m=j.slice(0,3).map(e=>e.name);switch(j.length){case 3:g=Object(d.c)(""+h._("{{ first }}, {{ second }}, and {{ last }}","CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.ThreeAvatars","List of three usernames"),{first:""+m[0],second:""+m[1],last:""+m[2]});break;case 2:g=Object(d.c)(""+h._("{{ first }} and {{ second }}","CollaboratorsFacePile.AvatarGroup.accessibilityLabel.usernames.TwoAvatars","List of two usernames."),{first:""+m[0],second:""+m[1]});break;default:g=m.join(", ")}const f=j.length>3?Object(d.c)(h.ngettext("Collaborators: {{ userNames }} and {{ leftCount }} more.","Collaborators: {{ userNames }} and {{ leftCount }} more.",j.length-3,"CollaboratorsFacePile.AvatarGroup.accessibilityLabel.aboveThree","Accessibility label that lists the names of collaborators and a final count of non-displayed avatars"),{userNames:g,leftCount:""+(j.length-3)}):Object(d.c)(""+h._("Collaborators: {{ userNames }}.","CollaboratorsFacePile.AvatarGroup.accessibilityLabel.notAboveThree","Accessibility label that lists the names of collaborators"),{userNames:g}),x=new l.s(0),O=Object(p.jsx)(n.Fragment,{children:Object(p.jsxs)(l.f,{"data-test-id":"board-picker-row",display:"flex",alignItems:"center",rounding:2,column:12,marginBottom:b?4:0,children:[Object(p.jsx)(l.f,{paddingY:b?0:2,children:b?Object(p.jsx)(l.f,{height:48,overflow:"hidden",width:48,children:Object(p.jsx)(l.C,{height:"100%",rounding:2,width:"100%",children:Object(p.jsx)(l.x,{alt:"",color:"lightGray",fit:"cover",naturalHeight:1,naturalWidth:1,src:e.image_cover_url||""})})}):Object(p.jsx)(l.f,{height:60,overflow:"hidden",rounding:4,width:60,children:Object(p.jsx)(o.a,{boardId:e.id,type:"thumbnail",fullSize:!0})})}),Object(p.jsxs)(l.f,{display:"flex",justifyContent:"between",alignItems:"center",flex:"grow",children:[Object(p.jsx)(l.f,{direction:"column",display:"flex",justifyContent:"center",marginStart:b?2:4,width:"100%",overflow:b?"hidden":"auto",children:Object(p.jsx)(l.u,{size:"sm",truncate:b,children:e.name})}),Object(p.jsxs)(l.f,{display:"flex",alignItems:b?"center":"start",children:["secret"===e.privacy&&Object(p.jsx)(l.f,{marginStart:b?3:1,children:Object(p.jsx)(l.v,{color:b?"darkGray":"gray",icon:"lock",accessibilityLabel:h._("secret board icon")})}),e.is_collaborative&&b&&j.length>0?Object(p.jsx)(l.f,{zIndex:x,children:Object(p.jsx)(l.c,{accessibilityLabel:c.a+f,collaborators:j,size:1===j.length?"sm":"xs"})}):e.is_collaborative&&Object(p.jsx)(l.f,{marginStart:1,children:Object(p.jsx)(l.v,{icon:"people",accessibilityLabel:h._("group board icon")})}),!i&&!!e.section_count&&Object(p.jsx)(l.f,{"data-test-id":"boardSectionPicker",marginStart:b?3:0,children:Object(p.jsx)(l.v,{color:b?"darkGray":"gray",icon:"arrow-forward",accessibilityLabel:h._("board section board picker icon")})})]})]})]})}),y=e.section_count,_=!!y&&y>0;return Object(p.jsx)(s.a,{rounding:2,onTouch:()=>t(_),pressState:"none",children:O})}))},yv4w:function(e,t,i){i.d(t,"a",(function(){return u}));var n=i("q1tI"),r=i("PaNI"),o=i("Bb4+"),s=i("6AqG"),a=i("yweb"),c=i("r8+8"),d=i("eyT9"),l=i("QAzJ"),p=i("n6mq"),b=i("nKUr");const h=e=>({color:e?"#fff":"#333",fontSize:18,fontWeight:"bold",background:"none",outline:"none",border:"none",marginTop:"4px",width:"100%"});function u(e){const t=Object(a.c)(),{backButtonIcon:i,name:u,onNextButtonTouch:j,onNameChange:g,selectedPinIds:m=[],useRoundedCorners:f}=e,x=Object(l.b)("mweb_board_modals")().anyEnabled,O=m.length>0?130:64;return Object(b.jsxs)(o.b,{hasFixedHeader:!0,children:[Object(b.jsxs)(c.c,{hasBorder:!x,height:O,paddingY:x?3:void 0,useRoundedCorners:f,children:[Object(b.jsxs)(p.f,{display:"flex",justifyContent:"between",alignItems:"center",children:[Object(b.jsx)(r.a,{color:x?"darkGray":void 0,icon:i||"cancel",padding:x?3:void 0,size:x?"sm":void 0}),Object(b.jsx)(p.cb,{weight:"bold",children:t._("Add section","for add board section page","for add board section page")}),Object(b.jsx)(p.g,{accessibilityLabel:x?t._("Add","boardSectionCreate.Add.Button.Text","Add button accessibility label for board section create page"):t._("Next","Next button accessibility label for board section create page","Next button accessibility label for board section create page"),onClick:j,disabled:""===u.trim(),color:"red",inline:!0,size:x?"lg":"sm",text:t._("Next","Next button for board section create page","Next button for board section create page")})]}),m&&Object(b.jsx)(s.a,{selectedPinIds:m})]}),Object(b.jsx)(p.f,{"data-test-id":"addSectionName",paddingX:x?2:void 0,paddingY:3,children:x?Object(b.jsx)(p.eb,{id:"name",label:t._("Name","boardSectionCreate.TextField.Name.Label","TextField label to Name on BoardSectionCreate"),onChange:e=>g(e.event),size:"lg",value:u}):Object(b.jsxs)(n.Fragment,{children:[Object(b.jsx)(p.y,{htmlFor:"name",children:Object(b.jsx)(p.cb,{size:"sm",children:t._("Section name","name tag for board create page","name tag for board create page")})}),Object(b.jsx)("input",{id:"name",placeholder:t._("Add","name placeholder for board section create page","name placeholder for board section create page"),value:u,style:h(Object(d.e)()),onChange:g})]})})]})}}},[["CRO+","runtime","vendor-react",0,5,6,7,8,9,18,19,20,21,22,51,57]]]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/pin/[id]/repin-mobile-1a6c0e9f4db925e2d419.mjs.map