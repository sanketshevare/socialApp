(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[351,107,120,749],{"+b91":function(e,t,n){n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var i=n("1dBE");const{Provider:o,useHook:s}=Object(i.c)("UnauthHeaderContext")},"0K1N":function(e,t,n){t.a=e=>`//connect.facebook.net/${(e=>{const t=e.replace(/-/g,"_");if(t.startsWith("es"))return"es_LA";if(t.startsWith("ar"))return"ar_AR";switch(t){case"de":return"de_DE";case"fr":return"fr_FR";case"it":return"it_IT";case"ja":return"ja_JP";case"nl":return"nl_NL";case"tr":return"tr_TR";case"en_AU":return"en_US";default:return t}})(e)}/sdk.js`},"0WZX":function(e,t,n){n.d(t,"a",(function(){return it}));var i=n("q1tI"),o=n("/MKj"),s=n("gxu6"),r=n("i2lo"),a=n("28DW"),l=n("4kAQ"),c=n("6adH"),d=n("ANjH"),u=n("EC67"),p=n("nKUr");function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const b=[501181];class g extends i.PureComponent{constructor(...e){super(...e),h(this,"completeExperience",()=>{const{experience:e,completeExperience:t}=this.props;e&&t&&t(e.placement_id,e.experience_id)}),h(this,"onTouch",()=>{this.completeExperience(),Object(a.a)("mweb_unauth_toast_upsell.tap");const{history:e,location:t}=this.props;t.pathname.startsWith("/search/")?e.push({pathname:"/",state:{from:`${t.pathname}${t.search}`,next:`${t.pathname}${t.search}`}}):e.push({pathname:"/",state:{from:t.pathname,next:t.pathname}})})}componentDidMount(){Object(a.a)("mweb_unauth_toast_upsell.shown")}render(){return this.props.experience?Object(p.jsx)(r.a,{experience:this.props.experience,eligibleIds:b,children:Object(p.jsx)(c.a,{persistent:!0,text:this.props.experience.display_data.toast_text,icon:"arrow-circle-forward",onTouch:this.onTouch})}):null}}var j=Object(d.compose)(u.l,Object(o.connect)(null,(e,t)=>({completeExperience:(t,n)=>e(Object(l.a)(t,n))})))(g),m=n("FDmi"),f=n("hLPq"),O=n("bcHz"),_=n("fs0a"),w=n("7w6Q"),x=n("kmwA"),S=n("tCfZ"),y=n("qpbZ"),v=n("yweb"),T=n("n6mq");function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const E={visible:{transform:"translateY(0)",transition:"all 225ms cubic-bezier(0.0,0.0,0.2,1)"},hiding:{transform:"translateY(350px)",transition:"all 225ms cubic-bezier(0.0,0.0,0.2,1)"},wash:{backgroundColor:"rgba(0, 0, 0, 0.5)",height:"100%",touchAction:"none",width:"100%",zIndex:10001,position:"fixed",top:0,left:0},mask:{baseStyles:{backgroundColor:"rgba(0,0,0, .5)",height:"100%",touchAction:"none",width:"100%",zIndex:1}}},I=1e3;class L extends i.PureComponent{constructor(...e){super(...e),C(this,"state",{visible:!1,hiding:!1,showWash:!1}),C(this,"getTitle",()=>{const{invite:e}=this.props,t=e&&e.sender,n=t&&t.first_name;return this.props.i18n._("Join {{ name }} on Pinterest for more ideas","Prompt user to signup to access all Pinterest features","Prompt user to signup to access all Pinterest features").replace("{{ name }}",n||"")}),C(this,"getAvatar",()=>{const{invite:e}=this.props,t=e&&e.sender,n=t&&t.image_medium_url,i=t&&t.full_name;return Object(p.jsx)(m.a,{src:n||"",name:i||"",size:"sm"})}),C(this,"handleHide",()=>{const{onDismiss:e}=this.props;w.a.increment("mweb_facebook_social_upsell.close"),this.setState({hiding:!0,showWash:!1}),this.slideInAnimation=window.requestAnimationFrame(()=>{setTimeout(()=>{e&&e()},I)})}),C(this,"handleHideOutsideTap",()=>{const{onDismiss:e}=this.props;w.a.increment("mweb_facebook_social_upsell.close.outside.modal"),this.setState({hiding:!0,showWash:!1}),this.slideInAnimation=window.requestAnimationFrame(()=>{setTimeout(()=>{e&&e()},I)})}),C(this,"handleFBConnect",e=>{w.a.increment("mweb_facebook_social_upsell.fb_connect_button_click."+e)}),C(this,"handleSignupClick",()=>{w.a.increment("mweb_facebook_social_upsell.signup_button_click"),this.props.history.push({pathname:"/",state:{from:this.props.location.pathname,next:this.props.location.pathname}})}),C(this,"initializeShowAnimation",()=>{w.a.increment("mweb_facebook_social_upsell.shown"),this.slideInAnimation=window.requestAnimationFrame(()=>{setTimeout(()=>{this.setState({visible:!0})},I)})})}componentDidMount(){w.a.increment("mweb_facebook_social_upsell.land");const{invite:e}=this.props,t=e?e.invite_channel:null;t&&w.a.increment("mweb_social_unauth.invite_channel."+t),this.initializeShowAnimation()}componentWillUnmount(){window.cancelAnimationFrame(this.slideInAnimation)}renderDefaultLoginHeader(){return Object(p.jsxs)(T.f,{flex:"grow",display:"flex",alignItems:"center",marginBottom:2,justifyContent:"center",children:[Object(p.jsxs)(T.f,{alignItems:"center",display:"flex",direction:"column",marginBottom:5,children:[Object(p.jsx)(T.f,{children:Object(p.jsx)(T.cb,{align:"start",weight:"bold",children:Object(p.jsx)("span",{className:"deprecatedTextSizeXL",children:this.props.i18n._("Sign up to see more","Title on mobile web signup modal to prompt users to signup for Pinterest.","Title on mobile web signup modal to prompt users to signup for Pinterest.")})})}),Object(p.jsx)(T.f,{marginBottom:1}),Object(p.jsx)(T.f,{alignItems:"center",display:"flex",direction:"column",children:Object(p.jsx)(T.cb,{align:"start",children:this.props.i18n._("Free, unlimited access to ideas","First value prop on mobile web sign up modal","First value prop on mobile web sign up modal")})})]}),Object(p.jsx)(T.p,{})]})}renderInviterHeader(){return Object(p.jsxs)(T.f,{flex:"grow",display:"flex",alignItems:"center",marginBottom:2,children:[Object(p.jsxs)(T.f,{alignItems:"center",direction:"row",display:"flex",paddingY:3,children:[Object(p.jsx)(T.f,{children:Object(p.jsx)(T.cb,{align:"start",weight:"bold",children:Object(p.jsx)("span",{className:"deprecatedTextSizeXL",children:this.getTitle()})})}),Object(p.jsx)(T.f,{dangerouslySetInlineStyle:{__style:{marginLeft:"26%"}},children:this.getAvatar()})]}),Object(p.jsx)(T.p,{})]})}render(){const{location:e,invite:t}=this.props,{visible:n,hiding:i,showWash:o}=this.state,s=x.a.settings.LOGIN_URL,r=t?t.sender:null,a=n&&!i?E.visible:E.hiding;return Object(p.jsxs)(T.f,{dangerouslySetInlineStyle:{__style:o?E.wash:{}},children:[n&&!i?Object(p.jsx)(O.a,{onTouch:this.handleHideOutsideTap,pressState:"none",children:Object(p.jsx)(T.f,{position:"fixed",top:!0,left:!0,opacity:1,dangerouslySetInlineStyle:{__style:E.mask.baseStyles}})}):null,Object(p.jsx)(T.f,{position:"fixed",bottom:!0,color:"white",paddingX:6,width:"100%",dangerouslySetInlineStyle:{__style:{...a,boxShadow:"0 1px 5px 0 rgba(0,0,0,0.25)",paddingBottom:"5%",paddingTop:"2%",touchAction:"none",zIndex:10001}},children:Object(p.jsxs)(T.f,{maxWidth:400,marginStart:"auto",marginEnd:"auto",children:[Object(p.jsx)(T.f,{paddingY:2}),Object(p.jsx)(T.f,{position:"absolute",left:!0,top:!0,marginStart:4,marginTop:2,children:Object(p.jsx)(f.a,{accessibilityLabel:this.props.i18n._("Close modal","Close the modal for facebook upsell","Close the modal for facebook upsell"),icon:"cancel",onTouch:this.handleHide,size:"sm"})}),Object(p.jsx)(T.f,{paddingY:2}),r?this.renderInviterHeader():this.renderDefaultLoginHeader(),Object(p.jsx)(T.f,{marginBottom:1,height:40,children:Object(p.jsx)(_.a,{facebookText:this.props.i18n._("Continue with Facebook","Button to login or signup with FB on Facebook","Button to login or signup with FB on Facebook"),from:e.pathname,next:e.pathname,fbButtonType:"continue",fbUseContinueAs:!0,fbConnectHandler:this.handleFBConnect})}),Object(p.jsx)(T.f,{marginBottom:1,marginTop:2,children:Object(p.jsx)(T.g,{onClick:this.handleSignupClick,color:"gray",text:this.props.i18n._("Sign Up","Button to redirect user to Signup Page on mweb","Button to redirect user to Signup Page on mweb")})}),Object(p.jsx)(T.f,{marginTop:3,children:Object(p.jsx)(T.cb,{color:"gray",align:"center",size:"sm",children:Object(y.b)(this.props.i18n._("Have an account? {{ logIn }}","Asking users if they already have an account","Asking users if they already have an account"),{logIn:Object(p.jsx)(T.B,{href:s,inline:!0,onClick:({disableOnNavigation:e})=>e(),children:Object(p.jsx)(T.cb,{color:"gray",inline:!0,size:"sm",weight:"bold",children:this.props.i18n._("Log in","Mobile web link to log in page","Mobile web link to log in page")})})})})}),Object(p.jsx)(T.f,{marginTop:3,children:Object(p.jsx)(S.a,{size:"xs"})})]})})]})}}var k=Object(u.l)((function(e){const t=Object(v.c)();return Object(p.jsx)(L,{...e,i18n:t})})),A=n("mp1x"),U=n("eyT9");const M={border:Object(U.e)()?void 0:"1px solid #efefef",bottom:0,boxShadow:"0 0 16px rgba(0,0,0, 0.16)",left:0,touchAction:"none",transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",width:"100vw",zIndex:1};var P=({children:e,isOpen:t,onDismiss:n,type:i})=>Object(p.jsx)(A.a,{allowScrolling:!0,childPaddingX:4,childPaddingY:4,disableMask:!0,hideCloseIcon:!0,isOpen:t,modalStyle:M,onCloseIconDismiss:n,onDismiss:n,type:i,children:e}),D=n("/8nX"),B=n("OadL");class R extends i.PureComponent{constructor(...e){var t,n,i;super(...e),i=({event:e})=>{e&&e.stopPropagation&&e.stopPropagation();const{history:t,socialCollabGroupBoardPath:n}=this.props,i=n||"";w.a.increment("mweb.social.group_board.public.modal.display"),t.push({pathname:"/signup/step1/",state:{next:i,isFromGroupBoardsInvite:!0}})},(n="handleJoinBoardClick")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}componentDidMount(){const{inviteObject:e}=this.props,t=e?e.invite_channel:null;w.a.increment("mweb.social.group_board.public.modal.display"),t&&w.a.increment("mweb.social.group_board.public.invite_channel."+t)}componentWillUnmount(){const{onDismiss:e}=this.props;e&&e()}render(){const{viewType:e,viewParameter:t,isOpen:n,inviteObject:i,onDismiss:o,board:s}=this.props,r=i?i.sender:null,a=r?r.first_name:"",l=r?r.image_medium_url:"",c=r?r.full_name:"",d=a?this.props.i18n._("{{ name }} invited you to join their board","Mobile Modal prompting users to join a friends({{ name }}) board","Mobile Modal prompting users to join a friends({{ name }}) board").replace("{{ name }}",a):this.props.i18n._("Your friends invited you to join their board","Mobile Modal prompting users to join a friends board","Mobile Modal prompting users to join a friends board"),u=this.props.i18n._("Join board","Join Board Button","Join Board Button");return Object(p.jsx)(D.a,{viewType:e||202,viewParameter:t,component:13196,children:Object(p.jsx)(P,{isOpen:n,onDismiss:o,type:"groupboard_join",children:s?Object(p.jsxs)(T.f,{padding:3,children:[Object(p.jsxs)(T.f,{direction:"column",children:[Object(p.jsxs)(T.f,{alignItems:"center",direction:"row",display:"flex",children:[Object(p.jsx)(T.f,{dangerouslySetInlineStyle:{__style:{marginRight:"5%"}},width:"48px",children:Object(p.jsx)(m.a,{src:l||"",name:c||""})}),Object(p.jsx)(T.f,{maxWidth:"74%",children:Object(p.jsx)(T.cb,{align:"start",overflow:"normal",weight:"bold",children:d})})]}),Object(p.jsx)(T.f,{marginBottom:4})]}),Object(p.jsx)(T.g,{text:u,color:"red",type:"button",onClick:this.handleJoinBoardClick})]}):Object(p.jsx)(T.f,{padding:3,children:Object(p.jsx)(T.U,{show:!0,accessibilityLabel:this.props.i18n._("Loading Board","Accessiblity label for Spinner searching for board","Accessiblity label for Spinner searching for board")})})})})}}var N=Object(o.connect)((e,t)=>{const n=e&&e.session&&e.session.socialCollabGroupBoardPath&&e.session.socialCollabGroupBoardPath.split("?")[0]||"",i=Object(B.b)(e)[n];return{viewParameter:e.currentPage.viewParameter,viewType:e.currentPage.viewType,country:e.session.country,board:i,socialCollabGroupBoardPath:e.session.socialCollabGroupBoardPath}},()=>({}))((function(e){const t=Object(v.c)();return Object(p.jsx)(R,{...e,i18n:t})})),F=n("2NiC"),z=n("MH4Q"),H=n("g6r8"),G=n("AGnR"),W=n("+b91");function q({setRef:e,showDesktopSignupModal:t}){const n=Object(v.c)(),i=Object(H.a)(),s=Object(u.h)(),r=Object(u.i)(),l=Object(o.useSelector)(e=>e),{currentPage:c}=l,d=c.viewParameter,h=c.viewType,b=()=>{Object(a.a)("unauth.login_button.click"),Object(a.g)("mweb_press_header_login"),t?t("login"):s.push("/login")},g="desktop"===i,j=g?"signup":"download",m="signup"===j?n._("Sign up","Text on button on the top bar that leads users to signing up.","Text on button on the top bar that leads users to signing up."):n._("Download app","mweb.unauth_header.download_app","CTA on the app interstitial upsell to install the app");return Object(p.jsx)(T.f,{"data-test-id":"unauthInterstitialUpsell",position:"relative",top:!0,zIndex:new T.s(9999),width:"100%",children:Object(p.jsx)(F.a,{children:n=>Object(p.jsx)(W.a,{value:{emptySearchSuggestions:[],headerOffsetTop:0,searchBoxType:g?"full":"simple"},children:Object(p.jsx)(z.b,{enableSettingsFlyout:g,primaryButtonText:m,onLoginButtonClick:b,onPrimaryButtonClick:e=>{"signup"===j?(Object(a.a)("unauth.signup_button.click"),Object(a.g)("mweb_press_header_signup"),t?t("signup"):s.push("/signup")):((e,t)=>{Object(a.g)("press_open_app",!0),Object(G.h)({component:13198,element:10308,view_type:h,view_parameter:d}),t&&t(r.pathname.substr(1))})(0,n)},ref:e})})})})}var $=n("75Yz"),K=n("G5lw"),Y=n("rYoy"),J=n("QtD7"),V=n("ulr2"),Z=n("wMN6"),X=n("E/Zv"),Q=n("QAzJ"),ee=n("UIBZ");function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ne=()=>{document.body&&(document.body.style.overflow="hidden",document.body.style.touchAction="none")},ie=()=>{document.body&&(document.body.style.overflow="visible",document.body.style.touchAction="auto")};class oe extends i.Component{constructor(...e){super(...e),te(this,"state",{hasScrollSignupDisplayed:!1,scrollingModalEnabled:!1,scrollThreshold:0,isIdleTimerDeactivated:!1}),te(this,"inactiveTime",0),te(this,"handleIdleInactivity",()=>{const e=this.inactiveTime+500;w.a.increment("mweb_unauth.idle_time."+e),this.inactiveTime=e,e>=6e5&&this.handleIdleDeactivate()}),te(this,"handleIdleDeactivate",()=>{const{isIdleTimerDeactivated:e}=this.state;e||(clearInterval(this.idleId),this.setState({isIdleTimerDeactivated:!0}),window.removeEventListener("touchstart",this.handleIdleDeactivate),window.removeEventListener("touchend",this.handleIdleDeactivate),window.removeEventListener("touchcancel",this.handleIdleDeactivate),window.removeEventListener("touchmove",this.handleIdleDeactivate))}),te(this,"handleThrottledScrollForSignupModal",Object(Z.o)(e=>{const{mobileSignupModalDispatch:t,toggleSignupScrollControllerDisplay:n}=this.props,{scrollingModalEnabled:i}=this.state;!(null==t||!t({type:"UNAUTH_UPDATE_SIGNUP_SCROLL_CONTROLLER_SCROLL_POSITION",signupScrollControllerScrollPosition:e}))&&(ne(),i||(this.setState({scrollingModalEnabled:!0}),n(!0)))},500)),te(this,"handleScroll",()=>{const{isSignupModalShown:e,showSignupModal:t,isUnauthSharingModalsShown:n,toggleSignupScrollControllerDisplay:i,activateMWebFMASignupScrollControllerExperiment:o}=this.props,{hasScrollSignupDisplayed:s,scrollingModalEnabled:r}=this.state,a=this.getScrollPos();this.handleScrollLogging(a),this.handleIdleDeactivate();const{anyEnabled:l}=o();l?this.handleThrottledScrollForSignupModal(a):a>400&&!s&&!n&&!e&&(ne(),r||(this.setState({scrollingModalEnabled:!0}),i(!0)),this.setState({hasScrollSignupDisplayed:!0}),t(X.a.SOCIAL_INVITE))}),te(this,"handleScrollLogging",e=>{let t=this.state.scrollThreshold,n=0,i=0,o=0;e>=10500||(e>250&&e<500&&0==(1&t)?(n=250,o=1):e>500&&e<750&&0==(2&t)?(n=500,o=2):e>750&&e<1e3&&0==(4&t)?(n=750,o=3):e>=1e3&&e<1500&&0==(8&t)?(n=1e3,o=4):e>=1500&&e<2e3&&0==(16&t)?(n=1500,o=5):e>=2e3&&e<2500&&0==(32&t)?(n=2e3,o=6):e>=2500&&e<3e3&&0==(64&t)?(n=2500,o=7):e>=3e3&&e<3500&&0==(128&t)?(n=3e3,o=8):e>=3500&&e<4e3&&0==(256&t)?(n=3500,o=9):e>=4e3&&e<4500&&0==(512&t)?(n=4e3,o=10):e>=4500&&e<5e3&&0==(1024&t)?(n=4500,o=11):e>=5e3&&e<6e3&&0==(2048&t)?(n=5e3,o=12):e>=6e3&&e<7e3&&0==(4096&t)?(n=6e3,o=13):e>=7e3&&e<8e3&&0==(8192&t)?(n=7e3,o=14):e>=8e3&&e<9e3&&0==(16384&t)?(n=8e3,o=15):e>=9e3&&e<1e4&&0==(32768&t)?(n=9e3,o=16):e>=1e4&&0==(65536&t)&&(n=1e4,o=17),n&&(i=1<<o-1,w.a.increment("mweb_unauth_scroll_depth."+n),t|=i,this.setState({scrollThreshold:t})))}),te(this,"handleSignupDismiss",()=>{const{hideSignupModal:e,isSignupModalShown:t,toggleSignupScrollControllerDisplay:n,mobileSignupModalDispatch:i}=this.props;t&&e(),null==i||i({type:"DISMISS_MOBILE_SIGNUP_MODAL"}),n&&n(!1),this.setState({scrollingModalEnabled:!1}),ie()})}componentDidMount(){this.idleId=setInterval(this.handleIdleInactivity,500),window.addEventListener("scroll",this.handleScroll),window.addEventListener("touchstart",this.handleIdleDeactivate),window.addEventListener("touchend",this.handleIdleDeactivate),window.addEventListener("touchcancel",this.handleIdleDeactivate),window.addEventListener("touchmove",this.handleIdleDeactivate)}componentWillUnmount(){window.removeEventListener("scroll",this.handleScroll),this.handleIdleDeactivate(),ie()}getScrollPos(){return void 0!==window.scrollY?window.scrollY:document.documentElement&&void 0!==document.documentElement.scrollTop?document.documentElement.scrollTop:0}render(){const{scrollingModalEnabled:e}=this.state,{isSignupModalShown:t,isMobileSignupModalShown:n,invite:i,renderSignupModal:o,renderOnActionUpsell:s}=this.props,r=e?o({closeVariant:"enabled_background_icon_only",onDismiss:this.handleSignupDismiss,invite:i,isScrollingModal:!0,isOpen:e}):s(),a=n||t?r:null;return Object(p.jsx)(T.f,{children:a})}}var se=Object(o.connect)((e,t)=>({isSignupModalShown:e.session.isSignupModalShown,isGoogleOneTapShown:e.session.isGoogleOneTapShown,isUnauthSharingModalsShown:e.session.isUnauthSharingModalsShown}),e=>({hideSignupModal:()=>e(Object(V.l)()),showSignupModal:t=>Object(X.n)(e,t),activateExperiment:t=>e(Object(J.a)(t))}))(e=>{const t=!!Object(ee.b)(),n=Object(ee.c)(),i=Object(Q.b)("mweb_fma_signupscrollcontroller");return Object(p.jsx)(oe,{...e,isMobileSignupModalShown:t,activateMWebFMASignupScrollControllerExperiment:i,mobileSignupModalDispatch:n})}),re=n("ihsa"),ae=n("picD"),le=n("hZxF"),ce=n("4lNu");const de="ANIMATE_LINE_SIGNUP",ue=(e,t)=>t?{animation:`${de}_${e} 4000ms linear 100ms`,WebkitAnimation:`${de}_${e} 4000ms linear 100ms`}:null;var pe=({onSignupButtonTap:e,setIsDuringLineUpsellAnimation:t,isDuringLineUpsellAnimation:n,signupButtonLabel:i})=>(Object(le.a)(()=>{setTimeout(()=>{t(!0)},2e3),setTimeout(()=>{t(!1)},6200)}),Object(p.jsx)(T.f,{alignItems:"center",display:"flex",justifyContent:"around",color:"lightGray",rounding:"pill",height:48,children:Object(p.jsx)(T.bb,{onTap:()=>{t(!1),e()},children:Object(p.jsxs)(T.f,{alignItems:"center",display:"flex",paddingX:4,height:48,position:"relative",dangerouslySetInlineStyle:{__style:{...ue("container",n)}},children:[Object(p.jsx)(re.a,{unsafeCSS:Object(ce.a)(["ANIMATE_LINE_SIGNUP_container {\n    from: {\n        padding-right: 16px;\n    }\n    8% {\n        padding-right: 52px;\n    }\n    92% {\n        padding-right: 52px;\n    }\n    to {\n        padding-right: 16px;\n    }\n  }","ANIMATE_LINE_SIGNUP_logo {\n    from: {\n      opacity: 0;\n      visibility:hidden;\n    }\n    4% {\n      opacity: 0;\n      visibility:hidden;\n    }\n    12% {\n      opacity: 1;\n      visibility:visible;\n    }\n    88% {\n      opacity: 1;\n      visibility:visible;\n    }\n    96% {\n      opacity: 0;\n      visibility:visible;\n    }\n    to {\n      opacity: 0;\n      visibility:hidden;\n    }\n  }"])}),Object(p.jsx)(T.cb,{weight:"bold",children:i}),Object(p.jsx)(T.f,{position:"absolute",right:!0,marginEnd:3,opacity:0,rounding:"circle",height:32,width:32,padding:1,marginStart:1,dangerouslySetInlineStyle:{__style:{visibility:"hidden",backgroundColor:"#00C300",paddingTop:"6px",...ue("logo",n)}},children:Object(p.jsx)(ae.a,{size:24})})]})})})),he=n("Lr1Z"),be=n("lsgW"),ge=n("HuSE"),je=n("1Qfp");var me=({children:e,fallback:t})=>(()=>{const e=Object(o.useSelector)(e=>{var t;return!(null==e||null===(t=e.session)||void 0===t||!t.isSeoBot)}),t=Object(je.a)();return!e&&!t})()?t||null:e;function fe({onLoginClick:e,onSignupClick:t}){const n=Object(v.c)();return Object(p.jsxs)(T.f,{alignItems:"center",direction:"column",display:"flex",paddingX:2,paddingY:4,children:[Object(p.jsx)(T.f,{flex:"grow",maxWidth:220,children:(()=>{const e=n._("You are signed out","Heading on the bottom right upsell suggesting user is not signed in","Heading on the bottom right upsell suggesting user is not signed in");return Object(p.jsxs)(T.f,{marginBottom:6,children:[Object(p.jsx)(T.f,{marginBottom:2,children:Object(p.jsx)(T.u,{overflow:"normal",size:"sm",align:"center",children:e})}),Object(p.jsx)(T.cb,{overflow:"normal",align:"center",children:n._("Sign in to get the best experience","Subheader value prop on the bottom right upsell","Subheader value prop on the bottom right upsell")})]})})()}),Object(p.jsxs)(T.f,{display:"flex",direction:"row",justifyContent:"center",minWidth:"100%",children:[Object(p.jsx)(T.f,{marginEnd:2,children:Object(p.jsx)(T.g,{size:"md",text:n._("Log in","Text on the button on the bottom banner that leads unauthorized users to login.","Text on the button on the bottom banner that leads unauthorized users to login."),onClick:()=>{e(),Object(a.h)("unauth.tablet.conversion_upsell.login.button_click")}})}),Object(p.jsx)(T.f,{children:Object(p.jsx)(T.g,{size:"md",text:n._("Sign up","sign up button on the bottom banner","sign up button on the bottom banner"),color:"red",onClick:()=>{t(),Object(a.h)("unauth.tablet.conversion_upsell.signup.button_click")}})})]})]})}var Oe=n("DzJC"),_e=n.n(Oe);var we=()=>{const[e,t]=Object(i.useState)(0);return Object(i.useEffect)(()=>{const e=_e()(()=>t(window.scrollY),10);return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[]),e},xe=n("EfoL"),Se=n("ntEp");var ye=e=>{const t=Object(v.c)(),{handleOpenAppClick:n,handleDismiss:s,pin:r,fallbackImageUrl:l}=e,c=Object(o.useSelector)(({session:e})=>e.isTablet),d=Object(u.i)(),h=Object(u.h)(),b=we(),[g,j]=Object(i.useState)(!1),m=Object(xe.d)(r)||l||"",{anyEnabled:O}=Object(Q.b)("mweb_floating_app_upsell_right_side_cancel")(),_=Object(Q.b)("mweb_unauth_jp_clickthru_imageviewer2"),w=Object(Se.b)(),x=(null==w?void 0:w.userHasExitedFromImageViewer)&&_().group.startsWith("enabled_image_viewer_overlay");Object(i.useEffect)(()=>{x&&j(!0)},[x]),Object(i.useEffect)(()=>{b>200?g||j(!0):c&&g&&j(!1)},[b,c]);const S=t._("Download app","unauth.mweb.floating_app_modal","CTA on the app upsell modal"),y=t._("Get the free Pinterest app to see more","unauth.mweb.floating_app_modal.main_text","Top text on the floating app install modal prompting the users to download the app"),C=t._("Loving these ideas?","unauth.mweb.floating_app_modal.main_text","Top text on the floating app install modal prompting the users to download the app");return Object(p.jsxs)(T.f,{"data-test-id":"floating-app-upsell",rounding:c?6:8,paddingY:c?4:2,paddingX:c?4:2,display:"flex",direction:"column",top:!c||!c,bottom:!!c&&!!c,left:!c||!c,right:!0,marginStart:c?0:"auto",marginEnd:c?4:"auto",marginBottom:c?4:void 0,maxWidth:c?250:360,color:"white",opacity:1,zIndex:new T.s(1e4),dangerouslySetInlineStyle:{__style:{boxShadow:"0px 0px 8px rgba(0, 0, 0, 0.1)",transition:"transform 225ms ease-in-out",transform:(()=>{let e=g?0:120;return e=c?e:-1*e,`translateY(${e}%)`})()}},position:"fixed",children:[!c&&!O&&Object(p.jsx)(T.f,{"data-test-id":"cancel-button",children:Object(p.jsx)(f.a,{icon:"cancel",onTouch:s,size:"sm"})}),!c&&O&&Object(p.jsx)(T.f,{"data-test-id":"cancel-button",display:"flex",alignSelf:"end",children:Object(p.jsx)(f.a,{icon:"cancel",padding:1,onTouch:s,size:"sm"})}),c?Object(p.jsx)(fe,{onSignupClick:()=>{h.push("/signup",d.state)},onLoginClick:()=>{h.push("/login",d.state)}}):Object(p.jsxs)(T.f,{children:[Object(p.jsxs)(T.f,{"data-test-id":"interest-image",display:"flex",margin:2,children:[m&&Object(p.jsx)(T.f,{minWidth:48,height:64,overflow:"hidden",rounding:2,marginEnd:4,children:Object(p.jsx)(T.x,{src:m,fit:"cover",naturalWidth:48,naturalHeight:64,color:(r||{}).dominant_color||"white",alt:"image"})}),Object(p.jsxs)(T.f,{display:"flex",direction:"column",children:[Object(p.jsx)(T.f,{children:Object(p.jsx)(T.cb,{weight:"bold",children:C})}),Object(p.jsx)(T.cb,{children:y})]})]}),Object(p.jsx)(T.f,{alignItems:"center",alignSelf:"center","data-test-id":"download-button",display:"flex",direction:"row",justifyContent:"center",marginBottom:3,marginStart:4,marginEnd:4,wrap:!0,children:Object(p.jsx)(F.a,{children:e=>Object(p.jsx)(T.g,{color:"red",inline:!0,onClick:t=>{n(t,e),Object(a.h)("unauth.mweb.phone.app_upsell.button_click")},size:"md",text:S})})})]})]})},ve=n("2JgW"),Te=n("pLLR"),Ce=n("vtuW"),Ee=n("isp9"),Ie=n("eQwl");var Le=Object(u.l)(e=>{var t;const n=Object(v.c)(),{buttonColor:s="red",hideLogo:r,history:l,installButtonText:c,isShowing:d,location:h,setRef:b,showLiteUpsell:g=!1,sticky:j=!1,hideMobileUnauthHeader:m=!1}=e,[f,O]=Object(i.useState)(!1);Object(i.useEffect)(()=>{Object(Ie.g)()},[]);const _=Object(o.useSelector)(e=>e),x=Object(o.useSelector)(e=>e.currentPage),S=Object(o.useSelector)(e=>e.pins),y=x.viewParameter,C=x.viewType,E=Object(u.k)(),I=Object(Te.d)(),{isBot:L}=I,k=E.params.id,A=k&&S&&S[k],M=Object(B.b)(_)[h.pathname],P=null==M||null===(t=M.cover_pin)||void 0===t?void 0:t.pin_id,R=P&&S&&S[P],N=Object(o.useSelector)(({session:e})=>"JP"===e.country),z=Object(Q.b)("mweb_line_signup_upsell"),H=N&&z().anyEnabled,W=Object(Q.b)("mweb_instagram_browser_switch"),q=Object(Ce.a)("msmrsfda"),$=!L&&!g&&(Object(Ee.M)(h)||Object(Ee.f)(h))&&!q&&!(()=>{const e=Object(Ee.A)()&&W().anyEnabled;return e&&!Object(Ce.a)("ufausfiiab")&&(w.a.increment("unauth.floating_app_upsell.suppress_for_instagram_in_app_browser"),Object(Ce.c)("ufausfiiab","1")),e})(),K=Object(Q.b)("mweb_creator_access_upsell")().anyEnabled,Y=Object(o.useSelector)(({marketingCampaign:e})=>e.params),J=K&&Y.utm_campaign,V=Object(je.a)(),Z=Object(Q.b)("mweb_unauth_loading_ssr_pin_page"),X=!V&&Z().anyEnabled,ee=Object(Ee.y)(h)||Object(Ee.Z)(h),te=()=>{Object(G.h)({component:13198,element:30,view_type:C,view_parameter:y}),l.push("/login",h.state)},ne=({event:e},t)=>{const n=e;Object(a.i)("mweb_unauth.interstitial_app_upsell.install_tap",{x:n&&n.pageX||-1,y:n&&n.pageY||-1}),Object(Ie.f)(),Object(a.g)("press_open_app",!0),Object(G.h)({component:13198,element:10308,view_type:C,view_parameter:y}),t&&t(h.pathname.substr(1))},ie=n._("Log in","Label for log in button","Label for log in button"),oe=n._("Sign up","Text on button on the top bar that leads users to signing up.","Text on button on the top bar that leads users to signing up."),se=c||n._("Download","mweb.unauth.interstitial_upsell.download_button_text","CTA on the app interstitial upsell to install the app"),re=()=>{Object(G.h)({component:13198,element:31,view_type:C,view_parameter:y}),l.push("/signup",h.state)},[ae,le]=Object(i.useState)(!1),ce=Object(U.e)()?"#333":"white",de=h.hash==="#"+ve.a,ue=g?Object(p.jsx)(be.a,{size:24}):Object(p.jsx)(T.v,{color:"red",icon:"pinterest",accessibilityLabel:n._("Pinterest App","Pinterest icon for app upsell","Pinterest icon for app upsell"),size:24});return Object(p.jsx)(D.a,{viewType:C||202,viewParameter:y,component:13198,children:Object(p.jsxs)(T.f,{children:[$&&!f&&Object(p.jsx)(D.a,{viewType:C||202,viewParameter:y,component:13130,children:Object(p.jsx)(ye,{fallbackImageUrl:M&&M.image_cover_url||"",handleDismiss:e=>{const t=e;Object(a.i)("mweb_unauth.float_app_upsell.dismiss_tap",{x:t&&t.pageX||-1,y:t&&t.pageY||-1}),Object(a.g)("click_dismiss_float_app_upsell"),Object(G.h)({component:13198,element:75,view_type:C,view_parameter:y}),O(!0)},handleOpenAppClick:ne,pin:A||R})}),!J&&!m&&Object(p.jsx)(T.f,{dangerouslySetInlineStyle:{__style:{boxShadow:"0 1px 0 0 rgba(0, 0, 0, 0.08)",backgroundColor:"red"===s?ce:"white",transition:"all 225ms cubic-bezier(0.0,0.0,0.2,1) 500ms",transform:d?"translateY(-100vh)":"translateY(0)",zIndex:de?void 0:99}},top:!0,left:!0,width:"100vw",position:j?"fixed":"relative",paddingX:3,paddingY:H?1:0,children:Object(p.jsx)(T.f,{ref:b,children:Object(p.jsxs)(T.f,{alignItems:"center",display:"flex",direction:"row",justifyContent:"between","data-test-id":"unauthInterstitialUpsell",children:[Object(p.jsx)(T.bb,{accessibilityLabel:n._("Pinterest App","Pinterest icon for app upsell","Pinterest icon for app upsell"),children:Object(p.jsxs)(T.f,{alignItems:"center",display:"flex",direction:"row",marginEnd:3,children:[!r&&Object(p.jsx)(T.f,{alignItems:"center",display:"flex",height:56,justifyContent:"center",rounding:2,children:Object(p.jsx)(he.a,{pressState:"none",to:"/",children:ue})}),Object(p.jsx)(T.f,{paddingY:2,paddingX:1,children:!(g?se.length>=18:$||Object(Ee.y)(h)?oe.length+ie.length>=18:ie.length+se.length>=18)&&Object(p.jsxs)(T.f,{children:[Object(p.jsx)(T.u,{color:"red",size:"sm",overflow:"normal",children:g?n._("Pinterest Lite","Pinterest lite brand for the app upsell","Pinterest lite brand for the app upsell"):n._("Pinterest","Pinterest brand for the app upsell","Pinterest brand for the app upsell")}),g&&Object(p.jsx)(T.f,{dangerouslySetInlineStyle:{__style:{whiteSpace:"pre-wrap"}},children:Object(p.jsx)(T.f,{children:Object(p.jsx)(T.cb,{inline:!0,size:"sm",color:"gray",children:n._("Save space on your device","Unauth app upsell copy that describe Pinterest product core value to users","Unauth app upsell copy that describe Pinterest product core value to users")})})})]})})]})}),Object(p.jsx)(me,{fallback:X?Object(p.jsxs)(T.t,{gap:1,children:[Object(p.jsx)(ge.a,{width:80,height:40,rounding:6}),Object(p.jsx)(ge.a,{width:80,height:40,rounding:6})]}):null,children:Object(p.jsxs)(T.f,{marginEnd:0,flex:"none",alignItems:"center",display:"flex",direction:"row","data-test-id":"UnauthAppUpsellButton",children:[!g&&!Object(Ee.B)(h)&&!ae&&Object(p.jsx)(T.f,{"data-test-id":"AppUpsellLoginButton",children:Object(p.jsx)(T.g,{color:"white",onClick:()=>{te()},size:H?"lg":"md",text:ie})}),$||ee?H?Object(p.jsx)(pe,{onSignupButtonTap:re,signupButtonLabel:oe,setIsDuringLineUpsellAnimation:le,isDuringLineUpsellAnimation:ae}):Object(p.jsx)(T.f,{"data-test-id":"AppUpsellSignupButton",children:Object(p.jsx)(T.g,{color:ee?"red":"gray",onClick:re,size:"md",text:oe})}):Object(p.jsx)(T.f,{"data-test-id":"AppUpsellDownloadButton",children:Object(p.jsx)(F.a,{redirectToLite:g,children:e=>Object(p.jsx)(T.g,{color:Object(Ee.db)(h)?"gray":"red",onClick:t=>{ne(t,e)},size:"md",text:se})})})]})})]})})})]})})}),ke=n("snfI");var Ae=Object(u.l)(({invite:e,location:t,showLiteUpsell:n=!1})=>{var o;const s=Object(v.c)(),[r,l]=Object(i.useState)(!0);Object(i.useEffect)(()=>{Object(a.a)("mweb_unauth_toast_upsell.shown")},[]);const c=({event:e},n)=>{Object(a.a)("mweb_unauth_toast_upsell.tap"),Object(a.g)("press_upsell");const{pathname:i,search:o}=t;n&&n(i.concat(o).substr(1))},d=(null==e||null===(o=e.sender)||void 0===o?void 0:o.first_name)||"",u=s._("Join {{ name }} on Pinterest for more ideas","Prompt user to signup to access all Pinterest features","Prompt user to signup to access all Pinterest features").replace("{{ name }}",d),{isNavFooterHiddenAfterScroll:h}=Object(ke.b)();return Object(p.jsx)(P,{isOpen:h&&r,onDismiss:()=>{l(!1)},type:"unauth_toast_upsell",children:Object(p.jsxs)(T.f,{padding:2,children:[d&&Object(Ee.U)(t,!0,!0)&&Object(p.jsx)(T.f,{marginBottom:4,children:Object(p.jsx)(T.cb,{overflow:"normal",weight:"bold",align:"center",children:u})}),Object(p.jsx)(F.a,{redirectToLite:n,children:e=>Object(p.jsx)(T.g,{color:"red",onClick:t=>{c(t,e)},size:"md",text:s._("Open in app","Opens the Pin in the Pinterest app","Opens the Pin in the Pinterest app")})})]})})}),Ue=n("ARZW"),Me=n("bUAJ"),Pe=n("ke5A"),De=n("fsjD"),Be=n("JJAz"),Re=n("zRck"),Ne=n("RNo4"),Fe=n("AYc3"),ze=n("0G5S"),He=n("2y2F"),Ge=n("PmFr"),We=n("YWST");function qe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const $e=Object(i.lazy)(()=>Promise.all([n.e(585),n.e(750)]).then(n.bind(null,"xiyX"))),Ke=Object(i.lazy)(()=>n.e(671).then(n.bind(null,"4aTO"))),Ye=Object(i.lazy)(()=>n.e(651).then(n.bind(null,"57M6"))),Je=Object(i.lazy)(()=>n.e(672).then(n.bind(null,"Lajh"))),Ve=Object(i.lazy)(()=>n.e("SignupModal").then(n.bind(null,"yi9W"))),Ze=[5,18,17],Xe=[6,19],Qe=()=>"undefined"!=typeof window&&window.navigator&&window.navigator.userAgent&&(window.navigator.userAgent.includes(Ge.d)||window.navigator.userAgent.includes(Ge.a)),et=()=>{try{const{count:e,time:t}=JSON.parse(Object(ze.a)("unauthRevisitation"));return"number"==typeof e&&"number"==typeof t?{count:e,time:t}:null}catch(e){return null}},tt=e=>{Object(ze.c)("unauthRevisitation",JSON.stringify(e))};class nt extends i.Component{constructor(...e){super(...e),qe(this,"state",{fbSocialUpsellDismissed:!1,interstitialUpsellHeight:0,inviteCode:"",isBoardToastDisplayed:!1,isDefaultToastDisplayed:!0,isClientMounted:!1,isProfileToastDisplayed:!1,isScrollControllerDisplayed:!1,referrer:"",shouldShowGoogleOneTap:!0,showWashOnly:!1}),qe(this,"getAppInstallBannerOptions",()=>{const{appInstallBannerAlongRegister:e,canUpsellNativeApp:t,location:n,routeMatch:i}=this.props;return t||this.shouldShowLiteUpsell()?Object(Ee.M)(n)||Object(Ee.f)(n)||Object(Ee.Z)(n)||Object(Ee.bb)(n)||Object(Ee.y)(n)||Object(Ee.R)(n)||"/unauth-profile"===i.path||"/:username/:slug/:section_slug"===i.path?{hideLogo:!1,interstitialSticky:!1,interstitialDismissible:!0,appBannerShow:!1,appBannerDismissible:!1}:Object(Ee.B)(n)||e()&&Object(Ee.T)(!1,n)&&!Object(Ee.x)(n)?{interstitialSticky:!1,hideLogo:!0,interstitialDismissible:!1,appBannerShow:!1,appBannerDismissible:!1}:null:null}),qe(this,"setUnauthInterstitialUpsellRef",e=>{e&&e.offsetHeight!==this.state.interstitialUpsellHeight&&this.setState({interstitialUpsellHeight:e.offsetHeight})}),qe(this,"handleInterstitialUpsellHide",()=>{const{interstitialUpsellDismissed:e,hideAppUpsell:t}=this.props;!e&&t&&t()}),qe(this,"toggleSignupScrollControllerDisplay",e=>{this.setState({isScrollControllerDisplayed:e})}),qe(this,"renderMobileSignupModal",({closeVariant:e,onDismiss:t,invite:n,isScrollingModal:i,isOpen:o,showAppFocusedVariant:s})=>{var r,a;const{deviceType:l,locale:c}=this.props,{showWashOnly:d}=this.state,u=(null===(r=window)||void 0===r||null===(a=r.screen)||void 0===a?void 0:a.width)||0;return Object(p.jsx)(Y.a,{fallback:Object(p.jsx)("div",{}),children:Object(p.jsx)(Ve,{closeVariant:e,inviteObject:n,isOpen:o,isScrollingModal:i,isTablet:"tablet"===l,isWashOnly:d,onDismiss:t,renderSimpleAppUpsell:s,toggleSignupScrollControllerDisplay:this.toggleSignupScrollControllerDisplay,thinnerModal:!["es-419","es-MX","es-US","fr","ms-MY","sk-SK","uk-UA"].includes(c)&&u>=345})})}),qe(this,"isEligibleForUnauthAppUpsell",()=>{const{canUpsellNativeApp:e,country:t,platform:n,signUpModalGbNoJPIsEnabled:i,showUnauthSaveSignupModal:o}=this.props;return((e,t,n,i=!1,o=!1)=>{const s=Object(Ce.a)("openUnauthType"),r=i?[]:["CA","NL","BE","SE","CH","DK","NZ","AT"];return!Boolean(s)&&e&&["ios","ipad","android"].includes(n)&&r.includes(t)&&!o&&!Object(Be.c)(window)})(e,t,n,i,o)}),qe(this,"renderOnLandingUpsell",e=>{const{canUpsellNativeApp:t,experience:n,location:i}=this.props,{isBoardToastDisplayed:o,isProfileToastDisplayed:s}=this.state;return!t||Object(Ee.O)(i)?null:e?e.appBannerShow?Object(p.jsx)(Y.a,{children:Object(p.jsx)($e,{browserUpsellInModal:!1,browserUpsellType:"none",location:this.props.location,dismissible:e.appBannerDismissible,inBlockingModal:!1,scrollMode:"yPosition"})}):null:this.isEligibleForUnauthAppUpsell()?Object(p.jsx)(Y.a,{children:Object(p.jsx)($e,{browserUpsellInModal:!1,browserUpsellType:"login",location:this.props.location,inBlockingModal:!1,scrollMode:"default"})}):Object(Ee.U)(i,o,s)||Object(Ee.y)(i)||Object(Ee.cb)(i)?null:n?Object(p.jsx)(j,{experience:n}):this.props.shouldShowUpsell&&Object(p.jsx)(Ae,{shouldShowLiteUpsell:this.shouldShowLiteUpsell()})}),qe(this,"renderMobileOnActionUpsell",()=>{const e=this.isEligibleForUnauthAppUpsell();return e&&this.handleInterstitialUpsellHide(),this.renderMobileSignupModal({onDismiss:()=>{const{mobileSignupModalDispatch:e}=this.props;null==e||e({type:"DISMISS_MOBILE_SIGNUP_MODAL"}),Object(X.f)()},showAppFocusedVariant:e})}),qe(this,"renderMobileFacebookSocialUpsell",(e,t)=>{const{location:n}=this.props,{fbSocialUpsellDismissed:i}=this.state,o=t?t.invite_channel:null;if(!Object(Ee.U)(n,!0,!0)||!o)return null;return!Ze.includes(o)&&!Xe.includes(o)||i?e:Object(p.jsx)(k,{invite:t,onDismiss:()=>{this.state.fbSocialUpsellDismissed||this.setState({fbSocialUpsellDismissed:!0})}})}),qe(this,"renderMobileInviteUpsells",(e,t,n)=>{const{location:i,history:o,deprecatedIsSignupModalShown:s,socialCollabGroupBoardPath:r,setSessionData:a,isUnauthToastUpsellDisplayed:l}=this.props,{isBoardToastDisplayed:c,isProfileToastDisplayed:d,shouldShowGoogleOneTap:u,isDefaultToastDisplayed:h}=this.state,b=e?e.invite_channel:null,g=e?e.sender:null,j=Object(Ee.f)(i)&&Object(Ee.U)(i,!0)&&g,m=e&&4===e.invite_category&&j;m&&!r&&a({socialCollabGroupBoardPath:i.pathname+i.search});const f=Object(Ee.q)(i)&&r,O=m||f;c||!j||O||this.setState({isBoardToastDisplayed:!0});const _=Object(Ee.P)(i)&&Object(Ee.U)(i,!1,!0)&&g;!d&&_&&this.setState({isProfileToastDisplayed:!0});const w=c||d,x=u||s||h||!Object(Ee.U)(i)&&!w||!l||!this.props.shouldShowUpsell?null:Object(p.jsx)(Ae,{invite:e,showAvatar:w}),S=!Ze.includes(b)&&!Xe.includes(b)&&!O&&Object(Ee.U)(i);return Object(p.jsxs)(T.f,{children:[n,S?Object(p.jsx)(se,{history:o,invite:e,location:i,renderOnActionUpsell:this.renderMobileOnActionUpsell,renderSignupModal:this.renderMobileSignupModal,toggleSignupScrollControllerDisplay:this.toggleSignupScrollControllerDisplay}):t,this.renderMobileFacebookSocialUpsell(x,e),O&&Object(p.jsx)(Y.a,{children:Object(p.jsx)(N,{history:o,inviteObject:e,isOpen:!0,location:i,onDismiss:()=>{}})})]})}),qe(this,"shouldShowLiteUpsell",()=>{const{activeExperiments:e,country:t,platform:n,userAgent:i}=this.props;return Object(Ie.e)({country:t,platform:n,userAgent:i,upsellLiteAppExp:((null==e?void 0:e.mweb_targeted_lite_app_upsell)||"").startsWith("enabled")})}),qe(this,"renderUnauthHeader",()=>{const{location:e,showDesktopSignupModal:t}=this.props;return Object(Ee.R)(e)?null:Object(p.jsx)(q,{showDesktopSignupModal:t&&(e=>t(e,{source:"login"===e?"login":"defaultSource",container:Re.m}))})}),qe(this,"shouldRenderUnauthHeader",()=>{const{deviceType:e,location:t}=this.props;return"phone"!==e&&!Object(Ee.R)(t)&&!Object(Ee.B)(t)&&!Object(Ee.T)(!1,t)}),qe(this,"headerHeight",e=>{const{interstitialUpsellDismissed:t,location:n}=this.props,{isClientMounted:i,interstitialUpsellHeight:o}=this.state;return i&&e&&(e.interstitialSticky||Object(Ee.w)(n))&&!t&&o||0}),qe(this,"renderMobileUpsell",e=>{const{deprecatedIsSignupModalShown:t,isMobileSignupModalShown:n,location:i}=this.props,{inviteCode:o}=this.state,s=Object(X.d)(this.props)&&!Object(Ee.P)(i)?this.renderOnLandingUpsell(e):null,r=(t||n)&&Object(X.b)(i)?this.renderMobileOnActionUpsell():null;return Object(p.jsx)(De.a,{children:e=>{const t=e||o;return t?Object(p.jsx)($.default,{invite_code:t,children:e=>this.renderMobileInviteUpsells(e,r,s)}):Object(p.jsxs)(T.f,{children:[s,r]})}})})}componentDidMount(){const{country:e,fetchExperiencesForPlacements:t,isBot:n,location:i,setLoggedOutUserInfo:o,showUnauthToastUpsell:r,unauthId:l}=this.props;this.setState({isClientMounted:!0}),t([1000180]);const c=i&&i.search?Object(Ne.k)(i.search):"";this.setState({inviteCode:c&&c.invite_code||""});if((i.search||"").includes("amp_client_id")&&Object(a.a)("amp_duplo_redirect"),!n){Object(Me.f)().then(e=>{o(e)},e=>{o()});let e=et();!e||e.count<1||!e.time?(e={count:1,time:0},tt(e)):(new Date).getTime()-e.time>6e5&&(e={...e,count:e.count+1},tt(e)),Object(G.e)({event_type:7686,view_type:51,aux_data:{unauth_revisitation:e.count,unauth_previously_logged_out:s.a("fba")}}),window.addEventListener("unload",()=>{var e,t;tt({count:null!==(e=null===(t=et())||void 0===t?void 0:t.count)&&void 0!==e?e:1,time:(new Date).getTime()})})}Object(He.a)(e)&&Object(Fe.a)({id:Ue.h,eventName:"Mobile"}),Object(He.f)(e)&&Object(Fe.e)({id:"flashtalking-m-ses",eventName:"Mobile"}),Object(He.c)(e)&&l&&Object(Fe.l)({unauthId:l}),Object(He.d)(e)&&l&&Object(Fe.m)({unauthId:l}),Qe()&&Object(Ce.c)("openUnauthType",Ge.m),Object(X.d)(this.props)&&!Object(Ee.P)(i)&&this.setState({isDefaultToastDisplayed:!1}),r(),Object(X.m)()}static getDerivedStateFromProps(e,t){const{isGoogleOneTapShown:n,location:i,referrer:o,showWashOnly:s,fbSocialUpsellDismissed:r}=t,{location:a,isMobileSignupModalShown:l,mobileSignupModalDispatch:c}=e;let d={};if(e.isGoogleOneTapShown!==t.isGoogleOneTapShown&&(d={...d,isGoogleOneTapShown:e.isGoogleOneTapShown}),e.referrer!==t.referrer&&(d={...d,referrer:e.referrer}),e.location!==t.location&&(d={...d,location:e.location}),!i)return d;if(n!==e.isGoogleOneTapShown&&(d={...d,shouldShowGoogleOneTap:e.isGoogleOneTapShown}),!Object(X.l)(i,a)){!(null==c||!c({type:"UNAUTH_ROUTE_CHANGED",oldLocation:i,newLocation:a,referrer:o}))&&!r&&(d={...d,fbSocialUpsellDismissed:!0})}d={...d,showWashOnly:e.isGoogleOneTapShown&&!!l&&!s};return Object(X.h)(a,i,e.deprecatedIsSignupModalShown,s,r,e.isGoogleOneTapShown,o).hideSignupModal&&e.hideSignupModal(),d}render(){const{children:e,deviceType:t,inAutologinRefactorTreatment:n,interstitialUpsellDismissed:o,locale:s,location:r,platform:a,userHasExitedFromImageViewer:l}=this.props,{isClientMounted:c,isScrollControllerDisplayed:d,shouldShowGoogleOneTap:u}=this.state,h="desktop"!==t,b=this.getAppInstallBannerOptions(),g=Object(Ee.P)(r)||h&&b&&!o&&!Qe()&&(!(s.includes("ar")&&"ios"===a)||this.shouldShowLiteUpsell()),j=this.headerHeight(b),m={paddingTop:j},f=(!this.shouldRenderUnauthHeader()||"tablet"===t)&&g;return Object(p.jsx)(T.f,{children:Object(p.jsxs)(Se.a,{value:{headerHeight:j,userHasExitedFromImageViewer:l},children:[this.shouldRenderUnauthHeader()&&this.renderUnauthHeader(),f&&Object(p.jsx)(Le,{buttonColor:"red",dismissible:(b||{}).interstitialDismissible,handleHide:this.handleInterstitialUpsellHide,isShowing:d,setRef:this.setUnauthInterstitialUpsellRef,showLiteUpsell:this.shouldShowLiteUpsell(),sticky:c&&(b||{}).interstitialSticky,hideMobileUnauthHeader:"tablet"===t}),Object(p.jsx)(T.f,{dangerouslySetInlineStyle:{__style:m},id:"mweb-unauth-container",children:e}),n?Object(p.jsx)(Y.a,{children:Object(p.jsx)(Ye,{})}):Object(p.jsxs)(i.Fragment,{children:[Object(p.jsx)(Y.a,{children:Object(p.jsx)(Ke,{crossDomain:!0,fb:!0,google:!0,history:this.props.history,location:this.props.location,smartlock:!0})}),!u||Object(Ee.G)(r)||Object(Ee.v)(r)||Object(Ee.o)(r)?null:Object(p.jsx)(Y.a,{children:Object(p.jsx)(Je,{handleEmptyCredentials:()=>Object(V.g)(),handleLoginError:()=>Object(V.g)(),handleSignupError:()=>Object(V.g)()})})]}),h&&this.renderMobileUpsell(b)]})})}}function it({children:e,showDesktopSignupModal:t}){const n=Object(H.a)(),s=Object(o.useDispatch)(),r=Object(u.h)(),a=Object(u.i)(),c=Object(We.b)(),d=Object(u.k)(),h=Object(Q.b)("mweb_unauth_show_signup_modal_gb_no_jp"),{anyEnabled:b}=h(),g=function(e){const{userAgentPlatform:t,browserType:n}=Object(o.useSelector)(({session:e})=>e);return!("android"===t&&(1!==n||Object(Ee.A)())&&e.startsWith("/discover/article"))}(a.pathname),{anyEnabled:j}=Object(Q.b)("mweb_lex_autologin_refactor_aa")();Object(i.useEffect)(()=>{c&&setTimeout(()=>{c.load(new URL("login.js","file://"))},500)},[]);const m=Object(o.useSelector)(e=>e.experiments.active),f=Object(o.useSelector)(e=>e.session.country),O=Object(o.useSelector)(e=>e.session.canUseNativeApp&&"android-twa"!==e.session.pwaType),_=Object(o.useSelector)(e=>e.session.locale),w=Object(o.useSelector)(e=>e.session.userAgentPlatform),x=Object(o.useSelector)(e=>e.session.isSeoBot),S=Object(o.useSelector)(e=>e.session.unauthInterstitialDismissed),y=Object(o.useSelector)(e=>e.session.isSignupModalShown),v=Object(o.useSelector)(e=>e.session.isUnauthToastUpsellDisplayed),T=Object(o.useSelector)(e=>e.session.isGoogleOneTapShown),C=Object(o.useSelector)(e=>Object(Pe.b)(e.session.referrer)),E=Object(o.useSelector)(e=>e.session.unauthId),I=Object(o.useSelector)(e=>e.session.socialCollabGroupBoardPath),L=Object(o.useSelector)(e=>e.session.userAgent),k=Object(o.useSelector)(e=>e.session.unauthSavePinId),A=Object(i.useCallback)(()=>s(Object(V.c)()),[s]),U=Object(i.useCallback)(()=>s(Object(V.l)()),[s]),M=Object(i.useCallback)(e=>s(Object(V.t)(e)),[s]),P=Object(i.useCallback)(e=>s(Object(V.x)(e)),[s]),D=Object(i.useCallback)(()=>s(Object(V.p)()),[s]),B=Object(i.useCallback)(()=>s(Object(V.N)()),[s]),R=Object(i.useCallback)(()=>s(Object(V.g)()),[s]),N=Object(i.useCallback)(e=>s(Object(l.h)(e)),[s]),F=Object(i.useCallback)(()=>(s(Object(J.a)("mweb_app_install_banner_along_registration"))||"").startsWith("enabled"),[s]),z=Object(ee.b)(),G=Object(ee.c)(),[W,q]=Object(i.useState)(!1),$=Object(i.useRef)(a);return Object(i.useEffect)(()=>{q(Object(Ee.z)($.current)&&!Object(Ee.z)(a)),$.current=a},[a]),Object(i.useEffect)(()=>{const e=a&&a.search?Object(Ne.k)(a.search):"";e&&"1"===e.ur&&(null==G||G({type:"START_DISMISSIBLE_MODAL_EXPERIENCE"}))},[G,a]),Object(i.useEffect)(()=>{null==G||G({type:"UNAUTH_SESSION_STARTED",location:a})},[]),Object(p.jsx)(K.a,{id:1000180,children:({experience:i})=>Object(p.jsx)(nt,{activeExperiments:m,appInstallBannerAlongRegister:F,canUpsellNativeApp:O,country:f,deviceType:n,experience:i,fetchExperiencesForPlacements:N,hideAppUpsell:A,hideGoogleOneTap:R,hideSignupModal:U,hideUnauthToastUpsell:D,history:r,interstitialUpsellDismissed:S,inAutologinRefactorTreatment:j,isBot:x,isGoogleOneTapShown:T||!1,deprecatedIsSignupModalShown:y||!1,isUnauthToastUpsellDisplayed:v||!1,loader:c,locale:_,location:a,platform:w,referrer:C,routeMatch:d,setLoggedOutUserInfo:M,setSessionData:P,showDesktopSignupModal:t,signUpModalGbNoJPIsEnabled:b,shouldShowUpsell:g,showUnauthToastUpsell:B,socialCollabGroupBoardPath:I,userAgent:L,showUnauthSaveSignupModal:!!k,isMobileSignupModalShown:z,mobileSignupModalDispatch:G,unauthId:E,userHasExitedFromImageViewer:W,children:e})})}},"2hay":function(e,t,n){n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return a})),n.d(t,"g",(function(){return l})),n.d(t,"f",(function(){return c})),n.d(t,"d",(function(){return d})),n.d(t,"e",(function(){return u})),n.d(t,"i",(function(){return p})),n.d(t,"h",(function(){return h})),n.d(t,"c",(function(){return b}));var i=n("0K1N"),o=n("37no");const s="274266067164",r=["picture.type(large)","id","first_name","last_name","email","gender","birthday"],a=["public_profile","email","user_likes","user_birthday","user_friends"],l=()=>{"undefined"!=typeof window&&window.FB&&window.FB.init({appId:s,status:!0,xfbml:!0,version:"v2.7"})},c=e=>Object(o.c)(Object(i.a)(e),o.a.FACEBOOK).then(l),d=()=>new Promise(e=>{"undefined"!=typeof window&&window.FB&&window.FB.getLoginStatus(e)}),u=(e,t={},n)=>new Promise((i,o)=>{if("connected"===e.status){n&&n("success");const{authResponse:{userID:o,accessToken:s}}=e,a={facebook_id:o,facebook_token:s,facebook_autologin:t.autologin||!1},l="/me?fields="+r.join(",");window.FB.api(l,e=>{i({creds:a,data:{...e,...a,...e.picture&&!e.picture.data.is_silhouette?{image_url:e.picture.data.url}:{}}})})}else{const t=e.status||"unknown";n&&n("failure."+t),o({status:t})}}),p=(e,t)=>{const n=e.data;e.isTrusted&&"string"==typeof n&&0===n.indexOf("_FB_")&&-1!==n.indexOf("type=login_button_dialog_open")&&t&&t("facebook_connect.login_button_dialog_open")},h=()=>new Promise(e=>{window.FB.login(e,{scope:a.join(",")})}).then(u),b=e=>new Promise((t,n)=>{window.FB.api("/me/permissions",i=>{const o=i.data;if(o){const n=o.find(t=>t.permission===e&&"granted"===t.status);return t({hasPerm:!!n})}return n(Error("Failed to call facebook to get permission"))})})},"37no":function(e,t,n){n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a}));var i=n("7w6Q");const o=.01,s=Object.freeze({OTHER:0,FACEBOOK:1,GPLUS_ONE:2,GSI:3});function r(e){return new Promise((t,n)=>{if(document.querySelector(`script[src="${e}"]`))return void t();const i=document.createElement("script");i.src=e,i.async=!0,i.addEventListener("load",t),i.addEventListener("error",n),document.getElementsByTagName("head")[0].appendChild(i)})}function a(e,t=s.OTHER,n=!1){const r=n?"web":"mweb";return new Promise((n,a)=>{if(document.querySelector(`script[src="${e}"]`)){let e=0;if(t===s.GPLUS_ONE)if(window.gapi)n();else{const t=setInterval(()=>{window.gapi||20===e?(clearInterval(t),n()):(e+=1,i.a.increment(`${r}.loadScript.gplus_one.tries_${e}`,o))},100)}else if(t===s.FACEBOOK)if(window.FB)n();else{const t=setInterval(()=>{window.FB||20===e?(clearInterval(t),n()):(e+=1,i.a.increment(`${r}.loadScript.facebook.tries_${e}`,o))},100)}else if(t===s.GSI)if(window.google)n();else{const t=setInterval(()=>{window.google||20===e?(clearInterval(t),n()):(e+=1,i.a.increment(`${r}.loadScript.gsi.tries_${e}`,o))},100)}else n()}else{const t=document.createElement("script");t.src=e,t.async=!0,t.addEventListener("load",n),t.addEventListener("error",a),document.getElementsByTagName("head")[0].appendChild(t)}})}},"4NNh":function(e,t,n){n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return s}));n("kmwA");const i="https://accounts.google.com/gsi/client",o=e=>{e&&e.cancelLastOperation&&e.cancelLastOperation().then(()=>{})},s=e=>{return JSON.parse(decodeURIComponent(atob((t=e.split(".")[1],(t||"").replace(/-/g,"+").replace(/_/g,"/"))).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join("")));var t}},"4NbJ":function(e,t,n){n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"e",(function(){return p})),n.d(t,"d",(function(){return h}));var i=n("kmwA"),o=n("bKKl"),s=n("37no");const r="postmessage",a="profile email",l=e=>Object(s.c)("https://accounts.google.com/gsi/client",s.a.GSI).then(()=>{const t=window.google,n=t&&t.accounts&&t.accounts.id;return n?new Promise((t,o)=>{n.initialize({client_id:i.a.settings.GPLUS_CLIENT_ID,auto_select:!0,callback:n=>e({resolve:t,reject:o,response:n}),cancel_on_tap_outside:!1,context:"use"}),n.prompt()}):Promise.reject(new Error("no_account_found"))});function c(e){const t={scope:a,client_id:"694505692171-31closf3bcmlt59aeulg2j81ej68j6hk.apps.googleusercontent.com",app_package_name:"com.pinterest",access_type:"offline",cookie_policy:"single_host_origin"},n=function(t){e&&e(t)};return new Promise((e,i)=>{Object(s.c)("https://apis.google.com/js/client:platform.js",s.a.GPLUS_ONE).then(()=>{n("google_script_load"),"undefined"!=typeof window&&window.gapi?window&&window.gapi&&window.gapi.auth2?(n("google_script_init_onuse"),window.gapi.auth2.init(t).then(t=>{n("google_init_success"),e(t)},({error:e})=>{n("google_init_error"),i("init_onuse_"+e)})):(n("google_script_init_exists"),window.gapi.load("auth2",{callback:()=>{n("google_auth2_load_complete"),window.gapi.auth2.init(t).then(t=>{n("google_init_success"),e(t)},({error:e})=>{n("google_init_error"),i("init_exists_"+e)})},onerror:({error:e})=>{n("google_auth2_script_load_error"),i(e)},timeout:15e3,ontimeout:()=>{n("google_auth2_script_load_timeout"),i("timeout")}})):n("google_init_error")})})}function d(e,t,n,i=!1){return function(e,t,n,i=!1){return new Promise((s,l)=>{if(i&&Object(o.a)())return void l();const d=function(e){n&&n(e)};d("google_button_init"),c(n).then(()=>{d("google_sdk_load"),"undefined"!=typeof window&&window.gapi?t.signin2.render(e,{scope:a,onsuccess:e=>{d("google_button_success");const t=e.getAuthResponse(!0),n={data:{gplus_id_token:t.id_token,gplus_access_token:t.access_token,gplus_expires_at:t.expires_at,gplus_autologin:i||!1},signupOptions:{gplus_code:"",gplus_id_token:t.id_token,gplus_redirect_uri:r}};s(n)},onfailure:()=>{d("google_button_failure"),l("gapi_signin2_render_error")}}):d("google_init_error")},e=>{d("google_auth2_sdk_init_error"),l(e)})})}(e,t,n,i)}function u(){if("undefined"==typeof window)return null;const e=window.google;return e&&e.accounts&&e.accounts.id}function p(e,t){if("undefined"==typeof window)return;const n=u();if(n&&e.current){const t=e.current.offsetWidth;n.renderButton(e.current,{size:"large",shape:"pill",text:"continue_with",theme:"outline",width:t+"px"})}else t("not_initialized")}function h(e,t,n){Object(s.b)("https://accounts.google.com/gsi/client").then(()=>{if("undefined"==typeof window)return;const o=u();o&&(o.initialize({client_id:i.a.settings.GPLUS_CLIENT_ID,callback:n,cancel_on_tap_outside:!1,context:"use"}),p(e,t))})}},"75Yz":function(e,t,n){n.r(t),n.d(t,"default",(function(){return r}));var i=n("q1tI"),o=n("eOdZ");const s={};class r extends i.Component{constructor(...e){var t,n,i;super(...e),t=this,n="state",i={invite:s[this.props.invite_code]||null,loaded:this.props.invite_code in s},n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}componentDidMount(){const{invite_code:e}=this.props;o.a.create("InviteCodeMetadataResource",{invite_code:e}).callGet().then(t=>{if(t&&t.resource_response){const n=t.resource_response.data;s[e]=n,this.setState({invite:n,loaded:!0})}}).catch(()=>{this.setState({invite:null,loaded:!0})})}render(){const{invite:e,loaded:t}=this.state;return t?this.props.children(e):null}}},"B/oJ":function(e,t,n){n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return j}));var i=n("q1tI"),o=n("/MKj"),s=n("9Hil"),r=n("CpRl"),a=n("k1Bv"),l=n("o+5w"),c=n("yweb"),d=n("ulr2"),u=n("PmFr"),p=n("n6mq"),h=n("nKUr");const b=e=>new Set([...u.c,...u.b,...u.p]).has(e),g={default:3e3,email:3e3,facebook:5e3,google:4e3,gtap:4500};function j({isReducedHeader:e,platform:t}){const n=Object(c.c)(),u=Object(o.useDispatch)(),j=Object(o.useSelector)(({session:e})=>e.country);Object(i.useEffect)(()=>{"gtap"!==t&&u(Object(d.g)())},[]);const m=b(j);return Object(h.jsx)(i.Fragment,{children:m?Object(h.jsx)(l.a,{viewType:10,viewParameter:259,children:Object(h.jsxs)(p.f,{position:"fixed",top:!0,left:!0,right:!0,bottom:!0,width:"100%",color:"white",children:[Object(h.jsx)(s.a,{color:"darkGray",duration:g[t],finalProgress:95}),Object(h.jsxs)(p.f,{direction:"column",display:"flex",height:"100%",children:[Object(h.jsxs)(p.f,{margin:10,children:[Object(h.jsx)(p.u,{overflow:"normal",size:e?"md":"lg",children:n._("Your account is being created!","account created heading","account created heading")}),Object(h.jsx)(p.cb,{overflow:"normal",children:n._("You can now save ideas, get personalized recommendations, and more","loading state description while waiting for any sign up registration to complete","loading state description while waiting for any sign up registration to complete")})]}),Object(h.jsx)(p.f,{alignItems:"center",display:"flex",flex:"grow",justifyContent:"center",children:Object(h.jsx)(r.a,{delayOffset:-5,xRadiusAdjustment:40,yRadiusAdjustment:40,children:Object(h.jsx)(p.f,{alignItems:"center",color:"lightWash",direction:"column",display:"flex",height:120,justifyContent:"end",overflow:"hidden",rounding:"circle",width:120,children:Object(h.jsx)(p.v,{accessibilityLabel:n._("Loading","Loading state for any sign up registration","Loading state for any sign up registration"),color:"gray",icon:"person",size:"90"})})})})]})]})}):Object(h.jsx)(a.a,{})})}},CpRl:function(e,t,n){var i=n("q1tI"),o=n("ihsa"),s=n("n6mq"),r=n("4lNu");const a={yellow:"#FAB904",orange:"#FF6400",green:"#0FA573",blue:"#0074e8",purple:"#B469EB"},l="DelightfulBubbles__",c=["DelightfulBubbles__fadeIn {\n  to {\n    opacity: 1;\n  }\n}\n","DelightfulBubbles__growShrink {\n  0% {\n    transform: scale(0);\n  }\n  50% {\n    transform: scale(1);\n  }\n  100% {\n    transform: scale(0);\n  }\n}\n","DelightfulBubbles__swirl {\n  0% {\n    transform: rotate(0deg) translateX(-50%);\n  }\n  100% {\n    transform: rotate(-360deg) translateX(-50%);\n  }\n}\n",...Object.keys(a).map(e=>{const t=((e,t)=>{const n=e.length,i=e.indexOf(t)+1>=n?0:e.indexOf(t)+1;return e[i]})(Object.keys(a),e);return`${l}colorChange_${e} {\n      0% {\n        background-color: ${a[e]};\n      }\n      50% {\n        background-color: ${a[t]};\n      }\n    }\n    `})],d=Object(r.a)(c);var u=n("nKUr");function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const h=e=>{const{delay:t,diameter:n,height:i,initialColor:o,width:r,xOffset:c,yOffset:d}=e,p=((e,t,n,i,o,s,r,c)=>({bubblePositionStyles:{position:"absolute",marginLeft:s/2-o+"px",marginTop:n/2-o+"px",left:r+"px",top:c+"px"},bubbleSwirlStyles:{animation:`${l}swirl 6s ease-in-out ${e}s infinite forwards`,WebkitAnimation:`${l}swirl 6s ease-in-out ${e}s infinite forwards`},bubbleGrowShrinkStyles:{transform:"scale(0)",WebkitTransform:"scale(0)",animation:`${l}growShrink 6s ease-in-out ${e}s infinite alternate`,WebkitAnimation:`${l}growShrink 6s ease-in-out ${e}s infinite alternate`},bubbleShapeStyles:{height:t+"px",width:t+"px",borderRadius:"50%",backgroundColor:a[i],opacity:0,animation:`${l}colorChange_${i} 12s steps(1, start) ${e}s infinite forwards,\n      ${l}fadeIn 3s linear ${e}s 1 forwards`,WebkitAnimation:`${l}colorChange_${i} 12s steps(1, start) ${e}s infinite forwards,\n      ${l}fadeIn 3s linear ${e}s 1 forwards`}}))(t,n,i,o,Math.floor(n/2),r,c,d);return Object(u.jsx)(s.f,{dangerouslySetInlineStyle:{__style:p.bubblePositionStyles},children:Object(u.jsx)(s.f,{dangerouslySetInlineStyle:{__style:p.bubbleSwirlStyles},children:Object(u.jsx)(s.f,{dangerouslySetInlineStyle:{__style:p.bubbleGrowShrinkStyles},children:Object(u.jsx)(s.f,{dangerouslySetInlineStyle:{__style:p.bubbleShapeStyles}})})})})};class b extends i.Component{constructor(...e){super(...e),p(this,"state",{isInitialized:!1})}componentDidMount(){this.requestAnimationFrameId=window.requestAnimationFrame(()=>{this.setState({isInitialized:!0})})}shouldComponentUpdate(e,t){return!e.numBubbles===this.props.numBubbles||!t.isInitialized===this.state.isInitialized}getSize(){const{width:e,height:t}=this.props;return void 0!==e&&void 0!==t?{width:e,height:t}:this.containerElement?{height:this.containerElement.offsetHeight,width:this.containerElement.offsetWidth}:{height:void 0,width:void 0}}createBubbles(e,t){const{bubbleSize:n,delayFactor:i,delayOffset:o,numBubbles:s,xRadiusAdjustment:l,yRadiusAdjustment:c}=this.props,d=e+2*c,p=t+2*l,b=[],g=Object.keys(a);for(let a=0;a<s;a+=1){const s=n+Object(r.c)(-4,4),l=g[a%g.length],{x:c,y:j}=Object(r.b)(d,p);b.push(Object(u.jsx)(h,{delay:a*i+o,diameter:s,initialColor:l,xOffset:c,yOffset:j,height:e,width:t},a))}return b}render(){const{height:e,width:t}=this.getSize();return Object(u.jsxs)(s.f,{height:e,width:t,position:"relative",children:[Object(u.jsx)(o.a,{unsafeCSS:d}),Object(u.jsxs)(s.f,{position:"absolute",ref:e=>this.containerElement=e,children:[this.state.isInitialized&&this.createBubbles(e||0,t||0),Object(u.jsx)(s.f,{position:"relative",children:this.props.children})]})]})}}p(b,"defaultProps",{bubbleSize:16,numBubbles:10,xRadiusAdjustment:0,yRadiusAdjustment:0,delayFactor:1,delayOffset:0});t.a=b},DzJC:function(e,t,n){var i=n("sEfC"),o=n("GoyQ");e.exports=function(e,t,n){var s=!0,r=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(n)&&(s="leading"in n?!!n.leading:s,r="trailing"in n?!!n.trailing:r),i(e,t,{leading:s,maxWait:t,trailing:r})}},IAo4:function(e,t,n){n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return r}));const i=/^(0[1-9]|1[012])\/(0[1-9]|[12][0-9]|3[01])\/((19|20)[0-9]{2})$/,o=/^(19|20)[0-9]{2}$/,s=e=>{if(i.test(e)||o.test(e)){return new Date(e).getTime()/1e3}return-1},r=(e,t)=>{const n=new Date;if(i.test(e)){const i=new Date(n.getFullYear()-t,n.getMonth(),n.getDate());return new Date(e)<=i}if(o.test(e)){const i=n.getFullYear()-t-1;return new Date(e).getFullYear()<=i}return!1}},J6c4:function(e,t,n){n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o}));const i=["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto","Oxygen-Sans","Ubuntu","Cantarell",'"Fira Sans"','"Droid Sans"','"Helvetica Neue"',"Helvetica",'" Pro W3"','"Hiragino Kaku Gothic Pro"',"","Meiryo",'" "',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),o=["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto","Oxygen-Sans","Ubuntu","Cantarell",'"Fira Sans"','"Droid Sans"','"Helvetica Neue Bold"',"Helvetica",'" Pro W3"','"Hiragino Kaku Gothic Pro"',"","Meiryo",'" "',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(",")},MH4Q:function(e,t,n){n.d(t,"a",(function(){return L}));var i=n("q1tI"),o=n("/MKj"),s=n("jZDM"),r=n("28DW"),a=n("yweb"),l=n("n6mq"),c=n("ujsJ"),d=n("QAzJ"),u=n("pLLR"),p=n("EC67"),h=n("F2ZA"),b=n("nKUr");function g(){const e=Object(a.c)(),t=Object(p.k)(),{country:n,isAuthenticated:i,isBot:o,locale:g,origin:j}=Object(u.d)(),m=Object(s.a)(j,!0).hostname||"",f=o?Object(h.f)(m)||"US":n,O=Object(h.h)(f,g),_=Object(d.b)("mweb_jp_bug_audit_unauth"),w=[];O&&w.push({text:e._("Today","unauth.header.tabs.today","label for today tab"),href:"/today/"}),w.push({text:!i&&_().anyEnabled?e._("Explore ideas","unauth.header.tabs.ideas.jp","label for jp ideas hub"):e._("Explore","unauth.header.tabs.ideas","label for ideas hub"),href:"/ideas/"});let x=-1;return t.path.startsWith("/today/")?x=w.findIndex(e=>"/today/"===e.href):t.path.startsWith("/ideas/")&&(x=w.findIndex(e=>"/ideas/"===e.href)),Object(b.jsx)(l.f,{role:"tablist",children:Object(b.jsx)(c.a,{activeTabIndex:x,onChange:({activeTabIndex:e})=>{e>-1&&("/today/"===w[e].href?Object(r.a)("unauth.header.hubtabs.today.click"):"/ideas/"===w[e].href&&Object(r.a)("unauth.header.hubtabs.explore.click"))},size:"lg",tabs:w})})}var j=n("rYoy"),m=n("GI6b"),f=n("TPPM"),O=n("E8d4"),_=n("XTA5"),w=n("+b91"),x=n("Zswh"),S=n("Rfw2");function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const v=Object(i.lazy)(()=>n.e(598).then(n.bind(null,"ehTd")));function T({pathname:e,search:t}){const n=e.includes("/password/reset");if(!t||n)return"";const i=t.substring(1);try{const e=JSON.parse('{"'+i.replace(/&/g,'","').replace(/=/g,'":"')+'"}',(e,t)=>""===e?t:decodeURIComponent(t));if(e.q)return e.q}catch(o){return""}return""}class C extends i.PureComponent{constructor(e){super(e),y(this,"onResize",()=>{this.setState({windowHeight:window.innerHeight})}),y(this,"handleTypeaheadItemHover",e=>{this.setState({hoverItem:e})}),y(this,"handleTypeaheadItemSelected",(e,t)=>{const n=Object(S.e)(t),i=e.query||"";let o=e.url;if(o){const t={eq:n,etslf:Date.now()-this._lastFocused};o=Object(m.a)(o,t);const s=e.type,r=Object(S.d)({type:s,query:i,index:e.resultIndex});this.setState({focused:!1,hoverItem:void 0,text:i,query:i}),o+=Object(S.b)({queryStates:r}),this.navigate(i,o)}}),y(this,"handleTypeaheadMouseOut",()=>{this.setState({hoverItem:void 0})}),y(this,"handleBlur",()=>{this.props.onBlur&&this.props.onBlur(),this.setState({focused:!1})}),y(this,"handleClick",()=>{this.setState({focused:!0})}),y(this,"handleFocus",()=>{Object(r.a)("unauth.search_box.click.focus"),Object(r.g)("focus_search_box",!0),this._lastFocused=Date.now(),this.setState({focused:!0})}),y(this,"handleKeyDown",e=>{const t=this.state.hoverItem;switch(e.key){case"Enter":this.handleSubmit(e);break;case"Escape":this.handleBlur();break;case"ArrowUp":case"ArrowDown":e.preventDefault();const n="ArrowUp"===e.key,i=this.state.emptySuggestions,o=!this.state.text&&i&&i?i:this.state.typeaheadSuggestions;let s;s=t?o.indexOf(t)+(n?-1:1):n?o.length-1:0,this.handleTypeaheadItemHover(o[s])}}),y(this,"handleSubmit",e=>{e.preventDefault(),this.state.hoverItem?this.handleTypeaheadItemSelected(this.state.hoverItem,this.state.text):this.handleTypedSubmission(e)}),y(this,"handleTypeaheadSuggestionsChange",e=>{this.setState({typeaheadSuggestions:e})}),y(this,"handleTypedSubmission",e=>{const t=this.state.text.trim();if(""===t)return;const n=encodeURIComponent(t),i=this.state.currentScope||"pins";let o="recent_week"===this.state.currentBoost?"/search/pins/recent/?q="+n:`/search/${i}/?q=${n}`;const s=Object(S.d)({type:S.a.USER_INPUT,query:t,index:0});o+="&rs=typed",o+=Object(S.b)({queryStates:s});const r=Object(S.e)(t);this.setState({text:r,query:r}),this.handleBlur(),this.navigate(t,o)}),y(this,"handleTextChange",e=>{this.state.hoverItem?this.setState({hoverItem:void 0,text:e}):this.setState({text:e})}),y(this,"updateEmptySuggestions",e=>{this.setState({emptySuggestions:e})}),y(this,"clearAndFocusSearchBox",()=>{this.setState({text:"",query:"",focused:!0})});const t=T(e.location);this.state={currentBoost:"",currentScope:"",emptySuggestions:[],focused:!!e.initialFocus,hoverItem:void 0,prevOriginalQuery:e.initialText||t,query:t,text:t||e.initialText||"",typeaheadSuggestions:[],windowHeight:void 0}}componentDidMount(){this.onResize(),window.addEventListener("resize",this.onResize)}static getDerivedStateFromProps({initialText:e,location:t},{prevOriginalQuery:n}){const i=e||T(t);return i!==n?{prevOriginalQuery:i,currentBoost:"",text:i,query:i,currentScope:"",hoverItem:void 0}:{}}componentWillUnmount(){window.removeEventListener("resize",this.onResize)}logSearchPinNavigateClick(){this.props.logContextEvent({component:43,element:227,event_type:101,view_type:2,view_parameter:43}),Object(r.a)("unauth.search_box.search")}navigate(e,t){this.logSearchPinNavigateClick(),Object(f.a)(t,!1),setTimeout(()=>{Object(r.g)("searchbox_query",!0)},0)}render(){const{headerOffsetTop:e,i18n:t}=this.props,{focused:n,hoverItem:i,query:o,text:s,windowHeight:r}=this.state,a=n&&o?"":t._("Search for easy dinners, fashion, etc.");let c;if(r&&this._form&&this._form.getBoundingClientRect){c=r-14-this._form.getBoundingClientRect().bottom}const d=L+e;return Object(b.jsx)(l.f,{display:"flex",flex:"grow",children:Object(b.jsxs)(l.f,{display:"flex",flex:"grow",children:[n&&Object(b.jsx)(l.f,{position:"fixed",right:!0,bottom:!0,left:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0,0,0,0.4)",top:d+"px"}}}),Object(b.jsx)("form",{action:"/search/pins/",method:"get",name:"search",onSubmit:this.handleSubmit,ref:e=>{this._form=e},style:{flexGrow:"1"},children:Object(b.jsxs)(l.f,{display:"block",position:"relative",width:"100%",children:[Object(b.jsxs)(l.f,{alignItems:"center",borderStyle:"lg",color:"white",display:"flex",height:48,position:"relative",rounding:6,children:[Object(b.jsx)("em",{}),Object(b.jsx)(l.f,{flex:"none",marginStart:4,marginEnd:2,children:Object(b.jsx)(l.v,{accessibilityLabel:t._("search","accessible label for search icon","accessible label for search icon"),icon:"search",size:16})}),Object(b.jsxs)(l.f,{alignItems:"center",display:"flex",flex:"grow",overflow:"hidden",children:[Object(b.jsx)(_.a,{dataTestId:"search-input",isFocused:n,name:"q",onBlur:this.handleBlur,onChange:this.handleTextChange,onClick:this.handleClick,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,placeholder:a,value:i&&i.label||s}),s&&Object(b.jsx)(l.f,{marginEnd:1,children:Object(b.jsx)(l.w,{accessibilityLabel:t._("cancel","accessible label for cancel icon","accessible label for cancel icon"),icon:"clear",onClick:this.clearAndFocusSearchBox,size:"md"})})]})]}),Object(b.jsx)(O.a,{children:Object(b.jsx)(v,{focused:n,hoverItem:this.state.hoverItem,maxHeight:c,onHover:this.handleTypeaheadItemHover,onTypeaheadItemSelected:this.handleTypeaheadItemSelected,onTypeaheadMouseOut:this.handleTypeaheadMouseOut,onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,typeaheadSuggestions:this.state.typeaheadSuggestions,updateEmptySuggestions:this.updateEmptySuggestions,value:s})})]})})]})})}}function E(e){const t=Object(x.a)(),n=Object(a.c)(),{headerOffsetTop:i=0}=Object(w.b)(),o=Object(p.i)();return Object(b.jsx)(C,{...e,headerOffsetTop:i,i18n:n,location:o,logContextEvent:t})}var I=n("isp9");const L=80,k=Object(i.lazy)(()=>n.e(675).then(n.bind(null,"+gsX"))),A=Object(i.forwardRef)(({enableSettingsFlyout:e,onPrimaryButtonClick:t,onLoginButtonClick:n,primaryButtonText:s},c)=>{const[u,h]=Object(i.useState)(!1),m=Object(a.c)(),f=Object(o.useSelector)(({session:e})=>e&&e.isTablet),O=Object(o.useSelector)(({session:e})=>e&&e.isMobile),_=Object(i.useRef)(null),w=Object(i.useRef)(null);Object(i.useEffect)(()=>{if(e){const e=e=>{var t,n;null!==(t=_.current)&&void 0!==t&&t.contains(e.target)||null!==(n=w.current)&&void 0!==n&&n.contains(e.target)||h(!1)};return window.addEventListener("mousedown",e),function(){window.removeEventListener("mousedown",e)}}},[]);const x=Object(d.b)("mweb_audience_growth_unauth_save_v2"),S=Object(d.b)("web_unauth_save_plp"),y=Object(p.i)(),v=Object(o.useSelector)(({session:e})=>e&&e.isAuthenticated),T=!f&&!O,C=!v&&Object(I.M)(y)&&!T&&x().anyEnabled,A=!v&&Object(I.M)(y)&&(f&&C||T&&S().anyEnabled);return Object(b.jsxs)(l.f,{alignItems:"center",color:"white",direction:"row",display:"flex",height:L,justifyContent:"between",padding:4,ref:c,width:"100%",children:[Object(b.jsxs)(l.f,{alignItems:"center",direction:"row",display:"flex",children:[Object(b.jsx)(l.B,{href:"/",target:"self",inline:!0,tapStyle:"compress",rounding:"pill",hoverStyle:"none",onClick:({disableOnNavigation:e})=>e(),children:Object(b.jsxs)(l.f,{display:"flex",alignItems:"center",direction:"row",paddingX:3,children:[Object(b.jsx)(l.v,{accessibilityLabel:m._("Pinterest","Pinterest logo","Pinterest logo"),icon:"pinterest",size:24,color:"red"}),!f&&Object(b.jsx)(l.f,{marginStart:1,dangerouslySetInlineStyle:{__style:{letterSpacing:"-1px"}},children:Object(b.jsx)(l.u,{size:"sm",color:"red",overflow:"normal",accessibilityLevel:2,children:m._("Pinterest","Company name","Company name")})})]})}),Object(b.jsx)(g,{})]}),Object(b.jsx)(l.f,{display:"none",mdDisplay:"block",flex:"grow",paddingX:2,children:Object(b.jsx)(E,{})}),Object(b.jsxs)(l.f,{display:"flex",alignItems:"center",direction:"row",flex:"none",children:[Object(b.jsx)(l.f,{marginEnd:2,"data-test-id":"loginButton",children:Object(b.jsx)(l.g,{text:m._("Log in","Label for log in button","Label for log in button"),onClick:e=>{n(e.event)},size:"lg",color:A?"transparent":"gray",inline:!0})}),Object(b.jsx)(l.f,{"data-test-id":"signupButton",children:Object(b.jsx)(l.g,{text:s,onClick:e=>{t(e.event)},color:A?"gray":"red",size:"lg",inline:!0})}),e&&Object(b.jsxs)(i.Fragment,{children:[Object(b.jsx)(l.f,{ref:w,children:Object(b.jsx)(l.f,{display:"flex",marginStart:2,marginTop:3,marginBottom:3,justifyContent:"center","data-test-id":"setting-button",children:Object(b.jsx)(l.w,{accessibilityLabel:m._("Setting button","Text for the setting button in the header","Text for the setting button in the header"),icon:"arrow-down",size:"xs",onClick:({event:e})=>{e.preventDefault(),e.stopPropagation(),Object(r.a)("unauth_web.unauth_header.setting_button.click"),Object(r.g)("click_header_setting"),h(!u)}})})}),u&&Object(b.jsx)(j.a,{fallback:Object(b.jsx)("div",{}),children:Object(b.jsx)(l.f,{ref:_,children:Object(b.jsx)(k,{anchor:w.current})})})]},"settingButton")]})]})});A.displayName="UnauthHeader";t.b=A},Rfw2:function(e,t,n){n.d(t,"a",(function(){return s})),n.d(t,"e",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return d}));var i=n("T0g9");const o=["and","that","but","or","as","if","when","than","because","while","where","after","so","though","since","until","whether","before","although","nor","like","once","unless","now","except","the","a","an","san","for","in","with"],s={AUTO_COMPLETE_DEFAULT:"query",AUTO_COMPLETE_HASHTAG:"hashtag",AUTO_COMPLETE_RECENT_SEARCH:"recent_query",AUTO_COMPLETE_RECOMMENDED_SEARCH:"recommended_query",AUTO_COMPLETE_TRENDING:"trending",TYPO_AUTO_CORRECT_ORIGINAL:"typo_auto_original",USER_INPUT:"typed",SEARCH_GUIDE:"add_refine"};function r(e){return(e||"").trim().replace(/\s+/g," ")}function a({type:e,term:t="",index:n}){switch(e){case s.USER_INPUT:case s.AUTO_COMPLETE_HASHTAG:case s.TYPO_AUTO_CORRECT_ORIGINAL:return`${t}|${e}`;case s.AUTO_COMPLETE_DEFAULT:return`${t}|autocomplete|${n}`;case s.AUTO_COMPLETE_RECENT_SEARCH:return`${t}|recentsearch|${n}`;case s.AUTO_COMPLETE_TRENDING:return`${t}|trending|${n}`;case s.AUTO_COMPLETE_RECOMMENDED_SEARCH:return`${t}|recommended|${n}`;case s.SEARCH_GUIDE:return`${t}|guide|word|${n}`;default:return""}}function l({queryStates:e}){return 0===e.length?"":"&"+Object(i.a)({term_meta:e.map(e=>a(e))})}function c(e){if(e){const t=e.trim().split(/\s+/);return t.find(e=>o.includes(e.toLowerCase()))?[e]:t}return[]}function d({type:e,query:t="",index:n}){switch(e){case s.USER_INPUT:case s.AUTO_COMPLETE_HASHTAG:case s.TYPO_AUTO_CORRECT_ORIGINAL:return c(t).map(t=>({index:n,term:t,type:e}));case s.AUTO_COMPLETE_RECENT_SEARCH:case s.AUTO_COMPLETE_RECOMMENDED_SEARCH:case s.AUTO_COMPLETE_TRENDING:case s.AUTO_COMPLETE_DEFAULT:return c(t).map(t=>({term:t,type:e,index:n}));default:return[]}}},UIBZ:function(e,t,n){n.d(t,"a",(function(){return U})),n.d(t,"b",(function(){return E})),n.d(t,"d",(function(){return L})),n.d(t,"c",(function(){return A}));var i=n("q1tI"),o=n("/MKj"),s=n("7w6Q"),r=n("NymR"),a=n("RNo4"),l=n("E/Zv"),c=n("vtuW"),d=n("isp9");var u=[()=>Object(c.a)("msmrsfda")?"exit":"continue",({reduxState:e})=>{const{isUnauthSharingModalsShown:t}=e;return t?"exit":"continue"},({experiments:e})=>{if(Object(d.A)()){const{mWebInstagramBrowserSwitchExperiment:t}=e;if(t().anyEnabled)return Object(c.a)("msmrsfiiab")||(s.a.increment("mobile_signup_modal.rules.suppress_for_instagram_in_app_browser"),Object(c.c)("msmrsfiiab","1")),"exit"}return"continue"},({state:e,action:t,experiments:n,timestampMS:i})=>{if("UNAUTH_ROUTE_CHANGED"===t.type){const{oldLocation:o,newLocation:s,referrer:r}=t;if(Object(l.c)(s,o)&&!Object(d.ab)(s)&&!Object(l.o)(r)){const{mWebSignupModalInitialDelayExperiment:t}=n,{group:o}=t(),s=o.match(/^enabled_initial_delay_(\d+)_min/);if(s){const t=s[1],n=60*parseInt(t,10)*1e3,{sessionStartTimestampMS:o}=e;if(i-o<n)return"continue"}const{lastShownTimestampMS:r}=e;if(r){const{mWebSignupModalDismissibleCooldownExperiment:e}=n,{group:t}=e(),o=t.match(/^enabled_dismissible_cooldown_(\d+)_min/);if(o){const e=o[1];if(i-r<60*parseInt(e,10)*1e3)return"continue"}}return"show signup modal"}}return"continue"},({state:e,action:t})=>{if("UNAUTH_MAIN_PIN_CLICKTHROUGH"===t.type){const{prioritizeOverNativeAppUpsellTimestamp:t}=e,n=e=>Date.now()-e<=r.c;if(t&&n(t)&&Object(l.b)())return"show signup modal"}else if("UNAUTH_MAIN_PIN_CLICKTHROUGH_DID_NOT_SHOW_NATIVE_APP_UPSELL"===t.type)return"show signup modal";return"continue"},({action:e})=>{if("UNAUTH_CLOSEUP_DID_MOUNT"===e.type){if(!!Object(a.k)(window.location.search).simplified)return"show signup modal"}return"continue"},({state:e,action:t})=>{if("UNAUTH_UPDATE_SIGNUP_SCROLL_CONTROLLER_SCROLL_POSITION"===t.type){const{signupScrollControllerScrollPosition:t,hasSignupScrollControllerDisplayedForSession:n}=e;if(!n&&t>400)return{directive:"show signup modal",updatedState:{hasSignupScrollControllerDisplayedForSession:!0}}}return"continue"}].map(e=>(...t)=>(e=>{if("string"==typeof e)return{directive:e};return e})(e(...t)));var p=e=>{const t=Object(i.useRef)(e);return Object(i.useEffect)(()=>{t.current=e},[e]),t},h=n("AGnR"),b=n("28DW"),g=n("0G5S");const j="signupModal";var m=n("QAzJ"),f=n("ke5A"),O=n("nKUr");const _={isDismissible:!1},w=(e,t)=>{const n=Object(l.e)()||t;return e&&n?{..._,...e,isDismissible:!0}:e?{..._,...e}:n?{..._,isDismissible:!0}:_},x=e=>({...e,state:{...e.state,isSignupModalShown:!1},displayProps:_}),S=e=>{if(e){if(Object(d.M)(e))return 3;if(Object(d.f)(e))return 5;if(Object(d.P)(e))return 215}return null},y=(e,t)=>{const n=t-(null!=e?e:0);return n>=0&&n<=864e5},v=e=>{Object(d.u)(e)&&!Object(c.a)("msmrsfda")&&(Object(c.c)("msmrsfda","1"),s.a.incrementNow("mobile_signup_modal.rules.suppress_for_discover_article",1))},T=()=>{const[e,t]=Object(i.useState)({state:{isSignupModalShown:!1,prioritizeOverNativeAppUpsellTimestamp:null,signupScrollControllerScrollPosition:0,hasSignupScrollControllerDisplayedForSession:!1,sessionStartTimestampMS:Date.now(),lastShownTimestampMS:null,dismissibleModalExperienceTimestampMS:null},displayProps:_}),n=p(e),[r,a]=Object(i.useState)(!1),c=Object(i.useRef)(r),d=Object(o.useSelector)(({session:e})=>e.isUnauthSharingModalsShown),O=Object(i.useMemo)(()=>({isUnauthSharingModalsShown:d}),[d]),T=p(O),C=Object(o.useSelector)(({session:e})=>e.referrer),E=p(C),I=Object(o.useSelector)(({session:e})=>e.unauthId),L=p(I),k=Object(m.b)("mweb_signup_modal_initial_delay"),A=Object(m.b)("mweb_signup_modal_dismissible_cooldown"),U=Object(m.b)("mweb_instagram_browser_switch"),M=Object(i.useMemo)(()=>({mWebSignupModalInitialDelayExperiment:k,mWebSignupModalDismissibleCooldownExperiment:A,mWebInstagramBrowserSwitchExperiment:U}),[k,A,U]),P=p(M),D=Object(i.useRef)([]),B=Object(i.useCallback)(e=>{const i=((e,t,n,i,o)=>{const s=(()=>{switch(t.type){case"SHOW_MOBILE_SIGNUP_MODAL":return{...e,state:{...e.state,isSignupModalShown:!0,lastShownTimestampMS:o},displayProps:w(t.displayProps,y(e.state.dismissibleModalExperienceTimestampMS,o))};case"UNAUTH_SESSION_STARTED":{const{location:n}=t;return v(n),e}case"UNAUTH_ROUTE_CHANGED":{const{isSignupModalShown:n}=e.state,{oldLocation:i,newLocation:o}=t;return v(o),n&&!Object(l.c)(o,i)?x(e):e}case"DISMISS_MOBILE_SIGNUP_MODAL":return x(e);case"UPDATE_PRIORITY_OVER_NATIVE_APP_UPSELL":return{...e,state:{...e.state,prioritizeOverNativeAppUpsellTimestamp:Date.now()}};case"UNAUTH_UPDATE_SIGNUP_SCROLL_CONTROLLER_SCROLL_POSITION":const{signupScrollControllerScrollPosition:n}=t;return{...e,state:{...e.state,signupScrollControllerScrollPosition:n}};case"START_DISMISSIBLE_MODAL_EXPERIENCE":return{...e,state:{...e.state,dismissibleModalExperienceTimestampMS:o}};default:return e}})();if(!e.state.isSignupModalShown&&!s.state.isSignupModalShown)for(const r of u){const{directive:e,...a}=r({state:s.state,action:t,reduxState:n,experiments:i,timestampMS:o});if("show signup modal"===e){const{updatedState:e=null,updatedDisplayProps:t=null}=a;return{...s,state:{...s.state,...e,isSignupModalShown:!0,lastShownTimestampMS:o},displayProps:w(t,y(s.state.dismissibleModalExperienceTimestampMS,o))}}if("exit"===e)break}return s})(n.current,e,T.current,P.current,Date.now());return c.current?(t(i),((e,t,n,i,o)=>{const r=t.state.isSignupModalShown,a=n.state.isSignupModalShown,c=!r&&a,d="DISMISS_MOBILE_SIGNUP_MODAL"===e.type&&r&&!a,u=Object(f.b)(i),p=S(e.newLocation||Object(l.g)()),{isDismissible:g}=n.displayProps;if(s.a.incrementNow("mobile_signup_modal.action_completed",1,{"action.type":e.type,"displayProps.isDismissible":g,"state.isSignupModalShown":n.state.isSignupModalShown,oldPage:S(e.oldLocation||null),page:p,referrer:Object(f.a)(e.referrer||u),isSearchReferred:Object(f.d)(e.referrer||u),wasShown:c,wasDismissed:d}),c){Object(h.e)({event_type:13,element:g?12403:12402,component:13858,view_type:p||void 0,aux_data:{unauth_id:o}});const t=g?"dismissible":"blocking";Object(b.g)(`show_${t}_mobile_signup_modal_${e.type}`)}else d&&(Object(h.e)({event_type:123,component:13858,view_type:p||void 0,aux_data:{unauth_id:o}}),Object(b.g)("dismiss_mobile_signup_modal"))})(e,n.current,i,E.current,L.current),n.current=i,i.state.isSignupModalShown):(D.current=D.current.concat(e),i.state.isSignupModalShown)},[]);return Object(i.useEffect)(()=>{const e=(()=>{const e=Object(g.a)(j);if(!e)return null;try{const{version:t,data:n}=JSON.parse(e);return{version:t,state:n}}catch(t){return null}})();if(e){const{version:n,state:i}=e;"v1"===n&&t(e=>({...e,state:{...e.state,...i}}))}a(!0),c.current=!0,D.current.forEach(e=>{B(e)}),D.current=[]},[B]),Object(i.useEffect)(()=>{if(r){const{isSignupModalShown:t,hasSignupScrollControllerDisplayedForSession:n,sessionStartTimestampMS:i,lastShownTimestampMS:o,...s}=e.state;((e,t)=>{const n={version:t,data:e},i=JSON.stringify(n);Object(g.c)(j,i)})(s,"v1")}},[r,e.state]),[e.state.isSignupModalShown,e.displayProps,B]},C=Object(i.createContext)(null),E=()=>Object(i.useContext)(C),I=Object(i.createContext)(_),L=()=>Object(i.useContext)(I),k=Object(i.createContext)(null),A=()=>Object(i.useContext)(k),U=({children:e})=>{const[t,n,i]=T();return Object(O.jsx)(C.Provider,{value:t,children:Object(O.jsx)(I.Provider,{value:n,children:Object(O.jsx)(k.Provider,{value:i,children:e})})})}},Wm3C:function(e,t,n){function i(e=5){const t="abcdefghijklmnopqrstuvwxyz1234567890";return new Array(e).fill("").map(()=>t[Math.floor(Math.random()*t.length)]).join("")}n.d(t,"a",(function(){return i}))},XTA5:function(e,t,n){n.d(t,"a",(function(){return l}));var i=n("q1tI"),o=n("yweb"),s=n("n6mq"),r=n("J6c4"),a=n("nKUr");function l({dataTestId:e,focusOptionId:t,isFocused:n,name:l,onBlur:c,onChange:d,onClick:u=(()=>{}),onFocus:p,onKeyDown:h,onSearchTrigger:b,placeholder:g,value:j}){const m=Object(o.c)(),f=Object(i.useRef)(null);return Object(i.useEffect)(()=>{f.current&&b&&f.current.addEventListener("searchTrigger",b)},[]),Object(i.useEffect)(()=>{if(!f.current)return;document.activeElement===f.current!==n&&(n?f.current.focus():f.current.blur())},[n]),Object(a.jsxs)(s.f,{height:"100%",flex:"grow",children:[Object(a.jsx)("input",{autoCapitalize:"off",autoCorrect:"off",autoComplete:"off","aria-activedescendant":t,"aria-autocomplete":"list","aria-controls":"SuggestionsMenu","aria-describedby":"searchBoxAccessibleText","aria-label":m._("Search","searchBox.searchInput.placeholder","placeholder text for the search box"),"aria-expanded":n,"data-test-id":e,name:l,onBlur:c,onChange:e=>{d(e.target.value)},onClick:u,onFocus:p,onKeyDown:h,placeholder:g||m._("Search","searchBox.searchInput.placeholder","placeholder text for the search box"),ref:f,role:"combobox",style:{backgroundColor:"transparent",border:"none",color:"#333",fontFamily:r.b,fontSize:16,fontWeight:"normal",height:"100%",outline:"none",padding:"0",width:"100%"},type:"text",value:j}),Object(a.jsx)(s.f,{display:"none",id:"searchBoxAccessibleText",children:m._("When autocomplete results are available use up and down arrows to\n                review and enter to select. Touch device users, explore by touch or\n                with swipe gestures.","searchBox.searchInput.accessibleText","Accessible text for search input")})]})}},bKKl:function(e,t,n){n.d(t,"a",(function(){return o}));var i=n("gxu6");const o=()=>!!i.a("logged_out")||!!i.a("fba")},fs0a:function(e,t,n){var i=n("q1tI"),o=n("/MKj"),s=n("28DW"),r=n("yweb"),a=n("2hay"),l=n("n6mq"),c=n("nKUr");function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const u={defaultButton:{display:"flex",alignItems:"center",backgroundColor:"#1877F2",border:"none",height:"40px",transition:"opacity .2s linear",width:"100%",minWidth:"240px",borderRadius:"20px",padding:"0px 0px 0px 8px"},roundedButton:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#FFF",border:"none",height:"48px",transition:"opacity .2s linear",width:"48px",marginBottom:"8px",borderRadius:"50%"},fbLogo:{__style:{borderRadius:"12px",paddingTop:"5px",paddingLeft:"3px",paddingRight:"2px",marginLeft:"4px",marginRight:"4.4px"}},placeholderButton:{pointerEvents:"none",position:"absolute",borderRadius:"20px",top:"0",right:"0",bottom:"0",left:"0"},buttonText:{fontFamily:"Helvetica, Arial, sans-serif",fontWeight:"bold",color:"#fff",fontSize:"16px",paddingRight:"8px",letterSpacing:"0.25px"}};class p extends i.Component{constructor(...e){super(...e),d(this,"state",{fbReady:!1}),d(this,"connectCallback",({creds:e,data:t})=>{this.props.onFacebookConnectSuccess(e,t)}),d(this,"handleConnectClick",()=>{Object(s.a)("unauth_mweb.facebook_connect.button_click");const{onTouch:e}=this.props;e&&e(),this.state.fbReady&&Object(a.h)().then(this.connectCallback,this.props.onFacebookConnectError)}),d(this,"renderRoundButton",()=>Object(c.jsxs)(l.f,{display:"flex",direction:"column",alignItems:"center",children:[Object(c.jsx)("button",{onClick:this.handleConnectClick,style:u.roundedButton,type:"button",children:Object(c.jsx)(l.v,{accessibilityLabel:this.props.i18n._("facebook","accessible label for facebook icon","accessible label for facebook icon"),color:"blue",icon:"facebook",inline:!0,size:20})}),Object(c.jsx)(l.cb,{color:"white",size:"md",children:this.props.i18n._("Facebook","Facebook company name","Facebook company name")})]}))}componentDidMount(){Object(a.f)(this.props.locale).then(()=>{this.setState({fbReady:!0})}),window.addEventListener("message",this.handleMessageEvent,!1)}handleMessageEvent(e){Object(a.i)(e,e=>Object(s.a)("unauth_mweb."+e))}componentWillUnmount(){window.removeEventListener("message",this.handleMessageEvent)}renderPersonalizedButton(){const{isRerequest:e}=this.props,t=u.placeholderButton,n=(this.props.type||"continue")+"_with",i="rounded",o=this.props.fbUseContinueAs?"true":"false";return Object(c.jsx)("div",{style:t,children:e?Object(c.jsx)("div",{className:"fb-login-button","data-width":"100%","data-max-rows":"1","data-size":"large","data-button-type":n,"data-layout":i,"data-show-faces":"false","data-auth-type":"rerequest","data-scope":a.b.join(","),"data-auto-logout-link":"false","data-use-continue-as":o}):Object(c.jsx)("div",{className:"fb-login-button","data-width":"100%","data-max-rows":"1","data-size":"large","data-button-type":n,"data-layout":i,"data-show-faces":"false","data-scope":a.b.join(","),"data-auto-logout-link":"false","data-use-continue-as":o})})}render(){const{isRounded:e}=this.props;if(e)return this.renderRoundButton();const t=u.defaultButton;return Object(c.jsxs)(l.f,{position:"relative","data-test-id":"FacebookConnectContainer",children:[this.renderPersonalizedButton(),Object(c.jsxs)("button",{onClick:this.handleConnectClick,style:t,type:"button","data-test-id":"FacebookConnectButton",children:[Object(c.jsx)(l.f,{color:"white",dangerouslySetInlineStyle:u.fbLogo,children:Object(c.jsx)(l.v,{accessibilityLabel:this.props.i18n._("facebook","accessible label for facebook icon","accessible label for facebook icon"),color:"blue",icon:"facebook",inline:!0,size:19})}),Object(c.jsx)(l.f,{alignItems:"center",display:"flex",justifyContent:"center",flex:"grow",marginEnd:1,children:Object(c.jsx)("span",{style:u.buttonText,children:this.props.buttonText})})]})]})}}var h=Object(o.connect)(e=>({locale:e.session.locale}))((function(e){const t=Object(r.c)();return Object(c.jsx)(p,{...e,i18n:t})})),b=n("k1Bv"),g=n("yep/"),j=n("bcHz"),m=n("u0Kf"),f=n("Wm3C"),O=n("jv6g"),_=n.n(O),w=n("kmwA"),x=n("hZxF"),S=n("RNo4"),y=n("QAzJ"),v=n("pLLR"),T=n("0G5S");const C={defaultButton:{display:"flex",alignItems:"center",backgroundColor:"#00C300",border:"none",height:"40px",transition:"opacity .2s linear",width:"100%",borderRadius:"20px",padding:"0px 0px 0px 8px"},lineLogo:{borderRadius:"12px",backgroundColor:"#00C300",width:"32px",height:"32px"},buttonText:{fontWeight:"bold",color:"#fff",fontSize:"16px",paddingRight:"33px"}};var E=({buttonText:e,onLineConnectSuccess:t,onLineConnectError:n,onTouch:i})=>{const o=Object(r.c)(),{anyEnabled:a}=Object(y.b)("mweb_line_oauth_jp")(),{anyEnabled:d}=Object(y.b)("mweb_line_oauth_jp_android")(),u=a||d,p=Object(f.a)(10),{locale:h}=Object(v.d)();let b;const g=e=>{const i=Object(S.k)(e);if(i.state&&i.code&&i.state===p){b&&!b.closed&&b.close();const e=window.location.origin+"/oauth/line/redirect";Object(m.b)({url:"/oauth/line/verify",type:"POST",data:{code:i.code,redirect_uri:e}}).then(({ok:e,responseText:i})=>{if(e&&i){const e=JSON.parse(i),{id_token:n,access_token:o}=e;n&&o&&t({line_id_token:n,line_access_token:o},{line_id_token:n,line_access_token:o})}else n()})}},j=e=>{e.isTrusted&&e.origin===window.location.origin&&e.data&&g(String(e.data))},O=e=>{if(e.isTrusted&&e.url.startsWith(window.location.origin)&&"lineOAuthOneTimeCode"===e.key){const e=Object(T.a)("lineOAuthOneTimeCode");e&&g(e)}};Object(x.a)(()=>()=>{window.removeEventListener("message",j),window.removeEventListener("storage",O),Object(T.b)("lineOAuthOneTimeCode"),b&&!b.closed&&b.close()});const E=C.defaultButton;return u?Object(c.jsx)(l.f,{position:"relative","data-test-id":"LineConnectContainer",children:Object(c.jsxs)("button",{onClick:()=>{Object(s.a)("unauth_mweb.line_connect.button_click"),i&&i();const e=window.location.origin+"/oauth/line/redirect";window.addEventListener("message",j,!1),window.addEventListener("storage",O),b=window.open("https://access.line.me/oauth2/v2.1/authorize?response_type=code&client_id="+w.a.settings.LINE_CLIENT_ID+"&redirect_uri="+encodeURIComponent(e)+"&state="+p+"&ui_locales="+h+"&scope=profile%20openid%20email","_blank")},style:E,type:"button","data-test-id":"LineConnectButton",children:[Object(c.jsx)("img",{style:C.lineLogo,src:_.a,alt:o._("line","accessible label for line icon","accessible label for line icon")}),Object(c.jsx)(l.t,{alignItems:"center",justifyContent:"center",flex:"grow",children:Object(c.jsx)("span",{style:C.buttonText,children:e})})]})}):null},I=n("rYoy"),L=n("B/oJ"),k=n("6adH"),A=n("QtD7"),U=n("ANjH"),M=n("TXO6"),P=n("Q5BC"),D=n("vKjI"),B=n("VL22"),R=n("ulr2"),N=n("YWST"),F=n("0HhX"),z=n("EC67"),H=n("PmFr"),G=n("J8m7"),W=n("IAo4"),q=n("AGnR");function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const K=Object(i.lazy)(()=>n.e("localizationModal").then(n.bind(null,"0uGw")));class Y extends i.PureComponent{constructor(...e){super(...e),$(this,"state",{isLoading:!1,showLocaleSelector:!1,showRegisterLoading:!1,signupPlatform:"default"}),$(this,"onRegisterSuccess",e=>{const{isRedirectToNextParamAfterSignup:t,next:n}=this.props;this.trackSignupLoginEvent(7487,e),["facebook","google"].includes(e)&&(t&&n&&this.props.history.push(n),this.props.history.push("/")),this.setState({showRegisterLoading:!1})}),$(this,"onRegisterFailure",(e,t)=>{this.trackSignupLoginEvent(7488,t),this.props.showToast({text:e.message||this.props.i18n._("Sorry! Something went wrong on our end.","Error logging on","Error logging on")}),this.setState({isLoading:!1,showRegisterLoading:!1})}),$(this,"handlePostLoginRegistration",(e,t)=>{const{beforeRegister:n,isSignupConfirmationExpEnabled:i}=this.props;n&&i()?n(e,t):t()}),$(this,"onLoginError",(e,t,n,i)=>{this.setState({isLoading:!1}),!t||t.apiErrorCode!==G.v&&t.apiErrorCode!==G.j&&t.apiErrorCode!==G.p?t?(Object(s.h)("mweb_login_button_skip_register.api_error_code."+t.apiErrorCode),this.props.showToast({text:t.apiErrorCode&&t.message?t.message:this.props.i18n._("Sorry, we can't log you in.","Error message when user having trouble login in.","Error message when user having trouble login in.")})):(Object(s.h)("unauth_mweb.login.unexpected_error"),this.props.showToast({text:this.props.i18n._("Sorry, we can't log you in.","Error message when user having trouble login in.","Error message when user having trouble login in.")})):"line"===i||n.email||n.gplus_id_token?"line"===i?t.apiErrorCode===G.p?this.redirectToLineEmailCollect(n):this.registerAfterLoginError(e,t,n,i):this.handlePostLoginRegistration(n.email||"",()=>this.registerAfterLoginError(e,t,n,i)):Object(a.c)("email").then(({hasPerm:o})=>{this.handlePostLoginRegistration("",()=>this.redirectToEmailCollect(n,e,t,i)),Object(s.h)("unauth_mweb.reg_via_fb.has_email_perm."+String(!!o))}).catch(o=>{this.handlePostLoginRegistration("",()=>this.registerAfterLoginError(e,t,n,i))})}),$(this,"getAuxDataSignupLoginMethod",e=>{switch(e){case"facebook":return 2;case"google":return 3;case"line":return 8;default:return}}),$(this,"getViewParameterType",e=>{switch(e){case"facebook":return 3205;case"google":return 3204;case"line":return 3556;default:return}}),$(this,"trackSignupLoginEvent",(e,t)=>{const{isAuthenticated:n,isLimitedLoginUser:i}=this.props;Object(q.e)({event_type:e,view_type:10,view_parameter:this.getViewParameterType(t),aux_data:{...n?{login_state:i?2:1}:{},signup_login_method:this.getAuxDataSignupLoginMethod(t)}})}),$(this,"trackButtonTap",e=>{const{isAuthenticated:t,isLimitedLoginUser:n,viewParameter:i}=this.props;Object(q.h)({view_type:10,view_parameter:i,element:e,aux_data:{...t?{login_state:n?2:1}:{}}})}),$(this,"registerAfterLoginError",(e,t,n,i)=>{"line"!==i&&this.includeAgeStep(i,n)?this.props.history.push({pathname:"/signup/thirdpartyage/",state:{signupOptions:n,signupPlatform:i}}):("facebook"===i&&n.birthday&&(n.birthday=String(Object(W.a)(n.birthday||""))),this.setState({isLoading:!0,showRegisterLoading:!0,signupPlatform:i}),this.trackSignupLoginEvent(7537,i),this.props.register(n).then(e=>this.onRegisterSuccess(i),e=>this.onRegisterFailure(e,i)))}),$(this,"redirectToEmailCollect",(e,t,n,i)=>{const{country:o}=this.props;this.props.history.push({pathname:"/signup/fbemailcollect/",state:{signupOptions:e,isGDPREUCountry:Object(B.d)(o),country:o,includeAgeStep:this.includeAgeStep("facebook",e)}})}),$(this,"redirectToLineEmailCollect",e=>{this.props.history.push({pathname:"/signup/line-email-collect/",state:{signupOptions:e}})}),$(this,"includeAgeStep",(e,t)=>{const{country:n}=this.props,i="facebook"!==e||!t.birthday,o=Object(B.d)(n),s=H.b.includes(n),r=H.k.has(n);return!!(o||s||r)&&(!!i||!Object(W.b)(t.birthday||"",18))}),$(this,"handleFacebookError",()=>{const{fbConnectHandler:e}=this.props;e&&e("error"),this.props.showToast({text:this.props.i18n._("Unable to connect to Facebook","Error logging on with Facebook","Error logging on with Facebook")})}),$(this,"handleLineError",()=>{this.props.showToast({text:this.props.i18n._("Unable to connect to Line","Error logging on with Line","Error logging on with Line")})}),$(this,"handleSignupTouch",({event:e})=>{const{from:t,history:n,isBusiness:i,next:o,onSignupTouch:r,setLoginSignupFrom:a,location:l,isRedirectToNextParamAfterSignup:c}=this.props;e&&(e.stopPropagation(),e.preventDefault()),Object(s.g)("press_email_signup"),r&&r(),t&&a(t),this.trackButtonTap(31),n.push({pathname:i?"/business/signup/step1/":"/signup/step1/",search:l.search,state:{next:o,isRedirectToNextParamAfterSignup:c}})}),$(this,"handleLoginTouch",({event:e})=>{const{isBusiness:t,footerCTA:n,from:i,history:o,next:r,onLoginTouch:a,location:l,isRedirectToNextParamAfterSignup:c}=this.props;e.stopPropagation(),e.preventDefault(),a&&a(),i&&this.props.setLoginSignupFrom(i),this.trackButtonTap(30);const d=n||"button";Object(s.h)("unauth_mweb.login_buttons.footer."+d),Object(s.g)("press_login"),o.push({pathname:t?"/business/login/":"/login/",search:l.search,state:{next:r,isRedirectToNextParamAfterSignup:c}})}),$(this,"handleGoogleTouch",()=>{const{onGoogleTouch:e}=this.props;e&&e(),this.trackButtonTap(208)}),$(this,"handleFacebookTouch",()=>{const{onFacebookTouch:e}=this.props;e&&e(),this.trackButtonTap(68)}),$(this,"handleLineTouch",()=>{this.trackButtonTap(12277)}),$(this,"login",e=>(t,n)=>{const{fbConnectHandler:i,history:o,login:r,next:a,location:l,appInstallStepAfterLoginEnabled:c}=this.props,d="google"===e?"gsi_btn":"other",u=l.state&&l.state.switch_account?{switchAccount:!0,trigger:d}:{noImmediateRedirect:c,trigger:d};"facebook"===e&&i&&i("success"),Object(s.g)(e+"_login_success"),this.trackSignupLoginEvent(7534,e),r(t,o,a,u).then(()=>{this.trackSignupLoginEvent(7536,e)}).catch(i=>{this.trackSignupLoginEvent(7535,e),this.onLoginError(t,i,n,e)}),this.setState({isLoading:!0,showRegisterLoading:!1,signupPlatform:e})}),$(this,"toggleLocaleSelector",()=>{const{viewParameter:e}=this.props;this.setState(({showLocaleSelector:t})=>(t||Object(q.h)({element:240,view_type:10,view_parameter:e}),{showLocaleSelector:!t}))}),$(this,"renderRegularButtons",()=>{const{isBusiness:e,locale:t,googleText:n,facebookText:o,lineText:s,showEmailButton:r,fbButtonType:a,isRerequest:d,isAuthenticated:u,showSecondGoogleButton:p}=this.props;let b=this.props.i18n._("Continue with email","Sign up button","Sign up button"),j=2;return e&&(b=this.props.i18n._("Create account","Button text for creating a business account","Button text for creating a business account"),j=-2),Object(c.jsxs)(i.Fragment,{children:[r&&Object(c.jsx)(l.f,{"data-test-id":"signup-button",marginBottom:j,children:Object(c.jsx)(l.g,{color:"red",text:b,onClick:this.handleSignupTouch})}),o&&Object(c.jsx)(l.f,{marginBottom:2,children:Object(c.jsx)(h,{buttonText:o,locale:t,onFacebookConnectError:this.handleFacebookError,onFacebookConnectSuccess:this.login("facebook"),type:a,fbUseContinueAs:this.props.fbUseContinueAs,onTouch:this.handleFacebookTouch,isRerequest:d})}),n&&Object(c.jsx)(l.f,{marginBottom:2,children:Object(c.jsx)(g.a,{buttonText:n,isAuthenticated:u,showSecondGoogleButton:p,onGoogleConnectSuccess:this.login("google"),onTouch:this.handleGoogleTouch})}),s&&Object(c.jsx)(l.f,{marginBottom:2,children:Object(c.jsx)(E,{buttonText:s,onLineConnectError:this.handleLineError,onLineConnectSuccess:this.login("line"),onTouch:this.handleLineTouch})})]})})}renderFooterCTA(){const{footerCTA:e,increasedSpaceBelow:t,isMobileHomepage:n}=this.props;return"member_link"===e?Object(c.jsx)(l.f,{marginTop:-4,"data-test-id":"login-member",children:Object(c.jsx)(j.a,{pressState:"none",onTouch:e=>this.handleLoginTouch({event:e}),children:Object(c.jsx)(l.f,{paddingY:4,marginBottom:t?-1:-2,children:Object(c.jsx)(l.cb,{align:"center",size:"md",weight:"bold",color:n?"white":"darkGray",children:this.props.i18n._("Already a member? Log in","Link on mobile web sign up modal to direct unauth users to the login page","Link on mobile web sign up modal to direct unauth users to the login page")})})})}):"not_you_link"===e?Object(c.jsx)(l.f,{marginTop:-3,"data-test-id":"LoginButtonsNotYoucontainer",children:Object(c.jsx)(j.a,{pressState:"none",onTouch:e=>this.handleLoginTouch({event:e}),children:Object(c.jsxs)(l.cb,{size:"md",inline:!0,color:"darkGray",children:[this.props.i18n._("Not you? ","Text for if the user is shown the wrong Facebook profile image for their account","Text for if the user is shown the wrong Facebook profile image for their account"),Object(c.jsx)(l.cb,{color:"darkGray",inline:!0,size:"md",weight:"bold",children:this.props.i18n._("Log in as a different user.","Clickable text that takes the user to the login page","Clickable text that takes the user to the login page")})]})})}):Object(c.jsx)(l.f,{marginBottom:5,"data-test-id":"login-button",children:Object(c.jsx)(l.g,{color:"transparent",onClick:this.handleLoginTouch,text:this.props.i18n._("Log in","Login page button","Login page button")})})}renderRoundedButtons(){const{locale:e,fbButtonType:t,isRerequest:n}=this.props;return Object(c.jsxs)(l.f,{display:"flex",direction:"column",alignItems:"center",children:[Object(c.jsx)(l.f,{marginBottom:4,children:Object(c.jsx)(l.cb,{align:"center",color:"white",size:"md",children:this.props.i18n._("Sign up to get started","Sign up CTA","Sign up CTA")})}),Object(c.jsxs)(l.f,{display:"flex",direction:"row",children:[Object(c.jsxs)(l.f,{"data-test-id":"signup-button",rounding:"circle",display:"flex",direction:"column",alignItems:"center",marginBottom:4,marginEnd:4,children:[Object(c.jsx)("button",{onClick:this.handleSignupTouch,style:{border:"none",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#FFF",height:"48px",width:"48px",marginBottom:"8px",borderRadius:"50%",cursor:"pointer"},type:"button",children:Object(c.jsx)(l.v,{accessibilityLabel:this.props.i18n._("Continue with email","Sign up with email button","Sign up with email button"),icon:"gmail",color:"darkGray",inline:!0,size:16})}),Object(c.jsx)(l.cb,{color:"white",size:"md",children:this.props.i18n._("Email","Icon text for continuing with email","Icon text for continuing with email")})]}),Object(c.jsx)(l.f,{marginEnd:4,children:Object(c.jsx)(h,{locale:e,onFacebookConnectError:this.handleFacebookError,onFacebookConnectSuccess:this.login("facebook"),type:t,fbUseContinueAs:this.props.fbUseContinueAs,onTouch:this.handleFacebookTouch,isRerequest:n,isRounded:!0})}),Object(c.jsx)(g.a,{onGoogleConnectSuccess:this.login("google"),onTouch:this.handleGoogleTouch,isRounded:!0})]})]})}render(){const{activateHomePageLocaleSelector:e,isBusiness:t,locale:n,localeName:i,showTextDivider:o,inSocialBeforeEmailExp:s,roundButtons:r,showLoginButtons:a,secondaryAccountFlowEnabled:d,viewParameter:u,widerLoginButtons:p,hideLocaleSelector:h}=this.props,{showLocaleSelector:g,showRegisterLoading:j,isLoading:m,signupPlatform:f}=this.state,O=t?d?6:-5:0;return Object(c.jsxs)(l.f,{marginTop:O,maxWidth:400,marginStart:"auto",marginEnd:"auto","data-test-id":"LoginButtonsContainer",children:[o&&Object(c.jsx)(l.f,{marginBottom:3,marginTop:3,children:Object(c.jsx)(l.cb,{align:"center",size:"sm",weight:"bold",children:this.props.i18n._("OR","Separator for email login button and social login button","Separator for email login button and social login button")})}),Object(c.jsx)(l.f,{marginBottom:s?3:6,width:p?270:void 0,children:r?this.renderRoundedButtons():this.renderRegularButtons()}),a&&this.renderFooterCTA(),!h&&e&&e().anyEnabled&&Object(c.jsx)(l.bb,{accessibilityLabel:this.props.i18n._("Choose your preferred language","signup.footerActions.tapAreaLabel","Users can tap here to change their preferred language"),fullWidth:!1,onTap:this.toggleLocaleSelector,children:Object(c.jsxs)(l.t,{alignItems:"center",gap:1,justifyContent:"center",children:[Object(c.jsx)(l.v,{accessibilityLabel:"",color:"white",icon:"globe",size:12}),Object(c.jsx)(l.cb,{color:"white",inline:!0,size:"md",weight:"bold",children:e().group.startsWith("enabled_name")?i:n.toUpperCase()}),Object(c.jsx)(l.v,{accessibilityLabel:"",color:"white",icon:"arrow-forward",size:10})]})}),g&&Object(c.jsx)(I.a,{children:Object(c.jsx)(K,{isOpen:!0,locale:n,onDismiss:this.toggleLocaleSelector,viewParameter:u})}),m&&(j?Object(c.jsx)(L.a,{platform:"line"===f?"default":f}):Object(c.jsx)(b.a,{}))]})}}$(Y,"defaultProps",{next:"/",fbUseContinueAs:!0,footerCTA:"button"});t.a=Object(U.compose)(z.l,k.b,Object(o.connect)(({session:e,users:t={}},n)=>({country:e.country,locale:e.locale,isAuthenticated:e.isAuthenticated,isLimitedLoginUser:Object(M.b)(t[e.userId]),isTablet:e.isTablet}),e=>({setLoginSignupFrom:t=>e(Object(R.u)(t)),register:t=>e(Object(D.a)(t)),login:(t,n,i,o)=>e(Object(P.b)(t,n,i,o)),isSignupConfirmationExpEnabled:()=>["enabled","employees"].includes(e(Object(A.a)("mweb_unauth_signup_confirmation")))})))((function(e){var t;const n=Object(r.c)(),{locale:s,showEmailButton:a,showLoginButtons:l}=e,d=Object(N.b)();Object(i.useEffect)(()=>{d&&(l&&d.load(new URL("login.js","file://")),a&&d.load(new URL("signup.js","file://")))},[]),Object(F.a)({name:"LocalesResource",options:{}});const u=null===(t=Object(o.useSelector)(({settings:{localeOptions:e}})=>e||[]).find(e=>(null==e?void 0:e.value)===s))||void 0===t?void 0:t.label,{anyEnabled:p}=Object(y.b)("mweb_wider_login_buttons")();return Object(c.jsx)(Y,{...e,localeName:u,widerLoginButtons:p,i18n:n})}))},hZxF:function(e,t,n){var i=n("q1tI");t.a=e=>{Object(i.useEffect)(e,[])}},jv6g:function(e,t){e.exports="https://s.pinimg.com/webapp/btn_base-3772d107.png"},k1Bv:function(e,t,n){var i=n("yweb"),o=n("n6mq"),s=n("nKUr");t.a=({isInModal:e})=>{const t=Object(i.c)();return Object(s.jsx)(o.f,{position:e?"absolute":"fixed",top:!0,left:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(255,255,255, .5)",height:"100%",width:"100%",zIndex:1}},display:"flex",alignItems:"center",justifyContent:"center",children:Object(s.jsx)(o.U,{accessibilityLabel:t._("Loading","Full page loading state","Full page loading state"),show:!0})})}},lsgW:function(e,t,n){n.d(t,"a",(function(){return o}));var i=n("nKUr");function o({size:e,noCircle:t}){return Object(i.jsxs)("svg",{height:e,style:{display:"block"},viewBox:t?"3 3 70 70":"-3 -3 82 82",width:e,children:[t?null:Object(i.jsx)("circle",{cx:"38",cy:"38",fill:"white",r:"40"}),Object(i.jsx)("path",{d:"M27.5 71c3.3 1 6.7 1.6 10.3 1.6C57 72.6 72.6 57 72.6 37.8 72.6 18.6 57 3 37.8 3 18.6 3 3 18.6 3 37.8c0 14.8 9.3 27.5 22.4 32.5-.3-2.7-.6-7.2 0-10.3l4-17.2s-1-2-1-5.2c0-4.8 3-8.4 6.4-8.4 3 0 4.4 2.2 4.4 5 0 3-2 7.3-3 11.4C35.6 49 38 52 41.5 52c6.2 0 11-6.6 11-16 0-8.3-6-14-14.6-14-9.8 0-15.6 7.3-15.6 15 0 3 1 6 2.6 8 .3.2.3.5.2 1l-1 3.8c0 .6-.4.8-1 .4-4.4-2-7-8.3-7-13.4 0-11 7.8-21 22.8-21 12 0 21.3 8.6 21.3 20 0 12-7.4 21.6-18 21.6-3.4 0-6.7-1.8-7.8-4L32 61.7c-.8 3-3 7-4.5 9.4z",fill:"#fb7072",fillRule:"evenodd"})]})}},ntEp:function(e,t,n){n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return r}));var i=n("1dBE");const{Provider:o,Consumer:s,useHook:r}=Object(i.b)("unauthPageWrapperContext")},picD:function(e,t,n){n.d(t,"a",(function(){return o}));var i=n("nKUr");function o({size:e}){return Object(i.jsxs)("svg",{width:e,height:e,viewBox:`0 0 ${e} ${e}`,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.7529 0C18.2439 0 23.5059 4.21356 23.5059 9.41124C23.5059 11.2268 22.8634 12.9219 21.7512 14.3595C21.6962 14.4414 21.6243 14.5318 21.5336 14.6316L21.5268 14.6391C21.1468 15.0937 20.719 15.5204 20.2486 15.9143C16.9985 18.9184 11.6488 22.495 10.9428 21.9432C10.329 21.4636 11.9537 19.1175 10.0792 18.7271C9.94847 18.7121 9.81805 18.696 9.68872 18.6776L9.68626 18.6775V18.6773C4.18083 17.8952 4.09984e-09 14.0442 4.09984e-09 9.41124C-0.0001696 4.21356 5.26188 0 11.7529 0Z",fill:"white"}),Object(i.jsx)("path",{transform:"translate(4,6)",fillRule:"evenodd",clipRule:"evenodd",d:"M0.93375 6.4131H3.30414C3.64131 6.4131 3.91709 6.13724 3.91709 5.80007V5.74893C3.91709 5.41176 3.64131 5.13598 3.30414 5.13598H1.59784V1.25382C1.59784 0.916647 1.32206 0.640869 0.984886 0.640869H0.93375C0.596577 0.640869 0.320801 0.916647 0.320801 1.25382V5.79998C0.320801 6.13724 0.596577 6.4131 0.93375 6.4131ZM15.6219 3.56349V3.51236C15.6219 3.17518 15.346 2.89941 15.0089 2.89941H13.3026V1.92885H15.0089C15.346 1.92885 15.6219 1.65307 15.6219 1.3159V1.26476C15.6219 0.927586 15.346 0.65181 15.0089 0.65181H12.6385C12.3013 0.65181 12.0255 0.927586 12.0255 1.26476V5.81092C12.0255 6.14809 12.3013 6.42395 12.6385 6.42395H15.0089C15.346 6.42395 15.6219 6.14809 15.6219 5.81092V5.75978C15.6219 5.42261 15.346 5.14683 15.0089 5.14683H13.3026V4.17627H15.0089C15.346 4.17644 15.6219 3.90058 15.6219 3.56349ZM11.0634 6.23035L11.0635 6.2301C11.177 6.11574 11.2406 5.96122 11.2408 5.80015V1.25399C11.2408 0.916816 10.965 0.64104 10.6277 0.64104H10.5766C10.2394 0.64104 9.96364 0.916816 9.96364 1.25399V3.92263L7.74811 0.950992C7.64227 0.766208 7.44299 0.64104 7.21589 0.64104H7.16475C6.82758 0.64104 6.55172 0.916816 6.55172 1.25399V5.80015C6.55172 6.13732 6.82749 6.41319 7.16475 6.41319H7.21589C7.55306 6.41319 7.82884 6.13732 7.82884 5.80015V3.08156L10.0603 6.12944C10.0741 6.15081 10.0891 6.17133 10.1053 6.19083L10.1053 6.191C10.1667 6.27462 10.2505 6.33194 10.344 6.36697C10.4158 6.39665 10.4943 6.4131 10.5765 6.4131H10.6276C10.7275 6.41316 10.8259 6.38857 10.914 6.34153C10.9753 6.31236 11.027 6.2747 11.0634 6.23035ZM5.02477 6.4131H5.07591C5.41308 6.4131 5.68886 6.13724 5.68886 5.80007V1.2539C5.68886 0.916731 5.41308 0.640955 5.07591 0.640955H5.02477C4.6876 0.640955 4.41174 0.916731 4.41174 1.2539V5.80007C4.41174 6.13724 4.6876 6.4131 5.02477 6.4131Z",fill:"#00C300"})]})}},tCfZ:function(e,t,n){n.d(t,"a",(function(){return c}));var i=n("Lr1Z"),o=n("kmwA"),s=n("yweb"),r=n("qpbZ"),a=n("n6mq"),l=n("nKUr");function c({isMobileHomepage:e,isBusiness:t=!1,size:n="sm",alignText:c="center"}){const d=Object(s.c)(),u=o.a.settings.POLICY_PRIVACY_URL,p=t?o.a.settings.PARTNER_SITE_TOS_URL:o.a.settings.POLICY_TERMS_PLAIN_URL;return Object(l.jsx)(a.f,{alignItems:"left"===c?"start":"center",display:"flex",direction:"column",children:Object(l.jsx)(a.cb,{color:e?"white":"gray",align:"left"===c?"start":"center",size:"sm",overflow:"left"===c?"normal":"breakWord",children:Object(r.b)(d._("By continuing, you agree to Pinterest's {{ termsOfService }} and {{ privacyPolicy }}"),{termsOfService:Object(l.jsx)("span",{"data-test-id":"business-tos",children:Object(l.jsx)(i.a,{to:p,inline:!0,pressState:"background",newTab:!0,children:Object(l.jsx)(a.cb,{color:e?"white":"gray",inline:!0,size:"sm",weight:"bold",children:t?d._("Business Terms of Service","Mobile web business terms of service link for partners","Mobile web business terms of service link for partners"):d._("Terms of Service","Mobile web terms of service link","Mobile web terms of service link")})})},"termsOfService"),privacyPolicy:Object(l.jsx)("span",{"data-test-id":"privacy",children:Object(l.jsx)(i.a,{to:u,inline:!0,pressState:"background",newTab:!0,children:Object(l.jsx)(a.cb,{color:e?"white":"gray",inline:!0,size:"sm",weight:"bold",children:d._("Privacy Policy","Mobile web privacy policy link","Mobile web privacy policy link")})})},"privacyPolicy")})})})}},ujsJ:function(e,t,n){n.d(t,"a",(function(){return a}));var i=n("n6mq"),o=n("QAzJ"),s=n("pLLR"),r=n("nKUr");function a(e){const t=Object(o.b)("web_auth_gestalt_tabs_v2"),n=Object(o.b)("web_unauth_gestalt_tabs_v2"),{isAuthenticated:a}=Object(s.d)();let l;return l=a?t().anyEnabled:n().anyEnabled,Object(r.jsx)(i.Z,{_dangerouslyUseV2:l,...e})}},vKjI:function(e,t,n){n.d(t,"a",(function(){return x}));var i=n("gxu6"),o=n("0G5S"),s=n("PmFr");function r(){return function(e){const t={};return e.forEach(e=>{const n=JSON.parse(Object(o.a)(e));n&&(t[e]=n)}),JSON.stringify(t)}([s.l])}var a=n("eOdZ"),l=n("Ptwp"),c=n("lIBN"),d=n("28DW"),u=n("ARZW"),p=n("VL22"),h=n("jUT+"),b=n("vtuW"),g=n("B/oJ"),j=n("eNqV"),m=n("J8m7"),f=n("A+Hl"),O=n("AYc3"),_=n("2y2F"),w=n("2oSX");const x=(e,t)=>(t,n)=>{let x=0;const{session:S}=n(),{country:y}=S,v=Object(g.b)(y),T=new Promise((e,t)=>{v?setTimeout(()=>{e()},3e3):e()}),C=()=>{const n=S.isAuthenticated,g=Object(f.c)(S.origin)&&!1;return(g?Object(f.b)({invite_code:S.inviteCode,locale:S.locale,referrer:S.referrer,...e}):a.a.create("UserRegisterResource",{...e,get_user:!0,user_behavior_data:r(),visited_pages:Object(o.a)(s.g)}).callCreate()).then(i=>T.then(()=>{var r,a,m,f;Object(b.b)("d_pif_invite"),Object(o.b)(s.g),t((r=i.resource_response.data.user,a=i.client_context.placed_experiences,m=i.client_context.active_experiments,f=i.client_context.triggerable_experiments,{type:h.ob,payload:{user:r,experiences:a,active:m,triggerable:f}})),n&&Object(c.a)("registration.signup_success");const x=e.email||e.username||null,S=e.password||null;if(navigator.credentials&&x&&S)try{const e=new window.PasswordCredential({id:x,password:S});Object(d.a)("unauth_mweb.navigatorCredentials.store.attempt"),navigator.credentials&&"function"==typeof navigator.credentials.store&&navigator.credentials.store(e).then(()=>{Object(d.a)("unauth_mweb.navigatorCredentials.store.success")})}catch(v){Object(d.a)("unauth_mweb.navigatorCredentials.store.error")}return Object(w.e)({action:"signup",type:Object(p.b)(e),isCrossDomain:g,isMultipleAccounts:n}),Object(l.a)(),n&&Object(j.j)(),Object(_.a)(y)&&Object(O.g)({id:u.g,eventCategory:"NewUsers",eventName:"Mobile"}),Object(_.f)(y)&&Object(O.k)({id:"flashtalking-m-reg",eventCategory:"NewUsers",eventName:"Mobile"}),Object(_.c)(y)&&Object(O.h)({pixelId:"dpm_pixel_new_user_event",eventCategory:"NewUsers",eventName:"Mobile"}),Object(_.d)(y)&&Object(O.i)({pixelId:"dentsu_pixel_new_user_event",eventCategory:"NewUsers",eventName:"Mobile"}),i})).catch(t=>{const{apiErrorCode:o=null}=t;if(o&&o===m.c&&(Object(d.a)("multi_step_set_age_restrict_cookie"),i.b("r_r","1",4320),i.b("_pinterest_pfob","disabled")),!(x<3)||o&&![m.g,m.f].includes(o))throw Object(w.f)({action:"signup",type:Object(p.b)(e),error:t.message,isCrossDomain:g,isMultipleAccounts:n}),n&&Object(c.a)("registration.signup_error"),t;x+=1,C()})};return C()}},"yep/":function(e,t,n){var i=n("q1tI"),o=n("/MKj"),s=n("QtD7"),r=n("4NNh"),a=n("28DW"),l=n("4NbJ"),c=n("n6mq"),d=n("nKUr");function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class p extends i.Component{constructor(...e){super(...e),u(this,"gsiButtonRef",Object(i.createRef)()),u(this,"gsiSecondHomepageButtonRef",Object(i.createRef)()),u(this,"handleGoogleConnectSuccess",()=>{const{onTouch:e}=this.props;e&&e(),Object(a.g)("press_google_login")})}componentDidMount(){const{mwebInitializeGSIScriptExpTreatment:e,isAuthenticated:t,isGoogleOneTapDisabled:n,isGoogleOneTapInitialized:i}=this.props;n||t||!i&&e?(Object(l.d)(this.gsiButtonRef,this.logGSIButton.bind(this),this.handleCredentialResponse.bind(this)),t||i||Object(a.a)("mweb.gsi_button_fix.load_and_initialize_gsi_script")):Object(l.e)(this.gsiButtonRef,this.logGSIButton.bind(this))}componentDidUpdate(){const{isGoogleOneTapDisabled:e,isGoogleOneTapInitialized:t,showSecondGoogleButton:n}=this.props;t?Object(l.e)(n?this.gsiSecondHomepageButtonRef:this.gsiButtonRef,this.logGSIButton.bind(this)):e&&Object(l.d)(n?this.gsiSecondHomepageButtonRef:this.gsiButtonRef,this.logGSIButton.bind(this),this.handleCredentialResponse.bind(this))}shouldComponentUpdate(e){const{isGoogleOneTapDisabled:t,isGoogleOneTapInitialized:n,showSecondGoogleButton:i}=this.props;return!n&&!!e.isGoogleOneTapInitialized||!t&&!!e.isGoogleOneTapDisabled||!!i}handleCredentialResponse(e){const t=e.credential;this.logGSIButton("select_by."+e.select_by);const n={google_open_id_token:t,autologin:!1},i=Object(r.b)(t),o={google_open_id_token:t,first_name:i.given_name,last_name:i.family_name,image_url:i.picture};this.props.onGoogleConnectSuccess(n,o)}logGSIButton(e){Object(a.a)("unauth_mweb.gsi_button."+e)}render(){const{showSecondGoogleButton:e}=this.props;return Object(d.jsx)(c.f,{position:"relative",children:Object(d.jsx)(c.bb,{onTap:()=>Object(a.a)("gsi_personalized_button.tap"),children:Object(d.jsx)(c.f,{height:44,children:e?Object(d.jsx)(c.f,{ref:this.gsiSecondHomepageButtonRef,position:"absolute",width:"100%"}):Object(d.jsx)(c.f,{ref:this.gsiButtonRef,position:"absolute",width:"100%"})})})})}}t.a=Object(o.connect)((e,t)=>({isGoogleOneTapInitialized:e.session.isGoogleOneTapInitialized,isGoogleOneTapDisabled:e.session.isGoogleOneTapDisabled}),e=>({mwebInitializeGSIScriptExpTreatment:()=>(e(Object(s.a)("mweb_initialize_GSI_script"))||"").startsWith("enabled")}))(p)}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/351-2af1b192e9f9a36c7fb8.mjs.map